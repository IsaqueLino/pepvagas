"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[168],{168:(M,d,s)=>{s.r(d),s.d(d,{EmpresaRepresentantesPageModule:()=>k});var u=s(177),g=s(4341),o=s(1075),p=s(8986),l=s(467),e=s(4438),m=s(3656),h=s(858),P=s(4796),f=s(833);const R=()=>["/empresa-perfil"];function v(r,c){if(1&r){const a=e.RV6();e.j41(0,"tr",10),e.bIt("click",function(){const n=e.eBV(a).$implicit,i=e.XpG();return e.Njj(i.onRowClick(n.idconta))}),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()}if(2&r){const a=c.$implicit,t=e.XpG();e.AVh("selected",a.idconta===t.selectedIdConta),e.R7$(2),e.JRh(a.nome),e.R7$(2),e.JRh(null==a.conta?null:a.conta.email),e.R7$(2),e.JRh(a.idEmpresa.nomeEmpresa)}}const E=[{path:"",component:(()=>{var r;class c{constructor(t,n,i,x,F){this.toastController=t,this.navigationController=n,this.empresaService=i,this.authService=x,this.alertController=F,this.user={},this.userType="",this.isLogged=!1,this.listaRepresentantes=[],this.selectedIdConta=null,this.currentPage=1,this.itemsPerPage=10,null==this.authService.getJwt()&&this.navigationController.navigateRoot("login")}ngOnInit(){var t=this;return(0,l.A)(function*(){t.getUser()})()}ionViewWillEnter(){var t=this;return(0,l.A)(function*(){try{t.listaRepresentantes=yield t.empresaService.getRepresentantesEmpresaId(t.userId),console.log("Representantes buscados com sucesso!"),t.listaRepresentantes=t.listaRepresentantes.filter(n=>null!==n.conta),console.log("Representantes ap\xf3s filtragem:",t.listaRepresentantes)}catch(n){console.error(n)}})()}onRowClick(t){this.selectedIdConta=t,console.log("ID da \xe1rea selecionada:",this.selectedIdConta)}get paginatedListaRepresentante(){const t=(this.currentPage-1)*this.itemsPerPage;return this.listaRepresentantes.slice(t,t+this.itemsPerPage)}nextPage(){this.currentPage*this.itemsPerPage<this.listaRepresentantes.length&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}excluir(){var t=this;return(0,l.A)(function*(){let n=String(t.selectedIdConta);try{const i=yield t.authService.deleteAccount(n);console.log(i),t.ionViewWillEnter()}catch(i){console.error("Erro ao excluir a conta:",i)}})()}getUser(){var t=this;return(0,l.A)(function*(){t.userId=t.authService.getUser();const n=t.authService.getType();if(null==t.userId)t.isLogged=!1;else{switch(t.userType=null!=n?n:"",n){case"A":case"C":case"M":case"R":case"L":break;case"E":t.user=yield t.empresaService.getEmpresa(t.userId)}t.isLogged=!0}})()}cadastrarRepresentante(){this.navigationController.navigateForward("cadastro-representante")}exibirMensagem(t){var n=this;return(0,l.A)(function*(){(yield n.toastController.create({message:t,duration:3e3,position:"top"})).present()})()}confirmarExclusao(){var t=this;return(0,l.A)(function*(){null!=t.selectedIdConta?yield(yield t.alertController.create({header:"Confirma\xe7\xe3o",message:"Tem certeza de que deseja excluir representante?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Excluir",handler:()=>{t.excluir()}}]})).present():t.exibirMensagem("Selecione um representante")})()}}return(r=c).\u0275fac=function(t){return new(t||r)(e.rXU(o.K_),e.rXU(m.q9),e.rXU(h.z),e.rXU(P.u),e.rXU(o.hG))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-empresa-representantes"]],decls:38,vars:6,consts:[[3,"fullscreen"],[1,"content"],[1,"container"],[1,"title"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click","disabled"],["color","danger","fill","outline",1,"botao-cancelar",3,"click"],["size","6"],["id","open-modal","expand","block",1,"butao",3,"click"],["color","light","expand","block",3,"routerLink"],[3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",0),e.nrm(1,"app-nav"),e.j41(2,"div",1)(3,"div",2)(4,"ion-card")(5,"ion-card-header")(6,"h1",3),e.EFF(7," Lista de Representantes "),e.k0s()(),e.j41(8,"ion-card-content")(9,"ion-grid")(10,"ion-row")(11,"ion-col")(12,"table")(13,"thead")(14,"tr")(15,"th"),e.EFF(16,"Nome"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Email"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Empresa"),e.k0s()()(),e.j41(21,"tbody"),e.DNE(22,v,7,5,"tr",4),e.k0s()()()(),e.j41(23,"ion-row")(24,"ion-col")(25,"ion-button",5),e.bIt("click",function(){return n.previousPage()}),e.EFF(26,"Anterior"),e.k0s(),e.j41(27,"ion-button",5),e.bIt("click",function(){return n.nextPage()}),e.EFF(28,"Pr\xf3ximo"),e.k0s(),e.j41(29,"ion-button",6),e.bIt("click",function(){return n.confirmarExclusao()}),e.EFF(30,"Excluir"),e.k0s()()()(),e.j41(31,"ion-row")(32,"ion-col",7)(33,"ion-button",8),e.bIt("click",function(){return n.cadastrarRepresentante()}),e.EFF(34," Cadastrar Representante "),e.k0s()(),e.j41(35,"ion-col",7)(36,"ion-button",9),e.EFF(37,"Voltar ao Perfil"),e.k0s()()()()()()()()),2&t&&(e.Y8G("fullscreen",!0),e.R7$(22),e.Y8G("ngForOf",n.paginatedListaRepresentante),e.R7$(3),e.Y8G("disabled",1===n.currentPage),e.R7$(2),e.Y8G("disabled",n.currentPage*n.itemsPerPage>=n.listaRepresentantes.length),e.R7$(9),e.Y8G("routerLink",e.lJ4(5,R)))},dependencies:[u.Sq,o.Jm,o.b_,o.I9,o.ME,o.hU,o.W9,o.lO,o.ln,o.N7,p.Wk,f.P],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:500;margin:0}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f8f8f8;font-weight:700}tr.selected[_ngcontent-%COMP%]{background-color:#d1e7dd}.butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),c})()}];let C=(()=>{var r;class c{}return(r=c).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[p.iI.forChild(E),p.iI]}),c})();var b=s(5553);let k=(()=>{var r;class c{}return(r=c).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.MD,g.YN,o.bv,C,b.h]}),c})()}}]);