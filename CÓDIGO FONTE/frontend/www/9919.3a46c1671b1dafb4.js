"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9919],{9919:(N,v,i)=>{i.r(v),i.d(v,{CadastroEmpresaPageModule:()=>A});var f=i(177),h=i(4341),s=i(1075),C=i(8986),g=i(467),E=i(3687),e=i(4438),b=i(3656),k=i(4796),I=i(8516),y=i(6857),x=i(5619),T=i(858),M=i(1208),S=i(833);function j(r,l){1&r&&(e.j41(0,"ion-note",15),e.EFF(1," Por favor, insira um CNPJ v\xe1lido "),e.k0s())}function _(r,l){1&r&&(e.j41(0,"ion-note",16),e.EFF(1," Por favor, insira um e-mail v\xe1lido (exemplo: usuario@dominio.com) "),e.k0s())}const R=[{path:"",component:(()=>{var r;class l{get currentMask(){return 14===this.novaEmpresa.telefone.length?this.phoneMask:this.fixPhoneMask}constructor(a,n,t,o,m,d,u){this.toastController=a,this.authService=n,this.navController=t,this.equipeService=o,this.candidatoService=m,this.adminService=d,this.empresaService=u,this.user={},this.userType="",this.isLogged=!1,this.isDarkTheme=!1,this.novaEmpresa={nome:"",cnpj:"",email:"",site:"",telefone:""},this.email="",this.senha="",this.emailInvalid=!1,this.cnpjValid=!0,this.maskPredicate=function(){var c=(0,g.A)(function*(P){return P.getInputElement()});return function(P){return c.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.fixPhoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.cnpjMask={mask:[/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/]}}ngOnInit(){var a,n;this.getUser(),this.checkTheme(),this.email=null!==(a=sessionStorage.getItem("email"))&&void 0!==a?a:"",this.senha=null!==(n=sessionStorage.getItem("pass"))&&void 0!==n?n:""}validateEmail(){this.emailInvalid=!!this.novaEmpresa.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.novaEmpresa.email)}onSubmit(){var a=this;return(0,g.A)(function*(){if(!a.novaEmpresa.email||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.novaEmpresa.email))if(0==a.novaEmpresa.nome.length)a.exibirMensagem("Informe o nome da Empresa.");else if(a.novaEmpresa.cnpj.length<18)a.exibirMensagem("Informe o CNPJ completo da Empresa.");else if(0==a.novaEmpresa.email.length)a.exibirMensagem("Informe o e-mail da Empresa.");else if(0!=a.novaEmpresa.telefone.length&&a.novaEmpresa.telefone.length<14)a.exibirMensagem("Por favor, complete o n\xfamero de telefone digitado.");else if(E.qb.isValid(a.novaEmpresa.cnpj))if((yield a.empresaService.verificarCNPJRepetido(a.novaEmpresa.cnpj)).encontrado)a.exibirMensagem("J\xe1 existe uma empresa cadastrada com o CNPJ informado.");else try{const t=yield a.authService.createAccount(a.email,a.senha,"E");if(a.id=t.data.idConta.toString(),!a.id)return void console.log("erro ao pegar o id");if(0==(yield a.isValidCNPJ(a.novaEmpresa.cnpj)))return void a.exibirMensagem("CNPJ inv\xe1lido. Por favor, insira um CNPJ v\xe1lido.");201==(yield a.empresaService.cadastrarEmpresa(a.id,a.novaEmpresa.nome,a.novaEmpresa.cnpj,a.novaEmpresa.email,a.novaEmpresa.telefone,a.novaEmpresa.site)).status&&(a.exibirMensagem("Empresa "+a.novaEmpresa.nome+" cadastrada com sucesso!"),localStorage.removeItem("c-user"),sessionStorage.clear(),a.navController.navigateRoot("login"))}catch(t){console.log(t),a.exibirMensagem("Erro interno no servidor")}else a.exibirMensagem("CNPJ inv\xe1lido. Por favor, insira um CNPJ v\xe1lido.");else a.exibirMensagem("Por favor, insira um e-mail v\xe1lido (exemplo: usuario@dominio.com).")})()}exibirMensagem(a){var n=this;return(0,g.A)(function*(){(yield n.toastController.create({message:a,duration:3e3,position:"bottom"})).present()})()}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.handleTheme()}handleTheme(){this.isDarkTheme?(document.body.setAttribute("color-scheme","dark"),localStorage.setItem("theme","dark")):(document.body.setAttribute("color-scheme","light"),localStorage.setItem("theme","light"))}checkTheme(){"dark"==localStorage.getItem("theme")?(document.body.setAttribute("color-scheme","dark"),this.isDarkTheme=!0):(document.body.setAttribute("color-scheme","light"),this.isDarkTheme=!1)}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var a=this;return(0,g.A)(function*(){const n=a.authService.getUser(),t=a.authService.getType();if(null==n)a.isLogged=!1;else{switch(a.userType=null!=t?t:"",t){case"A":a.user=yield a.adminService.getAdministrador(n);break;case"C":a.user=yield a.candidatoService.getCandidato(n);break;case"E":case"R":case"L":break;case"M":a.user=yield a.equipeService.getMembroEquipe(n)}a.isLogged=!0}})()}isValidCNPJ(a){return(0,g.A)(function*(){if("string"!=typeof a||14!==(a=a.replace(/[^\d]+/g,"")).length||/^(\d)\1{13}$/.test(a))return!1;let n=a.length-2,t=a.substring(0,n),o=a.substring(n),m=0,d=n-7;for(let c=n;c>=1;c--)m+=parseInt(t.charAt(n-c))*d--,d<2&&(d=9);let u=m%11<2?0:11-m%11;if(u!==parseInt(o.charAt(0)))return!1;n+=1,t=a.substring(0,n),m=0,d=n-7;for(let c=n;c>=1;c--)m+=parseInt(t.charAt(n-c))*d--,d<2&&(d=9);return u=m%11<2?0:11-m%11,u===parseInt(o.charAt(1))})()}deactivateAccount(){var a=this;return(0,g.A)(function*(){sessionStorage.clear(),a.navController.navigateRoot("login")})()}validateCnpj(){this.cnpjValid=E.qb.isValid(this.novaEmpresa.cnpj)}}return(r=l).\u0275fac=function(a){return new(a||r)(e.rXU(s.K_),e.rXU(k.u),e.rXU(b.q9),e.rXU(I.S),e.rXU(y.X),e.rXU(x.r),e.rXU(T.z))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-cadastro-empresa"]],decls:44,vars:13,consts:[["id","main-content"],[1,"content"],[1,"container"],[1,"title"],["size","12"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome da Empresa","maxlength","60","expand","block",3,"ngModelChange","ngModel"],["size","6"],["label","CNPJ","labelPlacement","floating","placeholder","Informe o CNPJ da Empresa","expand","block",3,"ngModelChange","ionChange","ngModel","maskito","maskitoElement"],["color","danger","class","ion-padding",4,"ngIf"],["label","E-mail para contato","labelPlacement","floating","placeholder","Informe o E-mail de contato da empresa","maxlength","50","expand","block",3,"ngModelChange","ionChange","ngModel"],["color","danger","slot","error",4,"ngIf"],["label","Site da empresa","labelPlacement","floating","placeholder","Informe o site da empresa","maxlength","45",3,"ngModelChange","ngModel"],["label","Telefone para contato","labelPlacement","floating","placeholder","Informe o site da empresa",3,"ngModelChange","ngModel","maskito","maskitoElement"],["expand","block",1,"teste",3,"click"],["color","light","expand","block",1,"teste",3,"click"],["color","danger",1,"ion-padding"],["color","danger","slot","error"]],template:function(a,n){1&a&&(e.j41(0,"ion-content",0),e.nrm(1,"app-nav"),e.j41(2,"div",1)(3,"div",2)(4,"ion-card")(5,"ion-card-header")(6,"h2",3),e.EFF(7,"Cadastro de Empresa"),e.k0s()(),e.j41(8,"ion-card-content")(9,"h1",3),e.EFF(10,"Informa\xe7\xf5es Obrigat\xf3rias"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-row")(13,"ion-col",4)(14,"ion-item")(15,"ion-input",5),e.mxI("ngModelChange",function(o){return e.DH7(n.novaEmpresa.nome,o)||(n.novaEmpresa.nome=o),o}),e.k0s()()()(),e.j41(16,"ion-row")(17,"ion-col",6)(18,"ion-item")(19,"ion-input",7),e.mxI("ngModelChange",function(o){return e.DH7(n.novaEmpresa.cnpj,o)||(n.novaEmpresa.cnpj=o),o}),e.bIt("ionChange",function(){return n.validateCnpj()}),e.k0s()(),e.DNE(20,j,2,0,"ion-note",8),e.k0s(),e.j41(21,"ion-col",6)(22,"ion-item")(23,"ion-input",9),e.mxI("ngModelChange",function(o){return e.DH7(n.novaEmpresa.email,o)||(n.novaEmpresa.email=o),o}),e.bIt("ionChange",function(){return n.validateEmail()}),e.k0s(),e.DNE(24,_,2,0,"ion-note",10),e.k0s()()(),e.nrm(25,"br"),e.j41(26,"h1",3),e.EFF(27,"Informa\xe7\xf5es Opcionais"),e.k0s(),e.nrm(28,"br"),e.j41(29,"ion-row")(30,"ion-col",6)(31,"ion-item")(32,"ion-input",11),e.mxI("ngModelChange",function(o){return e.DH7(n.novaEmpresa.site,o)||(n.novaEmpresa.site=o),o}),e.k0s()()(),e.j41(33,"ion-col",6)(34,"ion-item")(35,"ion-input",12),e.mxI("ngModelChange",function(o){return e.DH7(n.novaEmpresa.telefone,o)||(n.novaEmpresa.telefone=o),o}),e.k0s()()()(),e.nrm(36,"br"),e.k0s()(),e.j41(37,"ion-row")(38,"ion-col",6)(39,"ion-button",13),e.bIt("click",function(){return n.onSubmit()}),e.EFF(40," Cadastrar "),e.k0s()(),e.j41(41,"ion-col",6)(42,"ion-button",14),e.bIt("click",function(){return n.deactivateAccount()}),e.EFF(43," Cancelar "),e.k0s()()()()()()),2&a&&(e.R7$(15),e.R50("ngModel",n.novaEmpresa.nome),e.R7$(4),e.R50("ngModel",n.novaEmpresa.cnpj),e.Y8G("maskito",n.cnpjMask)("maskitoElement",n.maskPredicate),e.R7$(),e.Y8G("ngIf",0==n.cnpjValid),e.R7$(2),e.AVh("invalid-input",n.emailInvalid),e.R7$(),e.R50("ngModel",n.novaEmpresa.email),e.R7$(),e.Y8G("ngIf",n.emailInvalid),e.R7$(8),e.R50("ngModel",n.novaEmpresa.site),e.R7$(3),e.R50("ngModel",n.novaEmpresa.telefone),e.Y8G("maskito",n.currentMask)("maskitoElement",n.maskPredicate))},dependencies:[f.bT,h.BC,h.tU,h.vS,s.Jm,s.b_,s.I9,s.ME,s.hU,s.W9,s.$w,s.uz,s.JI,s.ln,s.Gw,M.uj,S.P],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:30px}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{scale:90%}.botao-cancelar[_ngcontent-%COMP%]{border-radius:4px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.invalid-input[_ngcontent-%COMP%]{--highlight-color: var(--ion-color-danger);--highlight-color-invalid: var(--ion-color-danger);--highlight-color-focused: var(--ion-color-danger)}.invalid-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--ion-color-danger);--border-color: var(--ion-color-danger)}ion-note[slot=error][_ngcontent-%COMP%]{display:block;font-size:small;margin-top:5px;color:var(--ion-color-danger)}"]}),l})()}];let F=(()=>{var r;class l{}return(r=l).\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[C.iI.forChild(R),C.iI]}),l})();var O=i(5553);let A=(()=>{var r;class l{}return(r=l).\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[f.MD,h.YN,s.bv,F,M.rt,O.h]}),l})()}}]);