"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6113],{6113:(D,p,c)=>{c.r(p),c.d(p,{PerfilProfissionalLiberalPageModule:()=>L});var h=c(177),m=c(4341),r=c(1075),b=c(1208),P=c(8986),d=c(467),e=c(4438),_=c(3656),C=c(4796),j=c(7700),k=c(3045),M=c(833);const S=["modal1"],T=["modal2"];function y(a,u){if(1&a&&(e.j41(0,"ion-select-option",40),e.EFF(1),e.k0s()),2&a){const l=u.$implicit;e.Y8G("value",l.id),e.R7$(),e.JRh(l.nome)}}function E(a,u){if(1&a){const l=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",23),e.bIt("click",function(){e.eBV(l);const n=e.XpG();return e.Njj(n.fechar())}),e.j41(2,"ion-button"),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-buttons",24)(5,"ion-button",25),e.bIt("click",function(){e.eBV(l);const n=e.XpG();return e.Njj(n.onSubmit())}),e.EFF(6,"Enviar"),e.k0s()()(),e.j41(7,"ion-content",26),e.nrm(8,"br"),e.j41(9,"h2",7),e.EFF(10,"Alterando as informa\xe7\xf5es do profissional liberal"),e.k0s(),e.j41(11,"form",27)(12,"ion-item"),e.nrm(13,"ion-input",28),e.k0s(),e.j41(14,"ion-item"),e.nrm(15,"ion-input",29),e.k0s(),e.j41(16,"ion-item"),e.nrm(17,"ion-input",30),e.k0s(),e.j41(18,"ion-item"),e.nrm(19,"ion-input",31),e.k0s(),e.j41(20,"ion-item",32)(21,"ion-select",33),e.bIt("ionChange",function(n){e.eBV(l);const t=e.XpG();return e.Njj(t.onTipoChange(n))}),e.DNE(22,y,2,2,"ion-select-option",34),e.j41(23,"ion-select-option",35),e.EFF(24,"Cadastar novo tipo de servi\xe7o"),e.k0s()()(),e.j41(25,"ion-item"),e.nrm(26,"ion-input",36),e.k0s(),e.j41(27,"ion-row")(28,"ion-col",37)(29,"ion-button",38),e.bIt("click",function(){e.eBV(l);const n=e.sdS(32);return e.Njj(n.click())}),e.EFF(30),e.k0s(),e.j41(31,"input",39,2),e.bIt("change",function(n){e.eBV(l);const t=e.XpG();return e.Njj(t.onFileSelected(n))}),e.k0s()()()()()}if(2&a){const l=e.XpG();e.R7$(5),e.Y8G("strong",!0),e.R7$(6),e.Y8G("formGroup",l.obrigatorio),e.R7$(6),e.Y8G("maskito",l.phoneMask)("maskitoElement",l.maskPredicate),e.R7$(5),e.Y8G("ngForOf",l.opcoes),e.R7$(8),e.SpI(" ",l.selectedFile?"Imagem de divulga\xe7\xe3o Selecionado: "+l.selectedFile.name:"Selecionar imagem de divulga\xe7\xe3o"," ")}}function F(a,u){if(1&a){const l=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",41)(2,"ion-button",42),e.bIt("click",function(){e.eBV(l);const n=e.XpG();return e.Njj(n.cancelPassword())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-buttons",24)(5,"ion-button",25),e.bIt("click",function(){e.eBV(l);const n=e.XpG();return e.Njj(n.confirmPassword())}),e.EFF(6,"Enviar"),e.k0s()()(),e.j41(7,"ion-content",26),e.nrm(8,"br"),e.j41(9,"h2",7),e.EFF(10,"Alterar Senha"),e.k0s(),e.j41(11,"form",27)(12,"ion-item")(13,"ion-input",43),e.nrm(14,"ion-input-password-toggle",44),e.k0s()(),e.j41(15,"ion-item")(16,"ion-input",45),e.nrm(17,"ion-input-password-toggle",44),e.k0s()(),e.j41(18,"ion-item")(19,"ion-input",46),e.nrm(20,"ion-input-password-toggle",44),e.k0s()()()()}if(2&a){const l=e.XpG();e.R7$(5),e.Y8G("strong",!0),e.R7$(6),e.Y8G("formGroup",l.senha)}}const I=[{path:"",component:(()=>{var a;class u{constructor(o,n,t,s,i,f,g){this.formBuilder=o,this.alertController=n,this.toastController=t,this.authService=s,this.navController=i,this.tipoService=f,this.profissionalService=g,this.isDarkTheme=!1,this.isLogged=!1,this.selectedFile=null,this.opcoes=[],this.tipoDeServico={},this.conta={},this.profissional={},this.proficionalAlterado={},this.maskPredicate=function(){var w=(0,d.A)(function*(v){return v.getInputElement()});return function(v){return w.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.actionSheetButtons=[{text:"Prosseguir",role:"destructive",handler:()=>{this.deactivateAccount(this.conta.idConta)}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}],null==this.authService.getJwt()&&this.navController.navigateRoot("login"),this.obrigatorio=this.formBuilder.group({nome:[null],nomeSocial:[null],descricao:[null],telefone:[null],email:[null],tipo:[null],imagem:[null]}),this.senha=this.formBuilder.group({senhaAtaul:[null],senhaNova:[null],senhaConfirmada:[null]})}ngOnInit(){var o=this;return(0,d.A)(function*(){o.obterOpcoes(),o.checkTheme(),o.authService.getJwt()&&(o.isLogged=!0);try{o.conta=yield o.authService.getContaDetails(),console.log("Conta obtida com sucesso!"),console.log(o.conta)}catch(n){console.error("Erro ao obter detalhes da conta:",n)}try{console.log("id da conta "+o.conta.idConta)}catch(n){console.log("erro ao pegar o id da conta"+n)}try{o.profissional=yield o.profissionalService.buscarProfissional(o.conta.idConta),console.log("candidato obtido com sucesso!")}catch{console.log("n\xe3o foi obtido")}o.conta.nome=o.profissional.nome,o.conta.nomeSocial=o.profissional.nomeSocial,o.conta.descricao=o.profissional.descricao,o.conta.telefone=o.formatTelefone(o.profissional.telefone),o.conta.email=o.profissional.email,o.tipoDeServico=yield o.profissionalService.buscarTipoPorProfissional(o.conta.idConta)})()}formatTipoProfissional(o){return Array.isArray(o)&&0!==o.length?o.map(t=>t.nome).join(", "):"Tipos de Servi\xe7os n\xe3o informados"}openEditModal(){this.obrigatorio.setValue({nome:this.conta.nome||null,nomeSocial:this.conta.nomeSocial||null,descricao:this.conta.descricao||null,telefone:this.conta.telefone||null,email:this.conta.email||null,tipo:this.tipoDeServico.map(o=>o.id)||null,imagem:null}),this.modal.present()}formatTelefone(o){return o&&11===o.length?o.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):o}onFileSelected(o){const t=o.target.files[0];null!=o.target.files[0]&&(null!=t&&t.size>8388608?this.presentToast("O tamanho do banner deve ter no maximo 8 MB "):this.selectedFile=t)}presentToast(o){var n=this;return(0,d.A)(function*(){(yield n.toastController.create({message:o,duration:2e3,position:"bottom"})).present()})()}obterOpcoes(){var o=this;return(0,d.A)(function*(){try{o.opcoes=yield o.tipoService.buscarTodosServicos(),o.opcoes.sort((n,t)=>n.nome.localeCompare(t.nome))}catch(n){console.error("Erro ao buscar as op\xe7\xf5es:",n),o.presentToast("Erro ao carregar as op\xe7\xf5es de servi\xe7os.")}})()}onWillDismiss(o){"confirm"===o.detail.role&&(this.message=`Hello, ${o.detail.data}!`)}onWillDismissPassword(o){"confirm"===o.detail.role&&(this.message=`Hello, ${o.detail.data}!`)}exibirMensagem(o){var n=this;return(0,d.A)(function*(){(yield n.toastController.create({message:o,duration:3e3,position:"top"})).present()})()}confirmPassword(){console.log("entrei aqui"),this.updatePassword()}cancelPassword(){console.log("entrei no cancelar"),this.modal2.dismiss(null,"cancel")}updatePassword(){var o=this;return(0,d.A)(function*(){try{o.senha.value.senhaNova.length<4?o.exibirMensagem("Nova senha deve ter no m\xednimo 4 caracteres"):o.senha.value.senhaNova!=o.senha.value.senhaConfirmada?o.exibirMensagem("A nova senha e sua confirma\xe7\xe3o n\xe3o coincidem"):200===(yield o.authService.updatePassword(o.conta.idConta,o.senha.value.senhaAtaul,o.senha.value.senhaNova,o.senha.value.senhaConfirmada)).status?(o.exibirMensagem("Senha atualizada com sucesso!"),o.modal2.dismiss(null,"confirm"),o.senha.value.senhaAtaul="",o.senha.value.senhaNova="",o.senha.value.senhaConfirmada=""):o.exibirMensagem("Senha Atual incorreta")}catch(n){console.error("Erro ao atualizar a senha:",n),o.exibirMensagem("Senha Atual incorreta")}})()}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.handleTheme()}checkTheme(){"dark"==localStorage.getItem("theme")?document.body.setAttribute("color-scheme","dark"):document.body.setAttribute("color-scheme","light")}logout(){this.authService.logout(),this.navController.navigateForward("/login")}handleTheme(){this.isDarkTheme?(document.body.setAttribute("color-scheme","dark"),localStorage.setItem("theme","dark")):(document.body.setAttribute("color-scheme","light"),localStorage.setItem("theme","light"))}deactivateAccount(o){var n=this;return(0,d.A)(function*(){try{yield n.authService.deleteAccount(o),console.log("Conta exclu\xedda com sucesso!"),n.logout()}catch(t){console.error("Erro ao excluir conta:",t)}})()}fechar(){var o=this;return(0,d.A)(function*(){o.modal.dismiss(null,"cancel")})()}onTipoChange(o){var n=this;return(0,d.A)(function*(){const t=o.detail.value;t.includes("outro")&&(yield(yield n.alertController.create({header:"Outro Tipo de Servi\xe7o",inputs:[{name:"outroTipo",type:"text",placeholder:"Informe o outro tipo de servi\xe7o"}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{n.obrigatorio.patchValue({tipo:t.filter(i=>"outro"!==i)})}},{text:"OK",handler:i=>{i.outroTipo&&(n.tipoService.cadastrarTipo(i.outroTipo),n.opcoes.push({id:i.outroTipo,nome:i.outroTipo}),n.obrigatorio.patchValue({tipo:[...t.filter(g=>"outro"!==g),i.outroTipo]}))}}]})).present())})()}onSubmit(){var o=this;return(0,d.A)(function*(){if(o.obrigatorio.invalid)return void Object.keys(o.obrigatorio.controls).forEach(s=>{const i=o.obrigatorio.get(s);null!=i&&i.invalid&&i.errors&&i.errors.required&&o.presentToast(`O campo ${s} \xe9 obrigat\xf3rio. Por favor, preencha-o.`)});if(null==localStorage.getItem("user"))return void console.log("erro ao pegar o id");null==o.obrigatorio.value.nome&&(o.obrigatorio.value.nome=o.conta.nome),null==o.obrigatorio.value.nomeSocial&&(o.obrigatorio.value.nomeSocial=o.conta.nomeSocial),null==o.obrigatorio.value.descricao&&(o.obrigatorio.value.descricao=o.conta.descricao),null==o.obrigatorio.value.telefone&&(o.obrigatorio.value.telefone=o.conta.telefone),console.log("telefone"+o.obrigatorio.value.telefone),null==o.obrigatorio.value.email&&(o.obrigatorio.value.email=o.conta.email);const t=yield o.profissionalService.atualizarProficional(o.conta.idConta,o.obrigatorio.value.nome,o.obrigatorio.value.nomeSocial,o.obrigatorio.value.descricao,o.obrigatorio.value.telefone,o.obrigatorio.value.email);if(console.log(t),null!=o.obrigatorio.value.tipo){const s=yield o.profissionalService.cadastrarTipo(o.conta.idConta,o.obrigatorio.value.tipo);console.log(s)}if(null!=o.obrigatorio.value.imagem&&null!==o.selectedFile){const s=yield o.profissionalService.enviarImagem(o.conta.idConta,o.selectedFile);console.log(s)}o.fechar()})()}}return(a=u).\u0275fac=function(o){return new(o||a)(e.rXU(m.ok),e.rXU(r.hG),e.rXU(r.K_),e.rXU(C.u),e.rXU(_.q9),e.rXU(j.d),e.rXU(k.M))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-perfil-profissional-liberal"]],viewQuery:function(o,n){if(1&o&&(e.GBs(S,7),e.GBs(T,7)),2&o){let t;e.mGM(t=e.lsd())&&(n.modal=t.first),e.mGM(t=e.lsd())&&(n.modal2=t.first)}},decls:58,vars:11,consts:[["modal1",""],["modal2",""],["fileInput",""],[3,"fullscreen"],[1,"content"],[1,"container"],[1,"title"],[2,"text-align","center"],["label","Email","labelPlacement","floating","readonly","",3,"ngModelChange","ngModel"],["type","password","label","Senha","labelPlacement","floating","value","...................","readonly",""],["id","open-modal2","expand","block",1,"teste"],["size","6"],["name","nome","label","Nome","labelPlacement","floating","placeholder","Informe o nome","readonly","",3,"ngModelChange","ngModel"],["name","nomeSocial","label","Nome Social (opcional)","labelPlacement","floating","placeholder","Informe o nome social","readonly","",3,"ngModelChange","ngModel"],["name","telefone","label","Telefone","labelPlacement","floating","placeholder","Informe o telefone para contato","maxlength","15","type","tel","readonly","",3,"ngModelChange","ngModel","maskito","maskitoElement"],["name","email","label","Email","labelPlacement","floating","placeholder","Informe o email de contato","type","email","readonly","",3,"ngModelChange","ngModel"],["label","Tipo de servi\xe7o prestado","readonly","","labelPlacement","floating","placeholder","\xc1reas de interesse n\xe3o informadas",3,"value"],["name","descricao","label","Descri\xe7\xe3o","labelPlacement","floating","placeholder","Informe a Descri\xe7\xe3o","readonly","",3,"ngModelChange","ngModel"],["id","open-modal","expand","block",1,"teste",3,"click"],["color","light","expand","block","id","open-action-sheet",1,"teste"],["trigger","open-action-sheet","header","Tem certeza que deseja desativar sua conta?",3,"buttons"],["trigger","open-modal",3,"willDismiss"],["trigger","open-modal2",3,"willDismiss"],["slot","start",3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],[3,"formGroup"],["formControlName","nome","label","Nome","labelPlacement","floating","placeholder","Informe o nome"],["formControlName","nomeSocial","label","Nome Social (opcional)","labelPlacement","floating","placeholder","Informe o nome social"],["formControlName","telefone","label","Telefone","labelPlacement","floating","placeholder","Informe o telefone para contato","maxlength","15","type","tel",3,"maskito","maskitoElement"],["formControlName","email","label","Email","labelPlacement","floating","placeholder","Informe o email de contato","type","email"],[1,"form-item"],["formControlName","tipo","multiple","true","label","Tipo de servi\xe7o prestado","labelPlacement","floating",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["value","outro"],["formControlName","descricao","label","Descri\xe7\xe3o","labelPlacement","floating","placeholder","Descri\xe7\xe3o da atua\xe7\xe3o"],["size","12"],["expand","block",1,"teste",3,"click"],["type","file","formControlName","imagem",2,"display","none",3,"change"],[3,"value"],["slot","start"],[3,"click"],["formControlName","senhaAtaul","type","password","label","Senha atual","labelPlacement","floating"],["slot","end","color","success"],["formControlName","senhaNova","type","password","label","Senha nova","labelPlacement","floating"],["formControlName","senhaConfirmada","type","password","label","Confirmar senha nova","labelPlacement","floating"]],template:function(o,n){if(1&o){const t=e.RV6();e.j41(0,"ion-content",3),e.nrm(1,"app-nav"),e.j41(2,"div",4)(3,"div",5)(4,"ion-card")(5,"ion-card-header")(6,"h1",6),e.EFF(7,"Perfil do Profissional Liberal"),e.k0s()(),e.j41(8,"ion-card-content")(9,"h1",7),e.EFF(10,"Informa\xe7\xf5es da Conta"),e.k0s(),e.j41(11,"ion-item")(12,"ion-input",8),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.conta.email,i)||(n.conta.email=i),e.Njj(i)}),e.k0s()(),e.j41(13,"ion-item"),e.nrm(14,"ion-input",9),e.k0s(),e.j41(15,"ion-row")(16,"ion-col")(17,"ion-button",10),e.EFF(18,"Alterar Senha"),e.k0s()()()(),e.j41(19,"ion-card-content")(20,"h1",7),e.EFF(21,"Informa\xe7\xf5es do profissional "),e.k0s(),e.j41(22,"form")(23,"ion-row")(24,"ion-col",11)(25,"ion-item")(26,"ion-input",12),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.conta.nome,i)||(n.conta.nome=i),e.Njj(i)}),e.k0s()()(),e.j41(27,"ion-col",11)(28,"ion-item")(29,"ion-input",13),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.conta.nomeSocial,i)||(n.conta.nomeSocial=i),e.Njj(i)}),e.k0s()()()(),e.j41(30,"ion-row")(31,"ion-col",11)(32,"ion-item")(33,"ion-input",14),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.conta.telefone,i)||(n.conta.telefone=i),e.Njj(i)}),e.k0s()()(),e.j41(34,"ion-col",11)(35,"ion-item")(36,"ion-input",15),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.conta.email,i)||(n.conta.email=i),e.Njj(i)}),e.k0s()()()(),e.j41(37,"ion-row")(38,"ion-col",11)(39,"ion-item"),e.nrm(40,"ion-input",16),e.k0s()(),e.j41(41,"ion-col",11)(42,"ion-item")(43,"ion-input",17),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.conta.descricao,i)||(n.conta.descricao=i),e.Njj(i)}),e.k0s()()()()()()(),e.j41(44,"ion-row")(45,"ion-col",11)(46,"ion-button",18),e.bIt("click",function(){return e.eBV(t),e.Njj(n.openEditModal())}),e.EFF(47," Alterar conta "),e.k0s()(),e.j41(48,"ion-col",11)(49,"ion-button",19),e.nrm(50,"ion-action-sheet",20),e.EFF(51," Desativar conta "),e.k0s()()()()(),e.j41(52,"ion-modal",21,0),e.bIt("willDismiss",function(i){return e.eBV(t),e.Njj(n.onWillDismiss(i))}),e.DNE(54,E,33,6,"ng-template"),e.k0s(),e.j41(55,"ion-modal",22,1),e.bIt("willDismiss",function(i){return e.eBV(t),e.Njj(n.onWillDismissPassword(i))}),e.DNE(57,F,21,2,"ng-template"),e.k0s()()}2&o&&(e.Y8G("fullscreen",!0),e.R7$(12),e.R50("ngModel",n.conta.email),e.R7$(14),e.R50("ngModel",n.conta.nome),e.R7$(3),e.R50("ngModel",n.conta.nomeSocial),e.R7$(4),e.R50("ngModel",n.conta.telefone),e.Y8G("maskito",n.phoneMask)("maskitoElement",n.maskPredicate),e.R7$(3),e.R50("ngModel",n.conta.email),e.R7$(4),e.Y8G("value",n.formatTipoProfissional(n.tipoDeServico)),e.R7$(3),e.R50("ngModel",n.conta.descricao),e.R7$(7),e.Y8G("buttons",n.actionSheetButtons))},dependencies:[m.qT,m.me,m.BC,m.cb,m.tU,m.vS,m.cV,b.uj,r.wC,r.Jm,r.QW,r.b_,r.I9,r.ME,r.hU,r.W9,r.$w,r.Wv,r.uz,r.ln,r.Nm,r.Ip,r.ai,r.Sb,r.Je,r.Gw,h.Sq,M.P,m.j4,m.JD],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.profile-img[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;height:100px;align-items:center;margin-bottom:20px}.profile-img[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px;height:100px;width:100px;margin-left:-10px;padding:-10px}.user-img[_ngcontent-%COMP%]{width:25px;margin-left:15px}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.content[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;align-items:center;height:auto}.container[_ngcontent-%COMP%]{padding:0 10px;width:80%;max-width:1000px}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:500;margin:0}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}"]}),u})()}];let N=(()=>{var a;class u{}return(a=u).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[P.iI.forChild(I),P.iI]}),u})();var x=c(5553);let L=(()=>{var a;class u{}return(a=u).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[[m.YN,b.rt,r.bv.forRoot({})],h.MD,x.h,m.YN,r.bv,m.X1,N]}),u})()}}]);