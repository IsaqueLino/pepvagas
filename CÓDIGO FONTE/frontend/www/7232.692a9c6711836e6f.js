"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7232],{7232:(x,v,i)=>{i.r(v),i.d(v,{ListarAreaPageModule:()=>O});var g=i(177),l=i(4341),n=i(1075),f=i(8986),m=i(467),e=i(4438),p=i(4796),A=i(3656),b=i(7464),c=i(833);const u=["modal1"],_=["modal2"],P=()=>["/cadastro-area"],k=()=>["/home"];function L(a,d){if(1&a){const s=e.RV6();e.j41(0,"tr",13),e.bIt("click",function(){const r=e.eBV(s).$implicit,o=e.XpG();return e.Njj(o.onRowClick(r.idArea))}),e.j41(1,"td"),e.EFF(2),e.k0s()()}if(2&a){const s=d.$implicit,t=e.XpG();e.AVh("selected",s.idArea===t.selectedIdArea),e.R7$(2),e.JRh(s.nome)}}function M(a,d){if(1&a){const s=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",14)(2,"ion-button",13),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.cancelar())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title"),e.EFF(5," Alterar \xc1rea "),e.k0s(),e.j41(6,"ion-buttons",15)(7,"ion-button",16),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.enviarAlteracao())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",17)(10,"form",18)(11,"ion-item"),e.nrm(12,"ion-input",19),e.k0s()()()}if(2&a){const s=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(3),e.Y8G("formGroup",s.area)}}const j=[{path:"",component:(()=>{var a;class d{constructor(t,r,o,h,C,I,B){this.formBuilder=t,this.authService=r,this.alertController=o,this.navController=h,this.toastController=C,this.areaService=I,this.navigationController=B,this.listaArea=[],this.selectedIdArea=null,this.currentPage=1,this.itemsPerPage=10,this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",null==this.authService.getJwt()&&this.navController.navigateRoot("login"),this.area=this.formBuilder.group({nome:[null]})}ngOnInit(){this.carregarLista()}onWillDismiss(t){"confirm"===t.detail.role&&(this.message=`Hello, ${t.detail.data}!`)}carregarLista(){this.areaService.buscarTodasAreas().subscribe(t=>{this.listaArea=Array.isArray(t)?t:[]})}onRowClick(t){this.selectedIdArea=t}validateAndOpenModal(){var t=this;return(0,m.A)(function*(){if(null!==t.selectedIdArea){const r=t.listaArea.find(o=>o.idArea===t.selectedIdArea);r&&(t.area.patchValue({nome:r.nome}),t.modal.present())}else t.exibirMensagem("Selecione uma \xe1rea para poder alterar.")})()}cancelar(){var t=this;return(0,m.A)(function*(){t.modal.dismiss(null,"cancel")})()}get paginatedListaTipo(){const t=(this.currentPage-1)*this.itemsPerPage;return this.listaArea.slice(t,t+this.itemsPerPage)}nextPage(){this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}excluir(){var t=this;return(0,m.A)(function*(){if(null!=t.selectedIdArea){const r=String(t.selectedIdArea);try{yield t.areaService.excluir(r),yield t.carregarLista(),(yield t.toastController.create({message:"\xc1rea exclu\xedda com sucesso!",duration:2e3,position:"top",cssClass:"custom-dark-toast"})).present(),t.selectedIdArea=null}catch(o){console.error("Erro ao excluir \xe1rea:",o),(yield t.toastController.create({message:"Erro ao excluir a \xe1rea.",duration:2e3,position:"top",cssClass:"custom-dark-toast"})).present()}}})()}ionViewWillEnter(){this.carregarLista()}enviarAlteracao(){var t=this;return(0,m.A)(function*(){if(null!=t.area.value.nome){if(null!==t.selectedIdArea){let r=String(t.selectedIdArea);try{yield t.areaService.atualizarArea(r,t.area.value.nome),t.modal.dismiss(null,"cancel"),t.carregarLista(),(yield t.toastController.create({message:"\xc1rea alterada com sucesso!",duration:2e3,position:"top",cssClass:"custom-dark-toast"})).present()}catch{(yield t.toastController.create({message:"Erro ao alterar a \xe1rea.",duration:2e3,position:"top",cssClass:"custom-dark-toast"})).present()}}}else(yield t.toastController.create({message:"O novo nome tem que ser informado para realizar a altera\xe7\xe3o",duration:2e3,position:"top",cssClass:"custom-dark-toast"})).present()})()}onWillDismissPassword(t){"confirm"===t.detail.role&&(this.message=`Hello, ${t.detail.data}!`)}exibirMensagem(t){var r=this;return(0,m.A)(function*(){(yield r.toastController.create({message:t,duration:3e3,position:"top"})).present()})()}confirmarExclusao(){var t=this;return(0,m.A)(function*(){null!=t.selectedIdArea?yield(yield t.alertController.create({header:"Confirma\xe7\xe3o",message:"Tem certeza de que deseja excluir a \xe1rea?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"Excluir",handler:()=>{t.excluir()}}]})).present():t.exibirMensagem("Selecione uma \xe1rea.")})()}}return(a=d).\u0275fac=function(t){return new(t||a)(e.rXU(l.ok),e.rXU(p.u),e.rXU(n.hG),e.rXU(A.q9),e.rXU(n.K_),e.rXU(b.x),e.rXU(A.q9))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-listar-area"]],viewQuery:function(t,r){if(1&t&&(e.GBs(u,7),e.GBs(_,7)),2&t){let o;e.mGM(o=e.lsd())&&(r.modal=o.first),e.mGM(o=e.lsd())&&(r.modal2=o.first)}},decls:41,vars:8,consts:[["modal1",""],[3,"fullscreen"],[1,"content"],[1,"container"],[1,"title"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click","disabled"],["size","3"],["expand","block",1,"teste",3,"routerLink"],["expand","block",1,"teste",3,"click"],["color","danger","expand","block",1,"teste",3,"click"],["color","light","expand","block",1,"teste",3,"routerLink"],[3,"willDismiss"],[3,"click"],["slot","start"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],[3,"formGroup"],["formControlName","nome","label","Nome","labelPlacement","floating","placeholder","Informe o novo nome para a \xe1rea"]],template:function(t,r){if(1&t){const o=e.RV6();e.j41(0,"ion-content",1),e.nrm(1,"app-nav"),e.j41(2,"div",2)(3,"div",3)(4,"ion-card")(5,"ion-card-header")(6,"h1",4),e.EFF(7," Listar \xc1reas "),e.k0s()(),e.j41(8,"ion-card-content")(9,"ion-grid")(10,"ion-row")(11,"ion-col")(12,"table")(13,"thead")(14,"tr")(15,"th"),e.EFF(16,"Nome"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,L,3,3,"tr",5),e.k0s()()(),e.nrm(19,"ion-row"),e.k0s(),e.j41(20,"ion-col")(21,"ion-button",6),e.bIt("click",function(){return e.eBV(o),e.Njj(r.previousPage())}),e.EFF(22,"Anterior"),e.k0s(),e.j41(23,"ion-button",6),e.bIt("click",function(){return e.eBV(o),e.Njj(r.nextPage())}),e.EFF(24,"Pr\xf3ximo"),e.k0s()()()()(),e.j41(25,"ion-row")(26,"ion-col",7)(27,"ion-button",8),e.EFF(28,"Cadastrar"),e.k0s()(),e.j41(29,"ion-col",7)(30,"ion-button",9),e.bIt("click",function(){return e.eBV(o),e.Njj(r.validateAndOpenModal())}),e.EFF(31,"Alterar"),e.k0s()(),e.j41(32,"ion-col",7)(33,"ion-button",10),e.bIt("click",function(){return e.eBV(o),e.Njj(r.confirmarExclusao())}),e.EFF(34,"Excluir"),e.k0s()(),e.j41(35,"ion-col",7)(36,"ion-button",11),e.EFF(37,"Voltar"),e.k0s()()()()(),e.j41(38,"ion-modal",12,0),e.bIt("willDismiss",function(C){return e.eBV(o),e.Njj(r.onWillDismiss(C))}),e.DNE(40,M,13,2,"ng-template"),e.k0s()()}2&t&&(e.Y8G("fullscreen",!0),e.R7$(18),e.Y8G("ngForOf",r.paginatedListaTipo),e.R7$(3),e.Y8G("disabled",1===r.currentPage),e.R7$(2),e.Y8G("disabled",r.currentPage*r.itemsPerPage>=r.listaArea.length),e.R7$(4),e.Y8G("routerLink",e.lJ4(6,P)),e.R7$(9),e.Y8G("routerLink",e.lJ4(7,k)))},dependencies:[l.qT,l.BC,l.cb,n.Jm,n.QW,n.b_,n.I9,n.ME,n.hU,n.W9,n.lO,n.$w,n.uz,n.ln,n.BC,n.ai,n.Sb,n.Gw,n.N7,g.Sq,c.P,l.j4,l.JD,f.Wk],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:500;margin:0}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f8f8f8;font-weight:700}tr.selected[_ngcontent-%COMP%]{background-color:#d1e7dd}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),d})()}];let y=(()=>{var a;class d{}return(a=d).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[f.iI.forChild(j),f.iI]}),d})();var E=i(5553);let O=(()=>{var a;class d{}return(a=d).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[[l.YN,n.bv.forRoot({})],g.MD,E.h,l.YN,n.bv,l.X1,y]}),d})()},7464:(x,v,i)=>{i.d(v,{x:()=>e});var g=i(467),l=i(317),n=i(5312),f=i(4438),m=i(1626);let e=(()=>{var p;class A{constructor(c){this.http=c,this.urlBase=n.c.API}buscarTodasAreas(){return this.http.get(this.urlBase+"/area/list")}cadastrarArea(c){var u=this;return(0,g.A)(function*(){return yield l.A.create({baseURL:u.urlBase}).post("/area/create",{nome:c})})()}buscarAreaPorID(c){var u=this;return(0,g.A)(function*(){return yield l.A.create({baseURL:u.urlBase}).get(u.urlBase+"/area/find/"+c)})()}atualizarArea(c,u){var _=this;return(0,g.A)(function*(){return yield l.A.create({baseURL:_.urlBase}).put("/area/update/"+c,{nome:u})})()}excluir(c){var u=this;return(0,g.A)(function*(){return yield l.A.create({baseURL:u.urlBase}).delete(u.urlBase+"/area/delete/"+c)})()}getAreas(){var c=this;return(0,g.A)(function*(){return(yield l.A.create({baseURL:c.urlBase}).get("/area/list")).data})()}}return(p=A).\u0275fac=function(c){return new(c||p)(f.KVO(m.Qq))},p.\u0275prov=f.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),A})()}}]);