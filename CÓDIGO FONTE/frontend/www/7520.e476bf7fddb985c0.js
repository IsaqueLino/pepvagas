"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7520],{7520:(w,F,l)=>{l.r(F),l.d(F,{CadastroCandidatoPageModule:()=>R});var k=l(177),d=l(4341),i=l(1075),C=l(8986),h=l(467),S=l(764),e=l(4438),E=l(3656),j=l(4796),I=l(1322),_=l(6857),N=l(7464),b=l(1208),O=l(833);const x=["cidadesPopover"],M=()=>["/login"];function y(n,m){if(1&n){const r=e.RV6();e.j41(0,"ion-checkbox",57),e.bIt("ionChange",function(t){e.eBV(r);const a=e.XpG(2);return e.Njj(a.checkboxChange(t))}),e.j41(1,"ion-item",58),e.EFF(2),e.k0s()()}if(2&n){const r=m.$implicit;e.Y8G("value",r),e.R7$(2),e.SpI(" ",r," ")}}function T(n,m){if(1&n){const r=e.RV6();e.j41(0,"ion-searchbar",54),e.bIt("ionInput",function(t){e.eBV(r);const a=e.XpG();return e.Njj(a.handleCidadesFiltro(t))}),e.k0s(),e.j41(1,"ion-list",55),e.DNE(2,y,3,2,"ion-checkbox",56),e.k0s()}if(2&n){const r=e.XpG();e.Y8G("debounce",500),e.R7$(),e.Y8G("inset",!0),e.R7$(),e.Y8G("ngForOf",r.cidadesFiltro)}}function $(n,m){if(1&n&&(e.j41(0,"ion-select-option",59),e.EFF(1),e.k0s()),2&n){const r=m.$implicit;e.Y8G("value",r.id),e.R7$(),e.JRh(r.nome)}}const A=[{path:"",component:(()=>{var n;class m{constructor(o,t,a,p,c,g,f,v){var u,s;this.formBuilder=o,this.alertController=t,this.authService=a,this.cidadeService=p,this.candidatoService=c,this.navController=g,this.toastController=f,this.areaService=v,this.opcoes=[],this.selectedFile=null,this.cidades=[],this.email="",this.senha="",this.cidadesFiltro=[],this.cidadesSelecionadas=[],this.cidadesSelecionadasText="",this.cidadeProcurada="",this.isDarkTheme=!1,this.isLogged=!1,this.isCidadesPopoverOpen=!1,this.maskPredicate=function(){var G=(0,h.A)(function*(P){return P.getInputElement()});return function(P){return G.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.cpfMask={mask:[/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"-",/\d/,/\d/]},this.moneyMask=(0,S.TK)({decimalZeroPadding:!0,precision:2,decimalSeparator:",",thousandSeparator:".",min:0,prefix:"R$"}),this.email="",this.senha="",this.obterOpcoes(),this.obrigatorio=this.formBuilder.group({nome:[null,d.k0.required],nomeSocial:[null],genero:[null,d.k0.required],cpf:[null,d.k0.required],dataNascimento:[null,[d.k0.required,this.validateDateOfBirth]],pcd:[null,d.k0.required]}),this.opcional=this.formBuilder.group({disponibilidade:[null],cidadeInteresse:[[]],vagaInteresse:[null],niviInstrucao:[null],cnh:[null],pretensaoSalarial:[null,[d.k0.required,this.validatePretensaoSalarial]],telefone:[null],curriculo:[null],areas:[null]}),this.email=null!==(u=sessionStorage.getItem("email"))&&void 0!==u?u:"",this.senha=null!==(s=sessionStorage.getItem("pass"))&&void 0!==s?s:""}obterOpcoes(){var o=this;return(0,h.A)(function*(){o.opcoes=yield o.areaService.getAreas(),o.opcoes.sort((t,a)=>t.nome.localeCompare(a.nome))})()}validateDateOfBirth(o){if(o.value){const t=new Date(o.value);if((new Date).getFullYear()-t.getFullYear()<=16)return{invalidDateOfBirth:!0}}return null}checkboxChange(o){var t;const a=null!==(t=o.detail)&&void 0!==t?t:null;a&&(a.checked?this.addOnCidades(a.value):this.removeCidade(a.value))}addOnCidades(o){this.cidadesSelecionadas.indexOf(o)<=-1&&this.cidadesSelecionadas.push(o),console.log("Adicionando cidades: "+this.cidadesSelecionadas)}removeCidade(o){const t=this.cidadesSelecionadas.indexOf(o);t>-1&&this.cidadesSelecionadas.splice(t,1),console.log("Cidades ap\xf3s remover: "+this.cidadesSelecionadas)}validatePretensaoSalarial(o){return o.value&&o.value<=0?{invalidPretensaoSalarial:!0}:null}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.handleTheme()}handleTheme(){this.isDarkTheme?(document.body.setAttribute("color-scheme","dark"),localStorage.setItem("theme","dark")):(document.body.setAttribute("color-scheme","light"),localStorage.setItem("theme","light"))}carregarCidades(){var o=this;return(0,h.A)(function*(){o.cidadeService.getCidades().subscribe(t=>{console.log(t),o.cidades=t.map(a=>a.nome),o.cidadesFiltro=[...o.cidades]})})()}presentToast(o){var t=this;return(0,h.A)(function*(){(yield t.toastController.create({message:o,duration:2e3,position:"bottom"})).present()})()}ngOnInit(){var o,t;this.email="",this.senha="",this.checkTheme(),this.carregarCidades(),this.authService.getJwt()&&(this.isLogged=!0),this.email=null!==(o=sessionStorage.getItem("email"))&&void 0!==o?o:"",this.senha=null!==(t=sessionStorage.getItem("pass"))&&void 0!==t?t:""}logout(){this.authService.logout(),this.navController.navigateForward("login")}mostrarCidades(o){this.cidadesPopover.event=o,this.isCidadesPopoverOpen=!0}dismissCidadesPopover(){this.cidadesSelecionadasText=this.cidadesSelecionadas.toString(),this.cidadesSelecionadas=[],this.isCidadesPopoverOpen=!1,console.log(this.cidadesSelecionadasText)}handleCidadesFiltro(o){const t=o.target.value.toLowerCase();if(""==t)return this.cidadesFiltro=[...this.cidades],this.cidadesFiltro;this.cidadesFiltro=this.cidadesFiltro.filter(a=>{if(a.toLowerCase().indexOf(t)>-1)return a})}onFileSelected(o){const a=o.target.files[0];null!=o.target.files[0]&&(null!=a&&a.size>8388608?this.presentToast("O tamanho o curriculo deve ter no maximo 8 MB "):this.selectedFile=a)}getMaxDate(){return(new Date).toISOString().split("T")[0]}onSubmit(){var o=this;return(0,h.A)(function*(){var t,a;if(o.obrigatorio.invalid)return void Object.keys(o.obrigatorio.controls).forEach(u=>{const s=o.obrigatorio.get(u);null!=s&&s.invalid&&(s.errors&&s.errors.required&&o.presentToast(`O campo ${u} \xe9 obrigat\xf3rio. Por favor, preencha-o.`),s.errors&&s.errors.invalidDateOfBirth&&o.presentToast("Voc\xea deve ter mais de 18 anos para se cadastrar."))});let p=!1;if(Object.keys(o.opcional.controls).forEach(u=>{const s=o.opcional.get(u);null!=s&&s.invalid&&s.errors&&s.errors.invalidPretensaoSalarial&&(o.presentToast("A pretens\xe3o salarial deve ser maior que zero."),p=!0)}),p)return;o.email=null!==(t=sessionStorage.getItem("email"))&&void 0!==t?t:"",o.senha=null!==(a=sessionStorage.getItem("pass"))&&void 0!==a?a:"";const c=yield o.authService.createAccount(o.email,o.senha,"C");console.log("CONTA: "+c.status);let f,g=c.data.idConta.toString();if(!g)return void console.log("Erro ao pegar o id");null!=o.opcional.value.pretensaoSalarial&&(f=o.converterParaNumero(o.opcional.value.pretensaoSalarial));const v=yield o.candidatoService.cadastroCandidato(g,o.obrigatorio.value.nome,o.obrigatorio.value.nomeSocial,o.obrigatorio.value.genero,o.obrigatorio.value.cpf,o.obrigatorio.value.dataNascimento,o.obrigatorio.value.pcd,o.opcional.value.disponibilidade,o.cidadesSelecionadasText,o.opcional.value.vagaInteresse,o.opcional.value.niviInstrucao,o.opcional.value.cnh,f,o.opcional.value.telefone);if(console.log(v),null!=o.opcional.value.areas){const u=yield o.candidatoService.cadastrarAreas(g,o.opcional.value.areas);console.log(u)}if(null!=o.opcional.value.curriculo)if(null!==o.selectedFile)try{const u=yield o.candidatoService.uploadFile(g,o.selectedFile);console.log(u)}catch(u){console.error("Erro ao enviar arquivo:",u)}else console.error("Nenhum arquivo selecionado.");201==v.status&&(localStorage.removeItem("c-user"),o.email="",o.senha="",sessionStorage.clear(),o.navController.navigateRoot("login"))})()}cancelar(){var o=this;return(0,h.A)(function*(){sessionStorage.clear(),o.navController.navigateForward("login")})()}checkTheme(){"dark"==localStorage.getItem("theme")?document.body.setAttribute("color-scheme","dark"):document.body.setAttribute("color-scheme","light")}onAreaChange(o){var t=this;return(0,h.A)(function*(){const a=o.detail.value;var c;a.includes("outro")&&(yield(yield t.alertController.create({header:"Outra \xc1rea de Interesse",inputs:[{name:"outraArea",type:"text",placeholder:"Informe a nova \xe1rea de interesse"}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{t.opcional.patchValue({areas:a.filter(c=>"outro"!==c)})}},{text:"OK",handler:(c=(0,h.A)(function*(g){g.outraArea&&(t.areaService.cadastrarArea(g.outraArea),t.opcoes.push({id:g.outraArea,nome:g.outraArea}),t.opcional.patchValue({areas:[...a.filter(v=>"outro"!==v),g.outraArea]}),t.presentToast("Nova \xe1rea de interesse adicionada com sucesso."))}),function(f){return c.apply(this,arguments)})}]})).present())})()}converterParaNumero(o){if("R$"==o)return null;let t=o.replace(/[^\d,.]/g,"");t=t.replace(".","");const a=parseFloat(t.replace(",","."));if(isNaN(a))throw new Error(`Valor "${o}" n\xe3o p\xf4de ser convertido para n\xfamero.`);return a}converterParaMoeda(o){if(isNaN(o))throw new Error("Valor numerico n\xe3o p\xf4de ser convertido para um n\xfamero");const a=o.toFixed(2).split(".");return`R$ ${a[0].replace(/\B(?=(\d{3})+(?!\d))/g,".")},${a[1]}`}}return(n=m).\u0275fac=function(o){return new(o||n)(e.rXU(d.ok),e.rXU(i.hG),e.rXU(j.u),e.rXU(I.i),e.rXU(_.X),e.rXU(E.q9),e.rXU(i.K_),e.rXU(N.x))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-cadastro-candidato"]],viewQuery:function(o,t){if(1&o&&e.GBs(x,5),2&o){let a;e.mGM(a=e.lsd())&&(t.cidadesPopover=a.first)}},decls:136,vars:16,consts:[["cidadesPopover",""],["fileInput",""],[3,"fullscreen"],[1,"content"],[1,"container"],[1,"title"],[3,"formGroup"],["size","6"],[1,"form-item"],["formControlName","nome","label","Nome","labelPlacement","floating","placeholder","Informe o nome"],["formControlName","nomeSocial","label","Nome Social (opcional)","labelPlacement","floating","placeholder","Informe o nome social"],["formControlName","dataNascimento","label","Data de Nascimento","labelPlacement","floating","placeholder","Informe a data de nascimento","type","date",3,"max"],["formControlName","cpf","label","CPF","labelPlacement","floating","placeholder","Informe o CPF","maxlength","14",3,"maskito","maskitoElement"],["formControlName","genero","label","Sexo","labelPlacement","floating"],["value","f"],["value","m"],["value","n"],["formControlName","pcd","label","PCD","labelPlacement","floating"],["value","1"],["value","0"],["size","4"],["formControlName","disponibilidade","label","Turno","labelPlacement","floating"],["value","Diurno"],["value","Noturno"],["value","Misto"],[3,"didDismiss","isOpen"],[1,"clickable","flex-cidades",3,"click"],[1,"flex-cidades"],[1,"cidades-selecionadas"],["formControlName","vagaInteresse","label","Vaga de Interesse","labelPlacement","floating"],["value","Est\xe1gio"],["value","CLT"],["value","PJ"],["formControlName","niviInstrucao","label","Nivel de Instru\xe7\xe3o","labelPlacement","floating"],["value","Ensino M\xe9dio Incompleto"],["value","Ensino M\xe9dio Completo"],["value","Curso Superior Incompleto"],["value","Curso Superior Completo"],["formControlName","areas","multiple","true","label","Areas de interesse","labelPlacement","floating",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["value","outro"],["formControlName","cnh","label","Tipo de CNH","labelPlacement","floating"],["value","A"],["value","B"],["value","AB"],["value","C"],["value","D"],["value","E"],["formControlName","pretensaoSalarial","label","Pretens\xe3o Salarial","labelPlacement","floating","placeholder","Informe a pretens\xe3o salarial",3,"maskito","maskitoElement"],["formControlName","telefone","label","Telefone","labelPlacement","floating","placeholder","Informe o telefone para contato","maxlength","15","type","tel",3,"maskito","maskitoElement"],["size","12"],["expand","block",1,"teste",3,"click"],["type","file","formControlName","curriculo","accept",".pdf",2,"display","none",3,"change"],["color","light","expand","block",1,"teste",3,"routerLink"],["formControlName","cidadeInteresse",3,"ionInput","debounce"],["lines","none",1,"flex",3,"inset"],["class","clickable","labelPlacement","end","justify","start",3,"value","ionChange",4,"ngFor","ngForOf"],["labelPlacement","end","justify","start",1,"clickable",3,"ionChange","value"],[1,"none-item"],[3,"value"]],template:function(o,t){if(1&o){const a=e.RV6();e.j41(0,"ion-content",2),e.nrm(1,"app-nav"),e.j41(2,"div",3)(3,"div",4)(4,"ion-card")(5,"ion-card-header")(6,"h1",5),e.EFF(7,"Cadastro candidato"),e.k0s()(),e.j41(8,"ion-card-content")(9,"h2",5),e.EFF(10,"Informa\xe7\xf5es Obrigat\xf3rias"),e.k0s(),e.nrm(11,"br"),e.j41(12,"form",6)(13,"ion-grid")(14,"ion-row")(15,"ion-col",7)(16,"ion-item",8),e.nrm(17,"ion-input",9),e.k0s()(),e.j41(18,"ion-col",7)(19,"ion-item",8),e.nrm(20,"ion-input",10),e.k0s()()()(),e.j41(21,"ion-grid")(22,"ion-row")(23,"ion-col",7)(24,"ion-item",8),e.nrm(25,"ion-input",11),e.k0s()(),e.j41(26,"ion-col",7)(27,"ion-item",8),e.nrm(28,"ion-input",12),e.k0s()()()(),e.j41(29,"ion-grid")(30,"ion-row")(31,"ion-col",7)(32,"ion-item",8)(33,"ion-select",13)(34,"ion-select-option",14),e.EFF(35,"Feminino"),e.k0s(),e.j41(36,"ion-select-option",15),e.EFF(37,"Masculino"),e.k0s(),e.j41(38,"ion-select-option",16),e.EFF(39,"N\xe3o informar"),e.k0s()()()(),e.j41(40,"ion-col",7)(41,"ion-item",8)(42,"ion-select",17)(43,"ion-select-option",18),e.EFF(44,"Sim"),e.k0s(),e.j41(45,"ion-select-option",19),e.EFF(46,"N\xe3o"),e.k0s()()()()()()()()(),e.j41(47,"ion-card")(48,"ion-card-header")(49,"h2",5),e.EFF(50,"Informa\xe7\xf5es Opcionais"),e.k0s()(),e.j41(51,"ion-card-content")(52,"form",6)(53,"ion-grid")(54,"ion-row")(55,"ion-col",20)(56,"ion-item",8)(57,"ion-select",21)(58,"ion-select-option",22),e.EFF(59,"Diurno"),e.k0s(),e.j41(60,"ion-select-option",23),e.EFF(61,"Noturno"),e.k0s(),e.j41(62,"ion-select-option",24),e.EFF(63,"Misto"),e.k0s()()()(),e.j41(64,"ion-col",20)(65,"ion-popover",25,0),e.bIt("didDismiss",function(){return e.eBV(a),e.Njj(t.dismissCidadesPopover())}),e.DNE(67,T,3,3,"ng-template"),e.k0s(),e.j41(68,"ion-item",26),e.bIt("click",function(c){return e.eBV(a),e.Njj(t.mostrarCidades(c))}),e.j41(69,"div",27)(70,"p"),e.EFF(71,"Cidade(s) de Interesse"),e.k0s(),e.j41(72,"p",28),e.EFF(73),e.k0s()()()(),e.j41(74,"ion-col",20)(75,"ion-item",8)(76,"ion-select",29)(77,"ion-select-option",30),e.EFF(78,"Est\xe1gio"),e.k0s(),e.j41(79,"ion-select-option",31),e.EFF(80,"CLT"),e.k0s(),e.j41(81,"ion-select-option",32),e.EFF(82,"PJ"),e.k0s()()()()(),e.j41(83,"ion-row")(84,"ion-col",20)(85,"ion-item",8)(86,"ion-select",33)(87,"ion-select-option",34),e.EFF(88,"Ensino M\xe9dio Incompleto"),e.k0s(),e.j41(89,"ion-select-option",35),e.EFF(90,"Ensino M\xe9dio Completo"),e.k0s(),e.j41(91,"ion-select-option",36),e.EFF(92,"Curso Superior Incompleto"),e.k0s(),e.j41(93,"ion-select-option",37),e.EFF(94,"Curso Superior Completo"),e.k0s()()()(),e.j41(95,"ion-col",20)(96,"ion-item",8)(97,"ion-select",38),e.bIt("ionChange",function(c){return e.eBV(a),e.Njj(t.onAreaChange(c))}),e.DNE(98,$,2,2,"ion-select-option",39),e.j41(99,"ion-select-option",40),e.EFF(100,"Cadastar nova \xe1rea"),e.k0s()()()(),e.j41(101,"ion-col",20)(102,"ion-item",8)(103,"ion-select",41)(104,"ion-select-option",42),e.EFF(105,"A"),e.k0s(),e.j41(106,"ion-select-option",43),e.EFF(107,"B"),e.k0s(),e.j41(108,"ion-select-option",44),e.EFF(109,"AB"),e.k0s(),e.j41(110,"ion-select-option",45),e.EFF(111,"C"),e.k0s(),e.j41(112,"ion-select-option",46),e.EFF(113,"D"),e.k0s(),e.j41(114,"ion-select-option",47),e.EFF(115,"E"),e.k0s()()()()(),e.j41(116,"ion-row")(117,"ion-col",7)(118,"ion-item",8),e.nrm(119,"ion-input",48),e.k0s()(),e.j41(120,"ion-col",7)(121,"ion-item",8),e.nrm(122,"ion-input",49),e.k0s()()()(),e.j41(123,"ion-row")(124,"ion-col",50)(125,"ion-button",51),e.bIt("click",function(){e.eBV(a);const c=e.sdS(128);return e.Njj(c.click())}),e.EFF(126),e.k0s(),e.j41(127,"input",52,1),e.bIt("change",function(c){return e.eBV(a),e.Njj(t.onFileSelected(c))}),e.k0s()()()()()(),e.j41(129,"ion-row")(130,"ion-col",7)(131,"ion-button",51),e.bIt("click",function(){return e.eBV(a),e.Njj(t.onSubmit())}),e.EFF(132," Cadastrar "),e.k0s()(),e.j41(133,"ion-col",7)(134,"ion-button",53),e.EFF(135," Cancelar "),e.k0s()()()()()()}2&o&&(e.Y8G("fullscreen",!0),e.R7$(12),e.Y8G("formGroup",t.obrigatorio),e.R7$(13),e.FS9("max",t.getMaxDate()),e.R7$(3),e.Y8G("maskito",t.cpfMask)("maskitoElement",t.maskPredicate),e.R7$(24),e.Y8G("formGroup",t.opcional),e.R7$(13),e.Y8G("isOpen",t.isCidadesPopoverOpen),e.R7$(8),e.JRh(t.cidadesSelecionadasText),e.R7$(25),e.Y8G("ngForOf",t.opcoes),e.R7$(21),e.Y8G("maskito",t.moneyMask)("maskitoElement",t.maskPredicate),e.R7$(3),e.Y8G("maskito",t.phoneMask)("maskitoElement",t.maskPredicate),e.R7$(4),e.SpI(" ",t.selectedFile?"Curr\xedculo Selecionado: "+t.selectedFile.name:"Enviar novo curr\xedculo"," "),e.R7$(8),e.Y8G("routerLink",e.lJ4(15,M)))},dependencies:[d.qT,d.me,d.BC,d.cb,d.tU,b.uj,i.Jm,i.b_,i.I9,i.ME,i.eY,i.hU,i.W9,i.lO,i.$w,i.uz,i.nf,i.ln,i.S1,i.Nm,i.Ip,i.CF,i.hB,i.Je,i.Gw,i.N7,k.Sq,O.P,d.j4,d.JD,C.Wk],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.flex-cidades[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;gap:40px}.flex-cidades[_ngcontent-%COMP%]   .cidades-selecionadas[_ngcontent-%COMP%]{text-wrap:nowrap;text-overflow:clip}.none-item[_ngcontent-%COMP%]{border:none}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:500;margin:0}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.form-item[_ngcontent-%COMP%]{width:100%;max-width:100%}"]}),m})()}];let D=(()=>{var n;class m{}return(n=m).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[C.iI.forChild(A),C.iI]}),m})();var B=l(5553);let R=(()=>{var n;class m{}return(n=m).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[[d.YN,b.rt,i.bv.forRoot({})],k.MD,B.h,d.YN,i.bv,d.X1,D]}),m})()}}]);