"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9960],{9960:(T,f,s)=>{s.r(f),s.d(f,{EmpresaPerfilPageModule:()=>R});var v=s(177),h=s(4341),l=s(1075),_=s(8986),p=s(467),e=s(4438),M=s(3656),E=s(4796),b=s(5619),j=s(858),C=s(833),P=s(1208);const x=["modal3"],k=["modal4"];function A(r,d){if(1&r){const o=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",20)(2,"ion-button",21),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.cancel())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",22)(7,"ion-button",23),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.alterarEmpresa())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",24),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Informa\xe7\xf5es Gerais"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",25),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.nomeEmpresa,n)||(t.empresaAlterada.nomeEmpresa=n),e.Njj(n)}),e.k0s()(),e.j41(15,"ion-item")(16,"ion-input",26),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.cnpj,n)||(t.empresaAlterada.cnpj=n),e.Njj(n)}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-input",27),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.email,n)||(t.empresaAlterada.email=n),e.Njj(n)}),e.k0s()(),e.nrm(19,"br"),e.j41(20,"h2",5),e.EFF(21,"Informa\xe7\xf5es Complementares"),e.k0s(),e.nrm(22,"br"),e.j41(23,"ion-item")(24,"ion-input",28),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.telefone,n)||(t.empresaAlterada.telefone=n),e.Njj(n)}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-input",29),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.site,n)||(t.empresaAlterada.site=n),e.Njj(n)}),e.k0s()()()}if(2&r){const o=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",o.empresaAlterada.nomeEmpresa),e.R7$(2),e.Y8G("maskito",o.cnpjMask)("maskitoElement",o.maskPredicate),e.R50("ngModel",o.empresaAlterada.cnpj),e.R7$(2),e.R50("ngModel",o.empresaAlterada.email),e.R7$(6),e.Y8G("maskito",o.currentMask)("maskitoElement",o.maskPredicate),e.R50("ngModel",o.empresaAlterada.telefone),e.R7$(2),e.R50("ngModel",o.empresaAlterada.site)}}function S(r,d){if(1&r){const o=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",20)(2,"ion-button",21),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.cancelPassword())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",22)(7,"ion-button",23),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.confirmPassword())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",24),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Alterar Senha"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",30),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.novaSenha.senhaAtual,n)||(t.novaSenha.senhaAtual=n),e.Njj(n)}),e.nrm(15,"ion-input-password-toggle",31),e.k0s()(),e.j41(16,"ion-item")(17,"ion-input",32),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.novaSenha.novaSenha,n)||(t.novaSenha.novaSenha=n),e.Njj(n)}),e.nrm(18,"ion-input-password-toggle",31),e.k0s()(),e.j41(19,"ion-item")(20,"ion-input",33),e.mxI("ngModelChange",function(n){e.eBV(o);const t=e.XpG();return e.DH7(t.novaSenha.confirmarSenha,n)||(t.novaSenha.confirmarSenha=n),e.Njj(n)}),e.nrm(21,"ion-input-password-toggle",31),e.k0s()()()}if(2&r){const o=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",o.novaSenha.senhaAtual),e.R7$(3),e.R50("ngModel",o.novaSenha.novaSenha),e.R7$(3),e.R50("ngModel",o.novaSenha.confirmarSenha)}}const y=[{path:"",component:(()=>{var r;class d{constructor(a,n,t,m,i){this.toastController=a,this.authService=n,this.navController=t,this.adminService=m,this.empresaService=i,this.user={},this.userType="",this.isLogged=!1,this.empresa={},this.empresaAlterada={},this.conta={},this.novaSenha={senhaAtual:"",novaSenha:"",confirmarSenha:""},this.maskPredicate=function(){var c=(0,p.A)(function*(g){return g.getInputElement()});return function(g){return c.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.cnpjMask={mask:[/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/]},this.fixPhoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.actionSheetButtons=[{text:"Prosseguir",role:"destructive",handler:()=>{this.deactivateAccount(this.conta.idConta)}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}],null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var a=this;return(0,p.A)(function*(){a.getUser(),a.conta=yield a.authService.getContaDetails(),a.empresa=yield a.empresaService.getEmpresa(a.userId),a.empresaAlterada=Object.assign({},a.empresa),a.empresaAlterada.cnpj=a.formatCnpj(a.empresaAlterada.cnpj),a.empresaAlterada.telefone=a.formatTelefone(a.empresaAlterada.telefone)})()}get currentMask(){return 14===this.empresaAlterada.telefone.length?this.phoneMask:this.fixPhoneMask}cancel(){this.empresaAlterada=Object.assign({},this.empresa),this.empresaAlterada.cnpj=this.formatCnpj(this.empresaAlterada.cnpj),this.empresaAlterada.telefone=this.formatTelefone(this.empresaAlterada.telefone),this.modal3.dismiss(null,"cancel")}onWillDismissPassword(a){"confirm"===a.detail.role&&(this.message=`Hello, ${a.detail.data}!`)}cancelPassword(){this.modal4.dismiss(null,"cancel"),this.novaSenha.senhaAtual="",this.novaSenha.novaSenha="",this.novaSenha.confirmarSenha=""}confirmPassword(){this.updatePassword()}onWillDismiss(a){"confirm"===a.detail.role&&(this.message=`Hello, ${a.detail.data}!`)}exibirMensagem(a){var n=this;return(0,p.A)(function*(){(yield n.toastController.create({message:a,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var a=this;return(0,p.A)(function*(){a.userId=a.authService.getUser();const n=a.authService.getType();if(null==a.userId)a.isLogged=!1;else{switch(a.userType=null!=n?n:"",n){case"A":a.user=yield a.adminService.getAdministrador(a.userId),console.log(a.user);break;case"C":case"M":case"R":case"L":break;case"E":a.user=yield a.empresaService.getEmpresa(a.userId)}a.isLogged=!0}})()}updatePassword(){var a=this;return(0,p.A)(function*(){try{a.novaSenha.novaSenha.length<4?a.exibirMensagem("Nova senha deve ter no m\xednimo 4 caracteres."):a.novaSenha.novaSenha!=a.novaSenha.confirmarSenha?a.exibirMensagem("A nova senha e sua confirma\xe7\xe3o n\xe3o coincidem."):200===(yield a.authService.updatePassword(a.conta.idConta,a.novaSenha.senhaAtual,a.novaSenha.novaSenha,a.novaSenha.confirmarSenha)).status?(a.exibirMensagem("Senha atualizada com sucesso!"),a.modal4.dismiss(null,"confirm"),a.novaSenha.senhaAtual="",a.novaSenha.novaSenha="",a.novaSenha.confirmarSenha=""):a.exibirMensagem("Senha Atual incorreta")}catch(n){console.error("Erro ao atualizar a senha:",n),a.exibirMensagem("Senha Atual incorreta")}})()}deactivateAccount(a){var n=this;return(0,p.A)(function*(){try{var t;const c=yield n.empresaService.desativarEmpresa(a),g=(null==c||null===(t=c.data)||void 0===t?void 0:t.message)||(null==c?void 0:c.message);if(g)if("Empresa desativada com sucesso!"===g){var m;const u=yield n.authService.deleteAccount(a);var i;null!=u&&null!==(m=u.data)&&void 0!==m&&m.message?(yield n.exibirMensagem("Conta desativada com sucesso!"),n.logout()):(console.error("Erro ao desativar a conta. Resposta da API de conta:",u),n.exibirMensagem((null==u||null===(i=u.data)||void 0===i?void 0:i.message)||"Erro ao desativar a conta. Tente novamente mais tarde."))}else console.error("Erro ao desativar a empresa:",g),n.exibirMensagem(g);else console.error("Resposta inv\xe1lida ou sem mensagem da API de empresa."),n.exibirMensagem("Erro ao desativar a empresa. Tente novamente mais tarde.")}catch(c){console.error("Erro ao desativar empresa ou conta:",c),n.exibirMensagem("Ocorreu um erro ao tentar desativar a empresa ou a conta. Tente novamente.")}})()}alterarEmpresa(){var a=this;return(0,p.A)(function*(){if(0==a.empresaAlterada.nomeEmpresa.length)a.exibirMensagem("Informe o nome da Empresa");else if(0==a.empresaAlterada.email.length)a.exibirMensagem("Informe o e-mail da Empresa");else if(0!=a.empresaAlterada.telefone.length&&a.empresaAlterada.telefone.length<14)a.exibirMensagem("Por favor, complete o n\xfamero de telefone digitado");else try{200==(yield a.empresaService.alterarEmpresa(a.userId,a.empresaAlterada.nomeEmpresa,a.empresaAlterada.cnpj,a.empresaAlterada.email,a.empresaAlterada.telefone,a.empresaAlterada.site)).status?(a.modal3.dismiss(a.empresaAlterada.nomeEmpresa,"confirm"),a.ngOnInit(),a.exibirMensagem("Empresa alterada com sucesso!")):a.exibirMensagem("Erro interno no servidor")}catch(n){console.error(n)}})()}formatCnpj(a){return a&&14===a.length?a.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):a}formatTelefone(a){return a?11===(a=a.replace(/\D/g,"")).length?a.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):10===a.length?a.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):a:""}gerenciarRepresentantes(){this.navController.navigateForward("empresa-representantes")}}return(r=d).\u0275fac=function(a){return new(a||r)(e.rXU(l.K_),e.rXU(E.u),e.rXU(M.q9),e.rXU(b.r),e.rXU(j.z))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-empresa-perfil"]],viewQuery:function(a,n){if(1&a&&(e.GBs(x,7),e.GBs(k,7)),2&a){let t;e.mGM(t=e.lsd())&&(n.modal3=t.first),e.mGM(t=e.lsd())&&(n.modal4=t.first)}},decls:61,vars:7,consts:[["modal3",""],["modal4",""],["id","main-content"],[1,"content"],[1,"container"],[2,"text-align","center"],["size","12"],["label","Email","labelPlacement","floating","readonly","",3,"ngModelChange","ngModel"],["id","open-modal4","expand","block",1,"butao"],["readonly","","label","Nome da Empresa","labelPlacement","floating","placeholder","Informe o nome da empresa","maxlength","60",3,"ngModelChange","ngModel"],["size","6"],["readonly","","label","CNPJ","labelPlacement","floating","placeholder","Informe o CNPJ da empresa","maxlength","60",3,"value"],["readonly","","label","E-mail de contato","labelPlacement","floating","placeholder","Nome da Empresa","maxlength","60",3,"ngModelChange","ngModel"],["readonly","","label","Telefone para contato","labelPlacement","floating","placeholder","Telefone de contato n\xe3o informado","maxlength","60",3,"value"],["readonly","","label","Website","labelPlacement","floating","placeholder","Website da Empresa n\xe3o informado","maxlength","60",3,"ngModelChange","ngModel"],["id","open-modal3","expand","block",1,"butao"],["id","open-action-sheet","color","danger","expand","block",1,"botao-cancelar"],["trigger","open-action-sheet","header","Tem certeza que deseja excluir sua conta?",3,"buttons"],["trigger","open-modal3",3,"willDismiss"],["trigger","open-modal4",3,"willDismiss"],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome",3,"ngModelChange","ngModel"],["readonly","","label","CNPJ","labelPlacement","floating","placeholder","Informe o CNPJ da empresa","maxlength","60",3,"ngModelChange","maskito","maskitoElement","ngModel"],["label","E-mail de contato","labelPlacement","floating","placeholder","Nome da Empresa","maxlength","60",3,"ngModelChange","ngModel"],["label","Telefone para contato","labelPlacement","floating","placeholder","Telefone de contato n\xe3o informado","maxlength","60",3,"ngModelChange","maskito","maskitoElement","ngModel"],["label","Website","labelPlacement","floating","placeholder","Website da Empresa n\xe3o informado","maxlength","60",3,"ngModelChange","ngModel"],["type","password","label","Senha atual","labelPlacement","floating",3,"ngModelChange","ngModel"],["slot","end","color","success"],["type","password","label","Senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Confirmar senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"]],template:function(a,n){if(1&a){const t=e.RV6();e.j41(0,"ion-content",2),e.nrm(1,"app-nav"),e.j41(2,"div",3)(3,"div",4)(4,"ion-card")(5,"ion-card-content")(6,"h1",5),e.EFF(7,"Perfil da Empresa"),e.k0s(),e.nrm(8,"br"),e.j41(9,"h1",5),e.EFF(10,"Informa\xe7\xf5es da Conta"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-row")(13,"ion-col",6)(14,"ion-item")(15,"ion-input",7),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.conta.email,i)||(n.conta.email=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"ion-row")(17,"ion-col")(18,"ion-button",8),e.EFF(19,"Alterar Senha"),e.k0s()()(),e.nrm(20,"br"),e.j41(21,"h1",5),e.EFF(22,"Informa\xe7\xf5es Gerais"),e.k0s(),e.nrm(23,"br"),e.j41(24,"ion-row")(25,"ion-col")(26,"ion-item",6)(27,"ion-input",9),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.empresa.nomeEmpresa,i)||(n.empresa.nomeEmpresa=i),e.Njj(i)}),e.k0s()()()(),e.j41(28,"ion-row")(29,"ion-col",10)(30,"ion-item"),e.nrm(31,"ion-input",11),e.k0s()(),e.j41(32,"ion-col",10)(33,"ion-item")(34,"ion-input",12),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.empresa.email,i)||(n.empresa.email=i),e.Njj(i)}),e.k0s()()()(),e.nrm(35,"br"),e.j41(36,"h1",5),e.EFF(37,"Informa\xe7\xf5es Complementares"),e.k0s(),e.nrm(38,"br"),e.j41(39,"ion-row")(40,"ion-col",10)(41,"ion-item"),e.nrm(42,"ion-input",13),e.k0s()(),e.j41(43,"ion-col",10)(44,"ion-item")(45,"ion-input",14),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(n.empresa.site,i)||(n.empresa.site=i),e.Njj(i)}),e.k0s()()()(),e.nrm(46,"br"),e.j41(47,"ion-row")(48,"ion-col",10)(49,"ion-button",15),e.EFF(50," Alterar Informa\xe7\xf5es "),e.k0s()(),e.j41(51,"ion-col",10)(52,"ion-button",16),e.EFF(53," Excluir Conta "),e.k0s(),e.nrm(54,"ion-action-sheet",17),e.k0s()(),e.j41(55,"ion-modal",18,0),e.bIt("willDismiss",function(i){return e.eBV(t),e.Njj(n.onWillDismiss(i))}),e.DNE(57,A,27,10,"ng-template"),e.k0s(),e.j41(58,"ion-modal",19,1),e.bIt("willDismiss",function(i){return e.eBV(t),e.Njj(n.onWillDismissPassword(i))}),e.DNE(60,S,22,4,"ng-template"),e.k0s()()()()()()}2&a&&(e.R7$(15),e.R50("ngModel",n.conta.email),e.R7$(12),e.R50("ngModel",n.empresa.nomeEmpresa),e.R7$(4),e.Y8G("value",n.formatCnpj(n.empresa.cnpj)),e.R7$(3),e.R50("ngModel",n.empresa.email),e.R7$(8),e.Y8G("value",n.formatTelefone(n.empresa.telefone)),e.R7$(3),e.R50("ngModel",n.empresa.site),e.R7$(9),e.Y8G("buttons",n.actionSheetButtons))},dependencies:[h.BC,h.tU,h.vS,l.wC,l.Jm,l.QW,l.b_,l.I9,l.hU,l.W9,l.$w,l.Wv,l.uz,l.ln,l.BC,l.ai,l.Sb,l.Gw,C.P,P.uj],styles:[".profile-picture-container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:200%;height:200%}.profile-img[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;height:100px;align-items:center;margin-bottom:20px}.butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}.profile-img[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px;height:100px;width:100px;margin-left:-10px;padding:-10px}.user-img[_ngcontent-%COMP%]{width:25px;margin-left:15px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.logo-img[_ngcontent-%COMP%]{max-width:150px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),d})()}];let I=(()=>{var r;class d{}return(r=d).\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[_.iI.forChild(y),_.iI]}),d})();var F=s(5553);let R=(()=>{var r;class d{}return(r=d).\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[v.MD,h.YN,l.bv,I,F.h,P.rt]}),d})()}}]);