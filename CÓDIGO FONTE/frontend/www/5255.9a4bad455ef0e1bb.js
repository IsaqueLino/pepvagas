"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5255],{5255:(D,v,o)=>{o.r(v),o.d(v,{MinhasVagasPageModule:()=>R});var p=o(177),h=o(4341),l=o(1075),m=o(8986),d=o(467),a=o(4438),V=o(6857),f=o(4796),M=o(9839),P=o(5619),C=o(3656),b=o(858),_=o(2078),j=o(8516),y=o(7229),x=o(833);const k=["popoverVaga"];function S(n,r){if(1&n){const s=a.RV6();a.j41(0,"ion-content",8)(1,"ion-button",9),a.bIt("click",function(){a.eBV(s);const t=a.XpG();return a.Njj(t.verDetalhesVaga())}),a.EFF(2,"Visualizar"),a.k0s(),a.j41(3,"ion-button",9),a.bIt("click",function(){a.eBV(s);const t=a.XpG();return a.Njj(t.editarVaga())}),a.EFF(4,"Editar"),a.k0s(),a.j41(5,"ion-button",10),a.bIt("click",function(){a.eBV(s);const t=a.XpG();return a.Njj(t.confirmarExclusao())}),a.EFF(6,"Excluir"),a.k0s()()}}function E(n,r){if(1&n){const s=a.RV6();a.j41(0,"div",13),a.bIt("click",function(t){const i=a.eBV(s).$implicit,c=a.XpG(2);return a.Njj(c.presentPopoverVaga(t,i.idVaga))}),a.nrm(1,"app-vaga",14),a.k0s()}if(2&n){const s=r.$implicit;a.R7$(),a.Y8G("titulo",s.titulo)("cidade",s.cidade)("regime",s.regime)("salario",s.salario)("pcd",s.pcd)("tipo",s.tipo)("data",s.dataLimite)("logo",s.logo)("empresa",s.idEmpresa.nomeEmpresa)("ocultarNome",s.ocultarNome)}}function O(n,r){if(1&n&&(a.j41(0,"div",11),a.DNE(1,E,2,10,"div",12),a.k0s()),2&n){const s=a.XpG();a.R7$(),a.Y8G("ngForOf",s.listaVagas)}}function I(n,r){1&n&&(a.j41(0,"div")(1,"p",15),a.EFF(2,"N\xe3o h\xe1 nenhuma vaga publicada."),a.k0s()())}const T=[{path:"",component:(()=>{var n;class r{constructor(e,t,i,c,g,u,X,N,U,w,A){this.candidatoService=e,this.authService=t,this.vagaService=i,this.adminService=c,this.navController=g,this.empresaService=u,this.toastController=X,this.alertController=N,this.popoverController=U,this.representanteService=w,this.membroService=A,this.vagas=[],this.listaVagas=[...this.vagas],this.vagasRelacionadas=[],this.user={},this.userType={},this.isPopoverVagaOpen=!1,this.searchValue="",null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){this.getUser(),setTimeout(()=>{this.getVagas()},700)}getVagas(){var e=this;return(0,d.A)(function*(){const t=yield e.vagaService.getVagasPorConta(e.user.idconta);e.vagas=t.data,e.listaVagas=[...e.vagas],e.matchVagas(),e.sortVagas()})()}matchVagas(){this.listaVagas.filter(e=>{let t=0;null!=this.user.pcd&&e.pcd==this.user.pcd&&t++,null!=this.user.pretensaoSalarial&&e.salario>=this.user.pretensaoSalarial&&t++,null!=this.user.tipoVaga&&e.regime.toLowerCase()==this.user.tipoVaga.toLowerCase()&&(t+=2),this.user.areas&&this.user.areas.forEach(i=>{i.idArea==e.idArea.idArea&&(t+=2)}),e.matchPoint=t})}confirmarExclusao(){var e=this;return(0,d.A)(function*(){yield(yield e.alertController.create({header:"Confirma\xe7\xe3o",message:"Tem certeza que deseja excluir a vaga?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{e.isPopoverVagaOpen=!1}},{text:"Excluir",handler:()=>{e.isPopoverVagaOpen=!1,e.removerVaga()}}]})).present()})()}sortVagas(){this.listaVagas.sort((e,t)=>e.matchPoint<=t.matchPoint?1:-1)}search(){const e=this.searchValue.toLowerCase();this.listaVagas=this.vagas.filter(t=>t.titulo.toLowerCase().includes(e))}getUser(){var e=this;return(0,d.A)(function*(){const t=e.authService.getUser(),i=e.authService.getType();if(null!=t)switch(e.userType=null!=i?i:"",i){case"A":e.user=yield e.adminService.getAdministrador(t);break;case"E":e.user=yield e.empresaService.getEmpresa(t);break;case"M":e.user=yield e.membroService.getMembroEquipe(t);break;case"R":e.user=yield e.representanteService.getRepresentante(t)}})()}presentPopoverVaga(e,t){this.popoverVaga.event=e,this.isPopoverVagaOpen=!0,localStorage.setItem("idVaga",t)}verDetalhesVaga(){this.popoverController.dismiss(),this.navController.navigateForward("/vaga-detalhes")}editarVaga(){this.popoverController.dismiss(),this.navController.navigateRoot("/editar-vaga")}removerVaga(){var e=this;return(0,d.A)(function*(){var t,i;const c=null!==(t=e.authService.getJwt())&&void 0!==t?t:"",g=null!==(i=localStorage.getItem("idVaga"))&&void 0!==i?i:"",u=yield e.vagaService.delete(g,c);200==u.status&&(e.showMessage(u.data.message,"success"),e.getVagas()),e.popoverController.dismiss()})()}showMessage(e,t){var i=this;return(0,d.A)(function*(){(yield i.toastController.create({message:e,duration:1500,position:"top",color:t})).present()})()}}return(n=r).\u0275fac=function(e){return new(e||n)(a.rXU(V.X),a.rXU(f.u),a.rXU(M.T),a.rXU(P.r),a.rXU(C.q9),a.rXU(b.z),a.rXU(l.K_),a.rXU(l.hG),a.rXU(l.IE),a.rXU(_.m),a.rXU(j.S))},n.\u0275cmp=a.VBU({type:n,selectors:[["app-minhas-vagas"]],viewQuery:function(e,t){if(1&e&&a.GBs(k,5),2&e){let i;a.mGM(i=a.lsd())&&(t.popoverVaga=i.first)}},decls:13,vars:6,consts:[["popoverVaga",""],[3,"fullscreen"],[1,"web-padding"],["placeholder","T\xedtulo da vaga","show-clear-button","focus",1,"custom",3,"ionInput","ngModelChange","debounce","ngModel"],[1,"subtitle"],[3,"didDismiss","isOpen"],["class","vagas-grid",4,"ngIf"],[4,"ngIf"],[1,"ion-padding"],["expand","block",3,"click"],["color","danger","expand","block",3,"click"],[1,"vagas-grid"],["class","vaga-wrapper",3,"click",4,"ngFor","ngForOf"],[1,"vaga-wrapper",3,"click"],[3,"titulo","cidade","regime","salario","pcd","tipo","data","logo","empresa","ocultarNome"],[1,"subtitle","center"]],template:function(e,t){if(1&e){const i=a.RV6();a.j41(0,"ion-content",1),a.nrm(1,"app-nav"),a.j41(2,"div",2)(3,"ion-searchbar",3),a.bIt("ionInput",function(){return a.eBV(i),a.Njj(t.search())}),a.mxI("ngModelChange",function(g){return a.eBV(i),a.DH7(t.searchValue,g)||(t.searchValue=g),a.Njj(g)}),a.k0s(),a.j41(4,"h4",4),a.EFF(5,"Vagas criadas por voc\xea"),a.k0s(),a.j41(6,"p",4),a.EFF(7,"Clique em uma vaga para visualizar as op\xe7\xf5es"),a.k0s(),a.j41(8,"ion-popover",5,0),a.bIt("didDismiss",function(){return a.eBV(i),a.Njj(t.isPopoverVagaOpen=!1)}),a.DNE(10,S,7,0,"ng-template"),a.k0s(),a.DNE(11,O,2,1,"div",6)(12,I,3,0,"div",7),a.k0s()()}2&e&&(a.Y8G("fullscreen",!0),a.R7$(3),a.Y8G("debounce",500),a.R50("ngModel",t.searchValue),a.R7$(5),a.Y8G("isOpen",t.isPopoverVagaOpen),a.R7$(3),a.Y8G("ngIf",t.listaVagas.length>0),a.R7$(),a.Y8G("ngIf",0===t.listaVagas.length))},dependencies:[p.Sq,p.bT,h.BC,h.vS,l.Jm,l.W9,l.S1,l.CF,l.Gw,y.Z,x.P],styles:[".web-padding[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 15%;display:flex;justify-content:start;align-items:center;flex-direction:column}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}ion-searchbar.custom[_ngcontent-%COMP%]{--background: var(--ion-card-background);--border-radius: 10px;--padding-inline-start: 0px;margin-top:40px}ion-img[_ngcontent-%COMP%]{max-width:150px}ion-list[_ngcontent-%COMP%]{background-color:var(--ion-background-color)}ion-item[_ngcontent-%COMP%]{--background: var(--ion-background-color)}ion-label[_ngcontent-%COMP%]:hover{background-color:var(--ion-card-background)}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.popover[_ngcontent-%COMP%]{--background: var(--ion-card-background)}ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-pep);--box-shadow: none}ion-header[_ngcontent-%COMP%]{box-shadow:none}@media screen and (max-width: 600px){.web-padding[_ngcontent-%COMP%]{padding:0}.subtitle[_ngcontent-%COMP%]{font-size:18px}}.vagas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;width:100%;margin-top:20px;align-items:start}.vaga-wrapper[_ngcontent-%COMP%]{height:100%}"]}),r})()}];let F=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.$C({type:n}),n.\u0275inj=a.G2t({imports:[m.iI.forChild(T),m.iI]}),r})();var G=o(5553);let R=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.$C({type:n}),n.\u0275inj=a.G2t({imports:[p.MD,h.YN,l.bv,F,G.h]}),r})()}}]);