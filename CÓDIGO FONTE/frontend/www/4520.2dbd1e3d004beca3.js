"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4520],{4520:(k,g,s)=>{s.r(g),s.d(g,{AdministradorPerfilPageModule:()=>y});var f=s(177),u=s(4341),r=s(1075),h=s(8986),c=s(467),n=s(4438),p=s(3656),_=s(4796),P=s(5619),v=s(833);const A=["modal9"],b=["modal10"];function S(t,d){if(1&t){const i=n.RV6();n.j41(0,"ion-toolbar")(1,"ion-buttons",14)(2,"ion-button",15),n.bIt("click",function(){n.eBV(i);const o=n.XpG();return n.Njj(o.cancel())}),n.EFF(3,"Voltar"),n.k0s()(),n.j41(4,"ion-buttons",16)(5,"ion-button",17),n.bIt("click",function(){n.eBV(i);const o=n.XpG();return n.Njj(o.alterarAdministrador())}),n.EFF(6,"Enviar"),n.k0s()()(),n.j41(7,"ion-content",18),n.nrm(8,"br"),n.j41(9,"h2",5),n.EFF(10,"Informa\xe7\xf5es Gerais"),n.k0s(),n.j41(11,"ion-item")(12,"ion-input",19),n.mxI("ngModelChange",function(o){n.eBV(i);const a=n.XpG();return n.DH7(a.administradorAlterado.nome,o)||(a.administradorAlterado.nome=o),n.Njj(o)}),n.k0s()()()}if(2&t){const i=n.XpG();n.R7$(5),n.Y8G("strong",!0),n.R7$(7),n.R50("ngModel",i.administradorAlterado.nome)}}function M(t,d){if(1&t){const i=n.RV6();n.j41(0,"ion-toolbar")(1,"ion-buttons",14)(2,"ion-button",15),n.bIt("click",function(){n.eBV(i);const o=n.XpG();return n.Njj(o.cancelPassword())}),n.EFF(3,"Voltar"),n.k0s()(),n.j41(4,"ion-buttons",16)(5,"ion-button",17),n.bIt("click",function(){n.eBV(i);const o=n.XpG();return n.Njj(o.confirmPassword())}),n.EFF(6,"Enviar"),n.k0s()()(),n.j41(7,"ion-content",18),n.nrm(8,"br"),n.j41(9,"h2",5),n.EFF(10,"Alterar Senha"),n.k0s(),n.j41(11,"ion-item")(12,"ion-input",20),n.mxI("ngModelChange",function(o){n.eBV(i);const a=n.XpG();return n.DH7(a.novaSenha.senhaAtual,o)||(a.novaSenha.senhaAtual=o),n.Njj(o)}),n.nrm(13,"ion-input-password-toggle",21),n.k0s()(),n.j41(14,"ion-item")(15,"ion-input",22),n.mxI("ngModelChange",function(o){n.eBV(i);const a=n.XpG();return n.DH7(a.novaSenha.novaSenha,o)||(a.novaSenha.novaSenha=o),n.Njj(o)}),n.nrm(16,"ion-input-password-toggle",21),n.k0s()(),n.j41(17,"ion-item")(18,"ion-input",23),n.mxI("ngModelChange",function(o){n.eBV(i);const a=n.XpG();return n.DH7(a.novaSenha.confirmarSenha,o)||(a.novaSenha.confirmarSenha=o),n.Njj(o)}),n.nrm(19,"ion-input-password-toggle",21),n.k0s()()()}if(2&t){const i=n.XpG();n.R7$(5),n.Y8G("strong",!0),n.R7$(7),n.R50("ngModel",i.novaSenha.senhaAtual),n.R7$(3),n.R50("ngModel",i.novaSenha.novaSenha),n.R7$(3),n.R50("ngModel",i.novaSenha.confirmarSenha)}}const j=[{path:"",component:(()=>{var t;class d{constructor(e,o,a,m){this.toastController=e,this.authService=o,this.navController=a,this.adminService=m,this.user={},this.userType="",this.isLogged=!1,this.administrador={},this.administradorAlterado={},this.conta={},this.novaSenha={senhaAtual:"",novaSenha:"",confirmarSenha:""},this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.actionSheetButtons=[{text:"Prosseguir",role:"destructive",handler:()=>{this.deactivateAccount(this.conta.idConta)}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}],null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var e=this;return(0,c.A)(function*(){e.getUser(),e.conta=yield e.authService.getContaDetails(),console.log("Conta: ",e.conta),e.administrador=yield e.adminService.getAdministrador(e.userId),console.log("Administrador: ",e.administrador),e.administradorAlterado=Object.assign({},e.administrador)})()}confirm(){}cancel(){this.administradorAlterado=Object.assign({},this.administrador),this.modal9.dismiss(null,"cancel")}onWillDismissPassword(e){"confirm"===e.detail.role&&(this.message=`Hello, ${e.detail.data}!`)}cancelPassword(){this.modal10.dismiss(null,"cancel"),this.novaSenha.senhaAtual="",this.novaSenha.novaSenha="",this.novaSenha.confirmarSenha=""}confirmPassword(){this.updatePassword()}onWillDismiss(e){"confirm"===e.detail.role&&(this.message=`Hello, ${e.detail.data}!`)}exibirMensagem(e){var o=this;return(0,c.A)(function*(){(yield o.toastController.create({message:e,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var e=this;return(0,c.A)(function*(){e.userId=e.authService.getUser();const o=e.authService.getType();null==e.userId?e.isLogged=!1:("A"===(e.userType=null!=o?o:"",o)&&(e.user=yield e.adminService.getAdministrador(e.userId),console.log(e.user)),e.isLogged=!0)})()}updatePassword(){var e=this;return(0,c.A)(function*(){try{e.novaSenha.novaSenha.length<4?e.exibirMensagem("Nova senha deve ter no m\xednimo 4 caracteres"):e.novaSenha.novaSenha!=e.novaSenha.confirmarSenha?e.exibirMensagem("A nova senha e sua confirma\xe7\xe3o n\xe3o coincidem"):200===(yield e.authService.updatePassword(e.conta.idConta,e.novaSenha.senhaAtual,e.novaSenha.novaSenha,e.novaSenha.confirmarSenha)).status?(e.exibirMensagem("Senha atualizada com sucesso!"),e.modal10.dismiss(null,"confirm"),e.novaSenha.senhaAtual="",e.novaSenha.novaSenha="",e.novaSenha.confirmarSenha=""):e.exibirMensagem("Senha Atual incorreta")}catch(o){console.error("Erro ao atualizar a senha:",o),e.exibirMensagem("Senha Atual incorreta")}})()}deactivateAccount(e){var o=this;return(0,c.A)(function*(){try{yield o.authService.deleteAccount(e),console.log("Conta exclu\xedda com sucesso!"),o.logout()}catch(a){console.error("Erro ao excluir conta:",a)}})()}alterarAdministrador(){var e=this;return(0,c.A)(function*(){if(0==e.administradorAlterado.nome.length)e.exibirMensagem("Informe o novo nome para o administrador");else try{200==(yield e.adminService.alterar(e.userId,e.administradorAlterado.nome)).status?(e.modal9.dismiss(e.administradorAlterado.nome,"confirm"),e.ngOnInit(),e.exibirMensagem("Administrador alterado com sucesso!")):e.exibirMensagem("Erro interno no servidor")}catch(o){console.error(o)}})()}}return(t=d).\u0275fac=function(e){return new(e||t)(n.rXU(r.K_),n.rXU(_.u),n.rXU(p.q9),n.rXU(P.r))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-administrador-perfil"]],viewQuery:function(e,o){if(1&e&&(n.GBs(A,7),n.GBs(b,7)),2&e){let a;n.mGM(a=n.lsd())&&(o.modal9=a.first),n.mGM(a=n.lsd())&&(o.modal10=a.first)}},decls:37,vars:2,consts:[["modal9",""],["modal10",""],["id","main-content"],[1,"content"],[1,"container"],[2,"text-align","center"],["label","Email","labelPlacement","floating","readonly","",3,"ngModelChange","ngModel"],["type","password","label","Senha","labelPlacement","floating","value","...................","readonly",""],["readonly","","label","Nome","labelPlacement","floating","placeholder","Nome do Administrador n\xe3o informado","maxlength","60",3,"ngModelChange","ngModel"],["size","6"],["id","open-modal9","expand","block",1,"butao"],["id","open-modal10","expand","block",1,"butao"],["trigger","open-modal9",3,"willDismiss"],["trigger","open-modal10",3,"willDismiss"],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome",3,"ngModelChange","ngModel"],["type","password","label","Senha atual","labelPlacement","floating",3,"ngModelChange","ngModel"],["slot","end","color","success"],["type","password","label","Senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Confirmar senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"]],template:function(e,o){if(1&e){const a=n.RV6();n.j41(0,"ion-content",2),n.nrm(1,"app-nav"),n.j41(2,"div",3)(3,"div",4)(4,"ion-card")(5,"ion-card-content")(6,"h1",5),n.EFF(7,"Perfil do Administrador"),n.k0s(),n.nrm(8,"br")(9,"br"),n.j41(10,"h1",5),n.EFF(11,"Informa\xe7\xf5es da Conta"),n.k0s(),n.nrm(12,"br"),n.j41(13,"ion-item")(14,"ion-input",6),n.mxI("ngModelChange",function(l){return n.eBV(a),n.DH7(o.conta.email,l)||(o.conta.email=l),n.Njj(l)}),n.k0s()(),n.j41(15,"ion-item"),n.nrm(16,"ion-input",7),n.k0s(),n.nrm(17,"br"),n.j41(18,"h1",5),n.EFF(19,"Informa\xe7\xf5es Gerais"),n.k0s(),n.nrm(20,"br"),n.j41(21,"ion-item")(22,"ion-input",8),n.mxI("ngModelChange",function(l){return n.eBV(a),n.DH7(o.administrador.nome,l)||(o.administrador.nome=l),n.Njj(l)}),n.k0s()(),n.nrm(23,"br"),n.j41(24,"ion-row")(25,"ion-col",9)(26,"ion-button",10),n.EFF(27," Alterar Informa\xe7\xf5es "),n.k0s()(),n.j41(28,"ion-col",9)(29,"ion-button",11),n.EFF(30,"Alterar Senha"),n.k0s()()(),n.j41(31,"ion-modal",12,0),n.bIt("willDismiss",function(l){return n.eBV(a),n.Njj(o.onWillDismiss(l))}),n.DNE(33,S,13,2,"ng-template"),n.k0s(),n.j41(34,"ion-modal",13,1),n.bIt("willDismiss",function(l){return n.eBV(a),n.Njj(o.onWillDismissPassword(l))}),n.DNE(36,M,20,4,"ng-template"),n.k0s()()()()()()}2&e&&(n.R7$(14),n.R50("ngModel",o.conta.email),n.R7$(8),n.R50("ngModel",o.administrador.nome))},dependencies:[u.BC,u.tU,u.vS,r.Jm,r.QW,r.b_,r.I9,r.hU,r.W9,r.$w,r.Wv,r.uz,r.ln,r.ai,r.Sb,r.Gw,v.P],styles:[".butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.logo-img[_ngcontent-%COMP%]{max-width:150px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),d})()}];let C=(()=>{var t;class d{}return(t=d).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[h.iI.forChild(j),h.iI]}),d})();var x=s(5553);let y=(()=>{var t;class d{}return(t=d).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[f.MD,u.YN,r.bv,C,x.h]}),d})()}}]);