"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8654],{8654:(T,m,o)=>{o.r(m),o.d(m,{CadastroRepresentantePageModule:()=>x});var u=o(177),c=o(4341),s=o(1075),p=o(8986),g=o(467),h=o(510),e=o(4438),C=o(3656),v=o(4796),f=o(2078),R=o(6857),M=o(5619),P=o(858),b=o(833);const y=[{path:"",component:(()=>{var t;class l{constructor(n,a,i,r,E,F,k){this.toastController=n,this.authService=a,this.navController=i,this.representanteService=r,this.candidatoService=E,this.adminService=F,this.empresaService=k,this.user={},this.userType="",this.isLogged=!1,this.isDarkTheme=!1,this.novoRepresentante={nome:"",empresa:""},this.novaConta={email:"",senha:"",confirmarSenha:""},null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var n=this;return(0,g.A)(function*(){n.getUser(),n.novoRepresentante.empresa=n.userId})()}onSubmit(){var n=this;return(0,g.A)(function*(){if(0==n.novoRepresentante.nome.length)n.exibirMensagem("Informe o nome do membro da equipe");else if(0==n.novaConta.email.length)n.exibirMensagem("Informe o e-mail da conta");else if(n.novaConta.senha.length<4)n.exibirMensagem("A senha deve ter no m\xedmino 4 caracteres");else if(n.novaConta.senha!=n.novaConta.confirmarSenha)n.exibirMensagem("As senhas n\xe3o colidem");else try{const a=yield n.authService.createAccount(n.novaConta.email,n.novaConta.senha,h.R.REPRESENTANTE);201==a.status?201==(yield n.representanteService.cadastrarRepresentante(a.data.idConta,n.novoRepresentante.nome,n.novoRepresentante.empresa)).status?(n.exibirMensagem("Representante "+n.novoRepresentante.nome+" cadastrado com sucesso!"),n.novoRepresentante.nome="",n.novoRepresentante.empresa="",n.novaConta.email="",n.novaConta.senha="",n.novaConta.confirmarSenha="",n.ngOnInit()):(n.exibirMensagem("Erro interno no servidor"),console.error("Erro ao criar conta")):console.log("Erro ao criar conta.")}catch(a){console.log(a)}})()}cancelar(){this.navController.navigateForward("empresa-representantes")}exibirMensagem(n){var a=this;return(0,g.A)(function*(){(yield a.toastController.create({message:n,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var n=this;return(0,g.A)(function*(){n.userId=n.authService.getUser();const a=n.authService.getType();if(null==n.userId)n.isLogged=!1;else{switch(n.userType=null!=a?a:"",a){case"A":n.user=yield n.adminService.getAdministrador(n.userId),console.log(n.user);break;case"C":n.user=yield n.candidatoService.getCandidato(n.userId);break;case"E":n.user=yield n.empresaService.getEmpresa(n.userId)}n.isLogged=!0}})()}}return(t=l).\u0275fac=function(n){return new(n||t)(e.rXU(s.K_),e.rXU(v.u),e.rXU(C.q9),e.rXU(f.m),e.rXU(R.X),e.rXU(M.r),e.rXU(P.z))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-cadastro-representante"]],decls:32,vars:4,consts:[["id","main-content"],[1,"content"],[1,"container"],[1,"title"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome do Representante","maxlength","60",3,"ngModelChange","ngModel"],["label","E-mail","labelPlacement","floating","placeholder","Informe o email da conta","maxlength","50","type","email",3,"ngModelChange","ngModel"],["label","Senha","labelPlacement","floating","placeholder","Informe a senha da conta","type","password",3,"ngModelChange","ngModel"],["label","Confirmar senha","labelPlacement","floating","placeholder","Confirme a senha digitada acima","type","password",3,"ngModelChange","ngModel"],["size","6"],["expand","block",1,"butao",3,"click"],["color","danger","fill","outline","expand","block",1,"botao-cancelar",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"ion-content",0),e.nrm(1,"app-nav"),e.j41(2,"div",1)(3,"div",2)(4,"ion-card")(5,"ion-card-header")(6,"h2",3),e.EFF(7,"Cadastro de Representante"),e.k0s()(),e.j41(8,"ion-card-content")(9,"h1",3),e.EFF(10,"Informa\xe7\xf5es do Representante"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-item")(13,"ion-input",4),e.mxI("ngModelChange",function(r){return e.DH7(a.novoRepresentante.nome,r)||(a.novoRepresentante.nome=r),r}),e.k0s()(),e.nrm(14,"br"),e.j41(15,"h1",3),e.EFF(16,"Informa\xe7\xf5es da Conta"),e.k0s(),e.nrm(17,"br"),e.j41(18,"ion-item")(19,"ion-input",5),e.mxI("ngModelChange",function(r){return e.DH7(a.novaConta.email,r)||(a.novaConta.email=r),r}),e.k0s()(),e.j41(20,"ion-item")(21,"ion-input",6),e.mxI("ngModelChange",function(r){return e.DH7(a.novaConta.senha,r)||(a.novaConta.senha=r),r}),e.k0s()(),e.j41(22,"ion-item")(23,"ion-input",7),e.mxI("ngModelChange",function(r){return e.DH7(a.novaConta.confirmarSenha,r)||(a.novaConta.confirmarSenha=r),r}),e.k0s()(),e.nrm(24,"br"),e.j41(25,"ion-row")(26,"ion-col",8)(27,"ion-button",9),e.bIt("click",function(){return a.onSubmit()}),e.EFF(28," Cadastrar Representante "),e.k0s()(),e.j41(29,"ion-col",8)(30,"ion-button",10),e.bIt("click",function(){return a.cancelar()}),e.EFF(31," Cancelar "),e.k0s()()()()()()()()),2&n&&(e.R7$(13),e.R50("ngModel",a.novoRepresentante.nome),e.R7$(6),e.R50("ngModel",a.novaConta.email),e.R7$(2),e.R50("ngModel",a.novaConta.senha),e.R7$(2),e.R50("ngModel",a.novaConta.confirmarSenha))},dependencies:[c.BC,c.tU,c.vS,s.Jm,s.b_,s.I9,s.ME,s.hU,s.W9,s.$w,s.uz,s.ln,s.Gw,b.P],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:30px}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{scale:90%}.botao-cancelar[_ngcontent-%COMP%]{border-radius:4px}.butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}"]}),l})()}];let S=(()=>{var t;class l{}return(t=l).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(y),p.iI]}),l})();var I=o(5553);let x=(()=>{var t;class l{}return(t=l).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[u.MD,c.YN,s.bv,S,I.h]}),l})()}}]);