"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5580],{5580:(w,h,s)=>{s.r(h),s.d(h,{TelaAdministradorPageModule:()=>j});var p=s(177),d=s(4341),r=s(1075),g=s(8986),c=s(467),t=s(4438),f=s(4796),b=s(3656),P=s(5619),v=s(833);const _=["modal1"],x=()=>["/cadastro-administrador"],k=()=>["/home"];function A(i,l){if(1&i){const a=t.RV6();t.j41(0,"tr",13),t.bIt("click",function(){const n=t.eBV(a).$implicit,o=t.XpG();return t.Njj(o.onRowClick(n.idconta))}),t.j41(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s()()}if(2&i){const a=l.$implicit,e=t.XpG();t.AVh("selected",a.idconta===e.selectedIdconta),t.R7$(2),t.JRh(a.nome),t.R7$(2),t.JRh(a.email)}}function C(i,l){if(1&i){const a=t.RV6();t.j41(0,"ion-toolbar")(1,"ion-buttons",14)(2,"ion-button",13),t.bIt("click",function(){t.eBV(a);const n=t.XpG();return t.Njj(n.cancelar())}),t.EFF(3,"Voltar"),t.k0s()(),t.j41(4,"ion-title"),t.EFF(5," Alterar Administrador"),t.k0s(),t.j41(6,"ion-buttons",15)(7,"ion-button",16),t.bIt("click",function(){t.eBV(a);const n=t.XpG();return t.Njj(n.enviarAlteracao())}),t.EFF(8,"Enviar"),t.k0s()()(),t.j41(9,"ion-content",17)(10,"form",18)(11,"ion-item"),t.nrm(12,"ion-input",19),t.k0s()()()}if(2&i){const a=t.XpG();t.R7$(7),t.Y8G("strong",!0),t.R7$(3),t.Y8G("formGroup",a.adm)}}const M=[{path:"",component:(()=>{var i;class l{constructor(e,n,o,m,u,O,F){this.authService=e,this.navigationController=n,this.toastController=o,this.adminService=m,this.formBuilder=u,this.cdr=O,this.alertController=F,this.login={},this.isDarkTheme=!1,this.userType="",this.isLogged=!1,this.id="",this.admins=[],this.selectedIdconta=null,this.currentPage=1,this.itemsPerPage=10,this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",null==this.authService.getJwt()&&this.navigationController.navigateRoot("login"),this.adm=this.formBuilder.group({nome:[null]})}ngOnInit(){this.checkTheme(),this.getUser(),this.getAdmins(),this.authService.getJwt()?this.isLogged=!0:this.navigationController.navigateRoot("/home")}onWillDismiss(e){"confirm"===e.detail.role&&(this.message=`Hello, ${e.detail.data}!`)}getAdmins(){var e=this;return(0,c.A)(function*(){e.admins=yield e.adminService.getAdministradores();for(const n of e.admins)try{const o=yield e.authService.getContaDetails(!0,n.idconta);n.email=o.email}catch(o){console.error(`Erro ao buscar detalhes da conta para admin ${n.idconta}:`,o),n.email="Indispon\xedvel"}e.cdr.detectChanges()})()}getUser(){var e=this;return(0,c.A)(function*(){const n=e.authService.getUser(),o=e.authService.getType();null==n?e.isLogged=!1:("A"===(e.isLogged=!0,e.userType=null!=o?o:"",o)?e.admin=yield e.adminService.getAdministrador(n):e.navigationController.navigateRoot("/home"),e.isLogged=!0)})()}onRowClick(e){this.selectedIdconta=e}validateAndOpenModal(){var e=this;return(0,c.A)(function*(){null!==e.selectedIdconta?e.modal.present():(yield e.toastController.create({message:"Selecione um administrador para poder alterar.",duration:2e3,position:"bottom"})).present()})()}cancelar(){var e=this;return(0,c.A)(function*(){e.modal.dismiss(null,"cancel")})()}get paginatedListaTipo(){const e=(this.currentPage-1)*this.itemsPerPage;return this.admins.slice(e,e+this.itemsPerPage)}nextPage(){this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}confirmarExclusao(){var e=this;return(0,c.A)(function*(){null!=e.selectedIdconta?yield(yield e.alertController.create({header:"Confirma\xe7\xe3o",message:"Tem certeza de que deseja excluir este administrador?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",handler:()=>{e.excluirAdministrador()}}]})).present():e.showMessage("Selecione um administrador para excluir","warning")})()}excluirAdministrador(){var e=this;return(0,c.A)(function*(){if(null==e.selectedIdconta)return;let n=String(e.selectedIdconta);if(n!=e.admin.idconta)try{yield e.adminService.excluir(n),yield e.getAdmins(),e.cdr.detectChanges(),e.showMessage("Administrador exclu\xeddo com sucesso!","success"),e.selectedIdconta=null}catch(o){console.error("Erro ao excluir administrador:",o),e.showMessage("Erro ao excluir administrador. Tente novamente.","danger")}else e.showMessage("Voc\xea n\xe3o pode se excluir","danger")})()}enviarAlteracao(){var e=this;return(0,c.A)(function*(){if(e.adm&&null==e.adm.value.nome)(yield e.toastController.create({message:"O novo nome tem que ser informado para realizar a altera\xe7\xe3o",duration:2e3,position:"bottom",cssClass:"custom-dark-toast"})).present();else if(null!==e.selectedIdconta){let n=String(e.selectedIdconta);try{yield e.adminService.alterar(n,e.adm.value.nome),e.modal.dismiss(null,"cancel"),yield e.getAdmins(),e.ngOnInit(),e.showMessage("Administrador alterado com sucesso!")}catch{e.showMessage("Erro ao alterar administrador.","danger")}}})()}ionViewWillEnter(){this.getAdmins()}showMessage(e,n="dark"){var o=this;return(0,c.A)(function*(){(yield o.toastController.create({message:e,duration:2e3,position:"top",cssClass:"custom-dark-toast"})).present()})()}checkTheme(){"dark"==localStorage.getItem("theme")?document.body.setAttribute("color-scheme","dark"):document.body.setAttribute("color-scheme","light")}}return(i=l).\u0275fac=function(e){return new(e||i)(t.rXU(f.u),t.rXU(b.q9),t.rXU(r.K_),t.rXU(P.r),t.rXU(d.ok),t.rXU(t.gRc),t.rXU(r.hG))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-tela-administrador"]],viewQuery:function(e,n){if(1&e&&t.GBs(_,7),2&e){let o;t.mGM(o=t.lsd())&&(n.modal=o.first)}},decls:43,vars:8,consts:[["modal1",""],[3,"fullscreen"],[1,"web-padding","content"],[1,"container"],[1,"title"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click","disabled"],["size","3"],["expand","block",1,"teste",3,"routerLink"],["expand","block",1,"teste",3,"click"],["color","danger","expand","block","type","button",1,"teste",3,"click"],["color","light","expand","block",1,"teste",3,"routerLink"],[3,"willDismiss"],[3,"click"],["slot","start"],["slot","end"],["type","button",3,"click","strong"],[1,"ion-padding"],[3,"formGroup"],["formControlName","nome","label","Nome","labelPlacement","floating","placeholder","Informe o novo nome para o Administrador"]],template:function(e,n){if(1&e){const o=t.RV6();t.j41(0,"ion-content",1),t.nrm(1,"app-nav"),t.j41(2,"div",2)(3,"div",3)(4,"ion-card")(5,"ion-card-header")(6,"h1",4),t.EFF(7," Listar Administradores "),t.k0s()(),t.j41(8,"ion-card-content")(9,"ion-grid")(10,"ion-row")(11,"ion-col")(12,"table")(13,"thead")(14,"tr")(15,"th"),t.EFF(16,"Nome"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Email"),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,A,5,4,"tr",5),t.k0s()()(),t.nrm(21,"ion-row"),t.k0s(),t.j41(22,"ion-col")(23,"ion-button",6),t.bIt("click",function(){return t.eBV(o),t.Njj(n.previousPage())}),t.EFF(24,"Anterior"),t.k0s(),t.j41(25,"ion-button",6),t.bIt("click",function(){return t.eBV(o),t.Njj(n.nextPage())}),t.EFF(26,"Pr\xf3ximo"),t.k0s()()()()(),t.j41(27,"ion-row")(28,"ion-col",7)(29,"ion-button",8),t.EFF(30,"Cadastrar"),t.k0s()(),t.j41(31,"ion-col",7)(32,"ion-button",9),t.bIt("click",function(){return t.eBV(o),t.Njj(n.validateAndOpenModal())}),t.EFF(33,"Alterar"),t.k0s()(),t.j41(34,"ion-col",7)(35,"ion-button",10),t.bIt("click",function(){return t.eBV(o),t.Njj(n.confirmarExclusao())}),t.EFF(36,"Excluir"),t.k0s()(),t.j41(37,"ion-col",7)(38,"ion-button",11),t.EFF(39,"Voltar"),t.k0s()()()()(),t.j41(40,"ion-modal",12,0),t.bIt("willDismiss",function(u){return t.eBV(o),t.Njj(n.onWillDismiss(u))}),t.DNE(42,C,13,2,"ng-template"),t.k0s()()}2&e&&(t.Y8G("fullscreen",!0),t.R7$(20),t.Y8G("ngForOf",n.admins),t.R7$(3),t.Y8G("disabled",1===n.currentPage),t.R7$(2),t.Y8G("disabled",n.currentPage*n.itemsPerPage>=n.admins.length),t.R7$(4),t.Y8G("routerLink",t.lJ4(6,x)),t.R7$(9),t.Y8G("routerLink",t.lJ4(7,k)))},dependencies:[p.Sq,d.qT,d.BC,d.cb,r.Jm,r.QW,r.b_,r.I9,r.ME,r.hU,r.W9,r.lO,r.$w,r.uz,r.ln,r.BC,r.ai,r.Sb,r.Gw,r.N7,g.Wk,v.P,d.j4,d.JD],styles:["a[_ngcontent-%COMP%]{color:var(--ion-color-pep);text-decoration:none}p[_ngcontent-%COMP%]{color:gray}.form[_ngcontent-%COMP%]{padding:35px;background-color:var(--ion-color-white);display:flex;flex-direction:column;justify-content:center;width:90%;max-width:400px;height:500px;border:1px solid var(--ion-border-color);border-radius:20px;box-shadow:2px 2px 20px 1px #0003}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-button.login[_ngcontent-%COMP%]{--background: var(--ion-color-pep);--padding-top: 18px;--padding-bottom: 18px}ion-content[_ngcontent-%COMP%]{height:100vh;display:flex}ion-title[_ngcontent-%COMP%]{text-align:center}ion-img[_ngcontent-%COMP%]{width:220px}.divider[_ngcontent-%COMP%]{border-top:1px solid #bbb}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:500;margin:0}.forgot[_ngcontent-%COMP%]{text-align:end;margin-bottom:10px}.full[_ngcontent-%COMP%]{height:100vh}.web-padding[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 5%;display:flex;flex-direction:column}.linhas-tabela[_ngcontent-%COMP%]{margin-bottom:10px;align-items:center}ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-pep);--box-shadow: none}.botao[_ngcontent-%COMP%]{font-size:10px}.b-excluir[_ngcontent-%COMP%]{--background: #FF5959;--box-shadow: none}.header-row[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}.linhas-tabela[_ngcontent-%COMP%]{margin-bottom:10px}.button-col[_ngcontent-%COMP%]{display:flex}.input-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:15px}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f8f8f8;font-weight:700}tr.selected[_ngcontent-%COMP%]{background-color:#d1e7dd}"]}),l})()}];let T=(()=>{var i;class l{}return(i=l).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[g.iI.forChild(M),g.iI]}),l})();var y=s(5553);let j=(()=>{var i;class l{}return(i=l).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[p.MD,d.YN,r.bv,T,y.h,d.X1]}),l})()}}]);