"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9498],{9498:(I,f,s)=>{s.r(f),s.d(f,{EquipePerfilPageModule:()=>A});var P=s(177),p=s(4341),r=s(1075),v=s(8986),g=s(467),e=s(4438),b=s(3656),_=s(4796),M=s(8516),E=s(5619),S=s(833);const j=["modal5"],q=["modal6"];function x(t,c){if(1&t){const i=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",16)(2,"ion-button",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",18)(7,"ion-button",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.alterarEquipe())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",20),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Informa\xe7\xf5es Gerais"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",21),e.mxI("ngModelChange",function(o){e.eBV(i);const a=e.XpG();return e.DH7(a.equipeAlterado.nome,o)||(a.equipeAlterado.nome=o),e.Njj(o)}),e.k0s()()()}if(2&t){const i=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",i.equipeAlterado.nome)}}function C(t,c){if(1&t){const i=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",16)(2,"ion-button",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.cancelPassword())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",18)(7,"ion-button",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.confirmPassword())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",20),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Alterar Senha"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",22),e.mxI("ngModelChange",function(o){e.eBV(i);const a=e.XpG();return e.DH7(a.novaSenha.senhaAtual,o)||(a.novaSenha.senhaAtual=o),e.Njj(o)}),e.nrm(15,"ion-input-password-toggle",23),e.k0s()(),e.j41(16,"ion-item")(17,"ion-input",24),e.mxI("ngModelChange",function(o){e.eBV(i);const a=e.XpG();return e.DH7(a.novaSenha.novaSenha,o)||(a.novaSenha.novaSenha=o),e.Njj(o)}),e.nrm(18,"ion-input-password-toggle",23),e.k0s()(),e.j41(19,"ion-item")(20,"ion-input",25),e.mxI("ngModelChange",function(o){e.eBV(i);const a=e.XpG();return e.DH7(a.novaSenha.confirmarSenha,o)||(a.novaSenha.confirmarSenha=o),e.Njj(o)}),e.nrm(21,"ion-input-password-toggle",23),e.k0s()()()}if(2&t){const i=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",i.novaSenha.senhaAtual),e.R7$(3),e.R50("ngModel",i.novaSenha.novaSenha),e.R7$(3),e.R50("ngModel",i.novaSenha.confirmarSenha)}}const y=[{path:"",component:(()=>{var t;class c{constructor(n,o,a,u,l){this.toastController=n,this.authService=o,this.navController=a,this.equipeService=u,this.adminService=l,this.user={},this.userType="",this.isLogged=!1,this.equipe={},this.equipeAlterado={},this.conta={},this.novaSenha={senhaAtual:"",novaSenha:"",confirmarSenha:""},this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.actionSheetButtons=[{text:"Prosseguir",role:"destructive",handler:()=>{this.deactivateAccount(this.conta.idConta)}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}],null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var n=this;return(0,g.A)(function*(){n.getUser(),n.conta=yield n.authService.getContaDetails(),n.equipe=yield n.equipeService.getMembroEquipe(n.userId),n.equipeAlterado=Object.assign({},n.equipe)})()}confirm(){}cancel(){this.equipeAlterado=Object.assign({},this.equipe),this.modal5.dismiss(null,"cancel")}onWillDismissPassword(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}cancelPassword(){this.modal6.dismiss(null,"cancel"),this.novaSenha.senhaAtual="",this.novaSenha.novaSenha="",this.novaSenha.confirmarSenha=""}confirmPassword(){this.updatePassword()}onWillDismiss(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}exibirMensagem(n){var o=this;return(0,g.A)(function*(){(yield o.toastController.create({message:n,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var n=this;return(0,g.A)(function*(){n.userId=n.authService.getUser();const o=n.authService.getType();if(null==n.userId)n.isLogged=!1;else{switch(n.userType=null!=o?o:"",o){case"A":n.user=yield n.adminService.getAdministrador(n.userId);break;case"C":case"M":case"R":case"L":break;case"E":n.user=yield n.equipeService.getMembroEquipe(n.userId)}n.isLogged=!0}})()}updatePassword(){var n=this;return(0,g.A)(function*(){try{n.novaSenha.novaSenha.length<4?n.exibirMensagem("Nova senha deve ter no m\xednimo 4 caracteres."):n.novaSenha.novaSenha!=n.novaSenha.confirmarSenha?n.exibirMensagem("A nova senha e sua confirma\xe7\xe3o n\xe3o coincidem."):200===(yield n.authService.updatePassword(n.conta.idConta,n.novaSenha.senhaAtual,n.novaSenha.novaSenha,n.novaSenha.confirmarSenha)).status?(n.exibirMensagem("Senha atualizada com sucesso!"),n.modal6.dismiss(null,"confirm"),n.novaSenha.senhaAtual="",n.novaSenha.novaSenha="",n.novaSenha.confirmarSenha=""):n.exibirMensagem("Senha Atual incorreta")}catch(o){console.error("Erro ao atualizar a senha:",o),n.exibirMensagem("Senha Atual incorreta")}})()}deactivateAccount(n){var o=this;return(0,g.A)(function*(){try{var a;const d=yield o.equipeService.desativarMembro(n),h=(null==d?void 0:d.message)||(null==d||null===(a=d.data)||void 0===a?void 0:a.message);if(h)if("Membro de equipe desativado com sucesso!"===h){var u;const m=yield o.authService.deleteAccount(n);var l;null!=m&&null!==(u=m.data)&&void 0!==u&&u.message?(yield o.exibirMensagem("Conta desativada com sucesso!"),o.logout()):(console.error("Erro ao desativar a conta. Resposta da API de conta:",m),o.exibirMensagem((null==m||null===(l=m.data)||void 0===l?void 0:l.message)||"Erro ao desativar a conta. Tente novamente mais tarde."))}else console.error("Erro ao desativar :",h),o.exibirMensagem(h);else console.error("Resposta inv\xe1lida ou sem mensagem da API de representante."),o.exibirMensagem("Erro ao desativar . Tente novamente mais tarde.")}catch(d){console.error("Erro ao desativar :",d),o.exibirMensagem("Ocorreu um erro ao tentar desativar . Tente novamente.")}})()}alterarEquipe(){var n=this;return(0,g.A)(function*(){if(0==n.equipeAlterado.nome.length)n.exibirMensagem("Informe o novo nome para o representante");else try{200==(yield n.equipeService.alterarMembroEquipe(n.userId,n.equipeAlterado.nome)).status?(n.modal5.dismiss(n.equipeAlterado.nome,"confirm"),n.ngOnInit(),n.exibirMensagem("Membro da Equipe alterado com sucesso!")):n.exibirMensagem("Erro interno no servidor")}catch(o){console.error(o)}})()}}return(t=c).\u0275fac=function(n){return new(n||t)(e.rXU(r.K_),e.rXU(_.u),e.rXU(b.q9),e.rXU(M.S),e.rXU(E.r))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-equipe-perfil"]],viewQuery:function(n,o){if(1&n&&(e.GBs(j,7),e.GBs(q,7)),2&n){let a;e.mGM(a=e.lsd())&&(o.modal5=a.first),e.mGM(a=e.lsd())&&(o.modal6=a.first)}},decls:38,vars:3,consts:[["modal5",""],["modal6",""],["id","main-content"],[1,"content"],[1,"container"],[2,"text-align","center"],["label","Email","labelPlacement","floating","readonly","",3,"ngModelChange","ngModel"],["id","open-modal6","expand","block",1,"butao"],[1,"title"],["readonly","","label","Nome","labelPlacement","floating","placeholder","Informe o nome do Membro da Equipe","maxlength","60",3,"ngModelChange","ngModel"],["size","6"],["id","open-modal5","expand","block",1,"butao"],["id","open-action-sheet","color","danger","expand","block",1,"botao-cancelar"],["trigger","open-action-sheet","header","Tem certeza que deseja excluir sua conta?",3,"buttons"],["trigger","open-modal5",3,"willDismiss"],["trigger","open-modal6",3,"willDismiss"],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome",3,"ngModelChange","ngModel"],["type","password","label","Senha atual","labelPlacement","floating",3,"ngModelChange","ngModel"],["slot","end","color","success"],["type","password","label","Senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Confirmar senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"]],template:function(n,o){if(1&n){const a=e.RV6();e.j41(0,"ion-content",2),e.nrm(1,"app-nav"),e.j41(2,"div",3)(3,"div",4)(4,"ion-card")(5,"ion-card-content")(6,"h1",5),e.EFF(7,"Perfil do Membro da Equipe"),e.k0s(),e.nrm(8,"br"),e.j41(9,"h1",5),e.EFF(10,"Informa\xe7\xf5es da Conta"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-item")(13,"ion-input",6),e.mxI("ngModelChange",function(l){return e.eBV(a),e.DH7(o.conta.email,l)||(o.conta.email=l),e.Njj(l)}),e.k0s()(),e.j41(14,"ion-row")(15,"ion-col")(16,"ion-button",7),e.EFF(17,"Alterar Senha"),e.k0s()()(),e.j41(18,"h1",8),e.EFF(19,"Informa\xe7\xf5es Gerais"),e.k0s(),e.nrm(20,"br"),e.j41(21,"ion-item")(22,"ion-input",9),e.mxI("ngModelChange",function(l){return e.eBV(a),e.DH7(o.equipe.nome,l)||(o.equipe.nome=l),e.Njj(l)}),e.k0s()(),e.nrm(23,"br"),e.j41(24,"ion-row")(25,"ion-col",10)(26,"ion-button",11),e.EFF(27," Alterar Informa\xe7\xf5es "),e.k0s()(),e.j41(28,"ion-col",10)(29,"ion-button",12),e.EFF(30," Excluir Conta "),e.k0s(),e.nrm(31,"ion-action-sheet",13),e.k0s()(),e.j41(32,"ion-modal",14,0),e.bIt("willDismiss",function(l){return e.eBV(a),e.Njj(o.onWillDismiss(l))}),e.DNE(34,x,15,2,"ng-template"),e.k0s(),e.j41(35,"ion-modal",15,1),e.bIt("willDismiss",function(l){return e.eBV(a),e.Njj(o.onWillDismissPassword(l))}),e.DNE(37,C,22,4,"ng-template"),e.k0s()()()()()()}2&n&&(e.R7$(13),e.R50("ngModel",o.conta.email),e.R7$(9),e.R50("ngModel",o.equipe.nome),e.R7$(9),e.Y8G("buttons",o.actionSheetButtons))},dependencies:[p.BC,p.tU,p.vS,r.wC,r.Jm,r.QW,r.b_,r.I9,r.hU,r.W9,r.$w,r.Wv,r.uz,r.ln,r.BC,r.ai,r.Sb,r.Gw,S.P],styles:[".butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.logo-img[_ngcontent-%COMP%]{max-width:150px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),c})()}];let k=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[v.iI.forChild(y),v.iI]}),c})();var F=s(5553);let A=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[P.MD,p.YN,r.bv,k,F.h]}),c})()}}]);