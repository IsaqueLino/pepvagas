"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6235],{6235:(G,E,s)=>{s.r(E),s.d(E,{ProfissionalLiberalCadastroPageModule:()=>_});var C=s(177),l=s(4341),a=s(1075),S=s(1208),P=s(8986),f=s(467),o=s(4438),y=s(4796),F=s(3656),I=s(3045),M=s(7700),j=s(833);const O=()=>["/login"];function L(i,c){1&i&&(o.j41(0,"ion-note",21),o.EFF(1," Por favor, insira um e-mail v\xe1lido (exemplo: usuario@dominio.com) "),o.k0s())}function x(i,c){if(1&i&&(o.j41(0,"ion-select-option",22),o.EFF(1),o.k0s()),2&i){const d=c.$implicit;o.Y8G("value",d.id),o.R7$(),o.JRh(d.nome)}}const N=[{path:"",component:(()=>{var i;class c{constructor(e,t,n,u,r,m,h){this.formBuilder=e,this.authService=t,this.navController=n,this.toastController=u,this.profissionalService=r,this.tipoService=m,this.alertController=h,this.selectedFile=null,this.opcoes=[],this.isDarkTheme=!1,this.isLogged=!1,this.email="",this.senha="",this.emailInvalid=!1,this.maskPredicate=function(){var k=(0,f.A)(function*(b){return b.getInputElement()});return function(b){return k.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.obrigatorio=this.formBuilder.group({nome:[null,l.k0.required],nomeSocial:[null],descricao:[null,l.k0.required],telefone:[null,l.k0.required],email:[null,[l.k0.required,l.k0.pattern(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)]],tipo:[null,l.k0.required],imagem:[null]})}ngOnInit(){var e,t;this.obterOpcoes(),this.checkTheme(),this.authService.getJwt()&&(this.isLogged=!0),this.email=null!==(e=sessionStorage.getItem("email"))&&void 0!==e?e:"",this.senha=null!==(t=sessionStorage.getItem("pass"))&&void 0!==t?t:""}validateEmail(){const t=this.obrigatorio.get("email");t&&(this.emailInvalid=!!t.value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value))}onFileSelected(e){const n=e.target.files[0];null!=e.target.files[0]&&(null!=n&&n.size>8388608?this.presentToast("O tamanho do banner deve ter no m\xe1ximo 8 MB"):this.selectedFile=n)}logout(){this.authService.logout(),sessionStorage.clear(),this.navController.navigateForward("login")}presentToast(e){var t=this;return(0,f.A)(function*(){(yield t.toastController.create({message:e,duration:2e3,position:"bottom"})).present()})()}obterOpcoes(){var e=this;return(0,f.A)(function*(){try{e.opcoes=yield e.tipoService.buscarTodosServicos(),e.opcoes.sort((t,n)=>t.nome.localeCompare(n.nome))}catch(t){console.error("Erro ao buscar as op\xe7\xf5es:",t),e.presentToast("Erro ao carregar as op\xe7\xf5es de servi\xe7os.")}})()}checkTheme(){"dark"===localStorage.getItem("theme")?document.body.setAttribute("color-scheme","dark"):document.body.setAttribute("color-scheme","light")}onTipoChange(e){var t=this;return(0,f.A)(function*(){const n=e.detail.value;n.includes("outro")&&(yield(yield t.alertController.create({header:"Outro Tipo de Servi\xe7o",inputs:[{name:"outroTipo",type:"text",placeholder:"Informe o outro tipo de servi\xe7o"}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{t.obrigatorio.patchValue({tipo:n.filter(r=>"outro"!==r)})}},{text:"OK",handler:r=>{r.outroTipo&&(t.tipoService.cadastrarTipo(r.outroTipo),t.opcoes.push({id:r.outroTipo,nome:r.outroTipo}),t.obrigatorio.patchValue({tipo:[...n.filter(h=>"outro"!==h),r.outroTipo]}))}}]})).present())})()}onSubmit(){var e=this;return(0,f.A)(function*(){var t,n,u,r;if(e.validateEmail(),e.emailInvalid)return void e.presentToast("Por favor, insira um e-mail v\xe1lido (exemplo: usuario@dominio.com).");const h=null===(t=e.obrigatorio.get("nome"))||void 0===t?void 0:t.value,k=null===(n=e.obrigatorio.get("descricao"))||void 0===n?void 0:n.value,b=null===(u=e.obrigatorio.get("telefone"))||void 0===u?void 0:u.value,B=null===(r=e.obrigatorio.get("email"))||void 0===r?void 0:r.value;if(e.obrigatorio.get("tipo"),h)if(k)if(b)if(B)try{var g;const v=null===(g=(yield e.authService.createAccount(e.email,e.senha,"L")).data)||void 0===g||null===(g=g.idConta)||void 0===g?void 0:g.toString();yield e.profissionalService.profissionalCadastro(v,e.obrigatorio.value.nome,e.obrigatorio.value.nomeSocial,e.obrigatorio.value.descricao,e.obrigatorio.value.telefone,e.obrigatorio.value.email),e.obrigatorio.value.tipo&&(yield e.profissionalService.cadastrarTipo(v,e.obrigatorio.value.tipo)),e.obrigatorio.value.imagem&&e.selectedFile&&(yield e.profissionalService.enviarImagem(v,e.selectedFile)),e.presentToast("Cadastro realizado com sucesso!"),localStorage.removeItem("c-user"),sessionStorage.clear(),e.navController.navigateRoot("login")}catch(T){var p;const v=(null===(p=T.response)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.menssage)||"Erro inesperado ao processar o cadastro. Tente novamente.";e.presentToast(v),console.error("Erro no onSubmit:",T),sessionStorage.clear(),e.navController.navigateRoot("criar-conta")}else e.presentToast("Por favor, preencha o campo Email.");else e.presentToast("Por favor, preencha o campo Telefone.");else e.presentToast("Por favor, preencha o campo Descri\xe7\xe3o.");else e.presentToast("Por favor, preencha o campo Nome.")})()}}return(i=c).\u0275fac=function(e){return new(e||i)(o.rXU(l.ok),o.rXU(y.u),o.rXU(F.q9),o.rXU(a.K_),o.rXU(I.M),o.rXU(M.d),o.rXU(a.hG))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-profissional-liberal-cadastro"]],decls:51,vars:11,consts:[["fileInput",""],[3,"fullscreen"],[1,"content"],[1,"container"],[1,"title"],[3,"formGroup"],["size","6"],[1,"form-item"],["formControlName","nome","label","Nome","labelPlacement","floating","placeholder","Informe o nome"],["formControlName","nomeSocial","label","Nome Social (opcional)","labelPlacement","floating","placeholder","Informe o nome social"],["formControlName","telefone","label","Telefone","labelPlacement","floating","placeholder","Informe o telefone para contato","maxlength","15","type","tel",3,"maskito","maskitoElement"],["formControlName","email","label","Email","labelPlacement","floating","placeholder","Informe o email de contato","type","email",3,"ionChange"],["color","danger","slot","error",4,"ngIf"],["formControlName","tipo","multiple","true","label","Tipo de servi\xe7o prestado","labelPlacement","floating",1,"custom-select",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["value","outro"],["formControlName","descricao","label","Descri\xe7\xe3o","labelPlacement","floating","placeholder","Descri\xe7\xe3o da atua\xe7\xe3o"],["size","12"],["expand","block",1,"teste",3,"click"],["type","file","formControlName","imagem","accept",".jpg, .png, .jpeg",2,"display","none",3,"change"],["color","light","expand","block",1,"teste",3,"routerLink"],["color","danger","slot","error"],[3,"value"]],template:function(e,t){if(1&e){const n=o.RV6();o.j41(0,"ion-content",1),o.nrm(1,"app-nav"),o.j41(2,"div",2)(3,"div",3)(4,"ion-card")(5,"ion-card-header")(6,"h1",4),o.EFF(7," Cadastro profissional Liberal/ Aut\xf4nomo "),o.k0s()(),o.j41(8,"ion-card-content")(9,"h2",4),o.EFF(10,"Informa\xe7\xf5es Obrigat\xf3rias"),o.k0s(),o.nrm(11,"br"),o.j41(12,"form",5)(13,"ion-row")(14,"ion-col",6)(15,"ion-item",7),o.nrm(16,"ion-input",8),o.k0s()(),o.j41(17,"ion-col",6)(18,"ion-item",7),o.nrm(19,"ion-input",9),o.k0s()()(),o.j41(20,"ion-row")(21,"ion-col",6)(22,"ion-item",7),o.nrm(23,"ion-input",10),o.k0s()(),o.j41(24,"ion-col",6)(25,"ion-item",7)(26,"ion-input",11),o.bIt("ionChange",function(){return o.eBV(n),o.Njj(t.validateEmail())}),o.k0s(),o.DNE(27,L,2,0,"ion-note",12),o.k0s()()(),o.j41(28,"ion-row")(29,"ion-col",6)(30,"ion-item",7)(31,"ion-select",13),o.bIt("ionChange",function(r){return o.eBV(n),o.Njj(t.onTipoChange(r))}),o.DNE(32,x,2,2,"ion-select-option",14),o.j41(33,"ion-select-option",15),o.EFF(34,"Cadastar novo tipo de servi\xe7o"),o.k0s()()()(),o.j41(35,"ion-col",6)(36,"ion-item",7),o.nrm(37,"ion-input",16),o.k0s()()(),o.j41(38,"ion-row")(39,"ion-col",17)(40,"ion-button",18),o.bIt("click",function(){o.eBV(n);const r=o.sdS(43);return o.Njj(r.click())}),o.EFF(41),o.k0s(),o.j41(42,"input",19,0),o.bIt("change",function(r){return o.eBV(n),o.Njj(t.onFileSelected(r))}),o.k0s()()()()()(),o.j41(44,"ion-row")(45,"ion-col",6)(46,"ion-button",18),o.bIt("click",function(){return o.eBV(n),o.Njj(t.onSubmit())}),o.EFF(47," Cadastrar "),o.k0s()(),o.j41(48,"ion-col",6)(49,"ion-button",20),o.EFF(50," Cancelar "),o.k0s()()()()()()}2&e&&(o.Y8G("fullscreen",!0),o.R7$(12),o.Y8G("formGroup",t.obrigatorio),o.R7$(11),o.Y8G("maskito",t.phoneMask)("maskitoElement",t.maskPredicate),o.R7$(2),o.AVh("invalid",t.emailInvalid),o.R7$(2),o.Y8G("ngIf",t.emailInvalid),o.R7$(5),o.Y8G("ngForOf",t.opcoes),o.R7$(9),o.SpI(" ",t.selectedFile?"Imagem de divulga\xe7\xe3o Selecionado: "+t.selectedFile.name:"Selecionar imagem de divulga\xe7\xe3o"," "),o.R7$(8),o.Y8G("routerLink",o.lJ4(10,O)))},dependencies:[l.qT,l.me,l.BC,l.cb,l.tU,S.uj,a.Jm,a.b_,a.I9,a.ME,a.hU,a.W9,a.$w,a.uz,a.JI,a.ln,a.Nm,a.Ip,a.Je,a.Gw,a.N7,C.Sq,C.bT,j.P,l.j4,l.JD,P.Wk],styles:['@charset "UTF-8";ion-title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}ion-select[_ngcontent-%COMP%]{max-height:200px}ion-select[_ngcontent-%COMP%]   .select-interface-option[_ngcontent-%COMP%]{overflow-y:overlay;max-height:200px}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:500;margin:0}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.form-item[_ngcontent-%COMP%]{width:100%;max-width:100%}ion-item.invalid[_ngcontent-%COMP%]{--highlight-color-invalid: var(--ion-color-danger);--highlight-color-focused: var(--ion-color-danger)}ion-item.invalid[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--ion-color-danger)}ion-note[slot=error][_ngcontent-%COMP%]{display:block;font-size:small;margin-top:5px;color:var(--ion-color-danger)}']}),c})()}];let R=(()=>{var i;class c{}return(i=c).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[P.iI.forChild(N),P.iI]}),c})();var $=s(5553);let _=(()=>{var i;class c{}return(i=c).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[l.YN,S.rt,a.bv.forRoot({})],C.MD,$.h,l.YN,a.bv,l.X1,R]}),c})()}}]);