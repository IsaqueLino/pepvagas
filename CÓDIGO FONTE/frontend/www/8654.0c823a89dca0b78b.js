"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8654],{8654:(O,m,t)=>{t.r(m),t.d(m,{CadastroRepresentantePageModule:()=>x});var p=t(177),c=t(4341),i=t(1075),u=t(8986),g=t(467),h=t(510),e=t(4438),v=t(3656),C=t(4796),f=t(2078),R=t(6857),M=t(5619),P=t(858),b=t(833);function I(o,l){1&o&&(e.j41(0,"ion-note",12),e.EFF(1," Por favor, insira um e-mail v\xe1lido (exemplo: usuario@dominio.com) "),e.k0s())}const y=[{path:"",component:(()=>{var o;class l{constructor(n,a,s,r,k,F,T){this.toastController=n,this.authService=a,this.navController=s,this.representanteService=r,this.candidatoService=k,this.adminService=F,this.empresaService=T,this.user={},this.userType="",this.isLogged=!1,this.isDarkTheme=!1,this.novoRepresentante={nome:"",empresa:""},this.novaConta={email:"",senha:"",confirmarSenha:""},this.emailInvalid=!1,null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var n=this;return(0,g.A)(function*(){n.getUser(),n.novoRepresentante.empresa=n.userId})()}validateEmail(){this.emailInvalid=!!this.novaConta.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.novaConta.email)}onSubmit(){var n=this;return(0,g.A)(function*(){if(n.validateEmail(),n.emailInvalid)n.exibirMensagem("Por favor, insira um e-mail v\xe1lido (exemplo: usuario@dominio.com).");else if(0==n.novoRepresentante.nome.length)n.exibirMensagem("Informe o nome do representante.");else if(0==n.novaConta.email.length)n.exibirMensagem("Informe o e-mail da conta.");else if(n.novaConta.senha.length<4)n.exibirMensagem("A senha deve ter no m\xedmino 4 caracteres.");else if(n.novaConta.senha!=n.novaConta.confirmarSenha)n.exibirMensagem("As senhas n\xe3o coincidem.");else try{const a=yield n.authService.createAccount(n.novaConta.email,n.novaConta.senha,h.R.REPRESENTANTE);201==a.status?201==(yield n.representanteService.cadastrarRepresentante(a.data.idConta,n.novoRepresentante.nome,n.novoRepresentante.empresa)).status?(n.exibirMensagem("Representante "+n.novoRepresentante.nome+" cadastrado com sucesso!"),n.navController.navigateBack("empresa-representantes")):(n.exibirMensagem("Erro interno no servidor"),console.error("Erro ao criar conta")):console.log("Erro ao criar conta.")}catch(a){console.log(a)}})()}cancelar(){this.navController.navigateForward("empresa-representantes")}exibirMensagem(n){var a=this;return(0,g.A)(function*(){(yield a.toastController.create({message:n,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var n=this;return(0,g.A)(function*(){n.userId=n.authService.getUser();const a=n.authService.getType();if(null==n.userId)n.isLogged=!1;else{switch(n.userType=null!=a?a:"",a){case"A":n.user=yield n.adminService.getAdministrador(n.userId);break;case"C":n.user=yield n.candidatoService.getCandidato(n.userId);break;case"E":n.user=yield n.empresaService.getEmpresa(n.userId)}n.isLogged=!0}})()}}return(o=l).\u0275fac=function(n){return new(n||o)(e.rXU(i.K_),e.rXU(C.u),e.rXU(v.q9),e.rXU(f.m),e.rXU(R.X),e.rXU(M.r),e.rXU(P.z))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-cadastro-representante"]],decls:33,vars:7,consts:[["id","main-content"],[1,"content"],[1,"container"],[1,"title"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome do Representante","maxlength","60",3,"ngModelChange","ngModel"],["label","E-mail","labelPlacement","floating","placeholder","Informe o email da conta","maxlength","50","type","email",3,"ngModelChange","ionChange","ngModel"],["color","danger","slot","error",4,"ngIf"],["label","Senha","labelPlacement","floating","placeholder","Informe a senha da conta","type","password",3,"ngModelChange","ngModel"],["label","Confirmar senha","labelPlacement","floating","placeholder","Confirme a senha digitada acima","type","password",3,"ngModelChange","ngModel"],["size","6"],["expand","block",1,"butao",3,"click"],["color","light","expand","block",3,"click"],["color","danger","slot","error"]],template:function(n,a){1&n&&(e.j41(0,"ion-content",0),e.nrm(1,"app-nav"),e.j41(2,"div",1)(3,"div",2)(4,"ion-card")(5,"ion-card-header")(6,"h2",3),e.EFF(7,"Cadastro de Representante"),e.k0s()(),e.j41(8,"ion-card-content")(9,"h1",3),e.EFF(10,"Informa\xe7\xf5es do Representante"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-item")(13,"ion-input",4),e.mxI("ngModelChange",function(r){return e.DH7(a.novoRepresentante.nome,r)||(a.novoRepresentante.nome=r),r}),e.k0s()(),e.nrm(14,"br"),e.j41(15,"h1",3),e.EFF(16,"Informa\xe7\xf5es da Conta"),e.k0s(),e.nrm(17,"br"),e.j41(18,"ion-item")(19,"ion-input",5),e.mxI("ngModelChange",function(r){return e.DH7(a.novaConta.email,r)||(a.novaConta.email=r),r}),e.bIt("ionChange",function(){return a.validateEmail()}),e.k0s(),e.DNE(20,I,2,0,"ion-note",6),e.k0s(),e.j41(21,"ion-item")(22,"ion-input",7),e.mxI("ngModelChange",function(r){return e.DH7(a.novaConta.senha,r)||(a.novaConta.senha=r),r}),e.k0s()(),e.j41(23,"ion-item")(24,"ion-input",8),e.mxI("ngModelChange",function(r){return e.DH7(a.novaConta.confirmarSenha,r)||(a.novaConta.confirmarSenha=r),r}),e.k0s()(),e.nrm(25,"br"),e.j41(26,"ion-row")(27,"ion-col",9)(28,"ion-button",10),e.bIt("click",function(){return a.onSubmit()}),e.EFF(29," Cadastrar Representante "),e.k0s()(),e.j41(30,"ion-col",9)(31,"ion-button",11),e.bIt("click",function(){return a.cancelar()}),e.EFF(32," Cancelar "),e.k0s()()()()()()()()),2&n&&(e.R7$(13),e.R50("ngModel",a.novoRepresentante.nome),e.R7$(5),e.AVh("invalid",a.emailInvalid),e.R7$(),e.R50("ngModel",a.novaConta.email),e.R7$(),e.Y8G("ngIf",a.emailInvalid),e.R7$(2),e.R50("ngModel",a.novaConta.senha),e.R7$(2),e.R50("ngModel",a.novaConta.confirmarSenha))},dependencies:[p.bT,c.BC,c.tU,c.vS,i.Jm,i.b_,i.I9,i.ME,i.hU,i.W9,i.$w,i.uz,i.JI,i.ln,i.Gw,b.P],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:30px}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{scale:90%}.botao-cancelar[_ngcontent-%COMP%]{border-radius:4px}.butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}ion-item.invalid[_ngcontent-%COMP%]{--highlight-color-invalid: var(--ion-color-danger);--highlight-color-focused: var(--ion-color-danger)}ion-item.invalid[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--ion-color-danger)}ion-note[slot=error][_ngcontent-%COMP%]{display:block;font-size:small;margin-top:5px;color:var(--ion-color-danger)}"]}),l})()}];let E=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.iI.forChild(y),u.iI]}),l})();var S=t(5553);let x=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,c.YN,i.bv,E,S.h]}),l})()}}]);