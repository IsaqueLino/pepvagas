"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5255],{5255:($,h,o)=>{o.r(h),o.d(h,{MinhasVagasPageModule:()=>I});var p=o(177),m=o(4341),l=o(1075),v=o(8986),g=o(467),a=o(4438),V=o(6857),f=o(4796),M=o(9839),P=o(5619),_=o(3656),C=o(858),b=o(7229),F=o(833);const S=["popoverVaga"];function j(n,r){if(1&n){const i=a.RV6();a.j41(0,"ion-content",7)(1,"ion-button",8),a.bIt("click",function(){a.eBV(i);const t=a.XpG();return a.Njj(t.verDetalhesVaga())}),a.EFF(2,"Visualizar"),a.k0s(),a.j41(3,"ion-button",8),a.bIt("click",function(){a.eBV(i);const t=a.XpG();return a.Njj(t.editarVaga())}),a.EFF(4,"Editar"),a.k0s(),a.j41(5,"ion-button",8),a.bIt("click",function(){a.eBV(i);const t=a.XpG();return a.Njj(t.confirmarExclusao())}),a.EFF(6,"Excluir"),a.k0s()()}}function k(n,r){if(1&n){const i=a.RV6();a.j41(0,"ion-col")(1,"app-vaga",10),a.bIt("click",function(t){const s=a.eBV(i).$implicit,c=a.XpG(2);return a.Njj(c.presentPopoverVaga(t,s.idVaga))}),a.k0s()()}if(2&n){const i=r.$implicit;a.R7$(),a.FS9("titulo",i.titulo),a.FS9("cidade",i.cidade),a.FS9("regime",i.regime),a.FS9("salario",i.salario),a.FS9("pcd",i.pcd),a.FS9("tipo",i.tipo),a.FS9("data",i.dataLimite),a.FS9("logo",i.logo),a.FS9("empresa",i.idEmpresa.nomeEmpresa)}}function y(n,r){if(1&n&&(a.j41(0,"ion-grid")(1,"ion-row"),a.DNE(2,k,2,9,"ion-col",9),a.k0s()()),2&n){const i=a.XpG();a.R7$(2),a.Y8G("ngForOf",i.listaVagas)}}function O(n,r){1&n&&(a.j41(0,"div")(1,"p",11),a.EFF(2,"N\xe3o h\xe1 nenhuma vaga publicada."),a.k0s()())}const x=[{path:"",component:(()=>{var n;class r{constructor(e,t,s,c,u,d,G,R,X){this.candidatoService=e,this.authService=t,this.vagaService=s,this.adminService=c,this.navController=u,this.empresaService=d,this.toastController=G,this.alertController=R,this.popoverController=X,this.vagas=[],this.listaVagas=[...this.vagas],this.vagasRelacionadas=[],this.user={},this.userType={},this.isPopoverVagaOpen=!1,null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){this.getUser(),setTimeout(()=>{this.getVagas()},700)}getVagas(){var e=this;return(0,g.A)(function*(){var t;const s=yield e.vagaService.getVagasPorConta(null!==(t=e.user.idconta)&&void 0!==t?t:e.user.data.idconta);e.vagas=s.data,e.listaVagas=[...e.vagas],e.matchVagas(),e.sortVagas()})()}matchVagas(){this.listaVagas.filter(e=>{let t=0;null!=this.user.pcd&&e.pcd==this.user.pcd&&t++,null!=this.user.pretensaoSalarial&&e.salario>=this.user.pretensaoSalarial&&t++,null!=this.user.tipoVaga&&e.regime.toLowerCase()==this.user.tipoVaga.toLowerCase()&&(t+=2),this.user.areas&&this.user.areas.forEach(s=>{s.idArea==e.idArea.idArea&&(t+=2)}),e.matchPoint=t})}confirmarExclusao(){var e=this;return(0,g.A)(function*(){yield(yield e.alertController.create({header:"Confirma\xe7\xe3o",message:"Tem certeza que deseja excluir a vaga?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{e.isPopoverVagaOpen=!1}},{text:"Excluir",handler:()=>{e.isPopoverVagaOpen=!1,e.removerVaga()}}]})).present()})()}sortVagas(){this.listaVagas.sort((e,t)=>e.matchPoint<=t.matchPoint?1:-1)}handleFilter(e){const t=e.target.value.toLowerCase();if(""==t)return this.listaVagas=[...this.vagas],this.listaVagas;this.listaVagas=this.listaVagas.filter(s=>{if(s.titulo.toLowerCase().indexOf(t)>-1)return s}),console.log(this.listaVagas)}getUser(){var e=this;return(0,g.A)(function*(){const t=e.authService.getUser(),s=e.authService.getType();if(null!=t)switch(e.userType=null!=s?s:"",console.log("Tipo usu\xe1rio "+e.userType),s){case"A":e.user=yield e.adminService.getAdministrador(t),console.log("DADOS DO ADMIN "+e.user);break;case"C":e.user=yield e.candidatoService.getCandidato(t);break;case"E":e.user=yield e.empresaService.getEmpresa(t)}})()}presentPopoverVaga(e,t){this.popoverVaga.event=e,this.isPopoverVagaOpen=!0,localStorage.setItem("idVaga",t)}verDetalhesVaga(){this.popoverController.dismiss(),this.navController.navigateForward("/vaga-detalhes")}editarVaga(){this.popoverController.dismiss(),this.navController.navigateRoot("/editar-vaga")}removerVaga(){var e=this;return(0,g.A)(function*(){var t,s;const c=null!==(t=e.authService.getJwt())&&void 0!==t?t:"",u=null!==(s=localStorage.getItem("idVaga"))&&void 0!==s?s:"",d=yield e.vagaService.delete(u,c);200==d.status&&(e.showMessage(d.data.message,"success"),e.getVagas()),e.popoverController.dismiss()})()}showMessage(e,t){var s=this;return(0,g.A)(function*(){(yield s.toastController.create({message:e,duration:1500,position:"top",color:t})).present()})()}}return(n=r).\u0275fac=function(e){return new(e||n)(a.rXU(V.X),a.rXU(f.u),a.rXU(M.T),a.rXU(P.r),a.rXU(_.q9),a.rXU(C.z),a.rXU(l.K_),a.rXU(l.hG),a.rXU(l.IE))},n.\u0275cmp=a.VBU({type:n,selectors:[["app-minhas-vagas"]],viewQuery:function(e,t){if(1&e&&a.GBs(S,5),2&e){let s;a.mGM(s=a.lsd())&&(t.popoverVaga=s.first)}},decls:13,vars:5,consts:[["popoverVaga",""],[3,"fullscreen"],[1,"web-padding"],["placeholder","T\xedtulo da vaga","show-clear-button","focus",1,"custom",3,"ionInput","debounce"],[1,"subtitle"],[3,"didDismiss","isOpen"],[4,"ngIf"],[1,"ion-padding"],["expand","block",3,"click"],[4,"ngFor","ngForOf"],[3,"click","titulo","cidade","regime","salario","pcd","tipo","data","logo","empresa"],[1,"subtitle","center"]],template:function(e,t){if(1&e){const s=a.RV6();a.j41(0,"ion-content",1),a.nrm(1,"app-nav"),a.j41(2,"div",2)(3,"ion-searchbar",3),a.bIt("ionInput",function(u){return a.eBV(s),a.Njj(t.handleFilter(u))}),a.k0s(),a.j41(4,"h4",4),a.EFF(5,"Vagas criadas por voc\xea"),a.k0s(),a.j41(6,"p",4),a.EFF(7,"Clique em uma vaga para visualizar as op\xe7\xf5es"),a.k0s(),a.j41(8,"ion-popover",5,0),a.bIt("didDismiss",function(){return a.eBV(s),a.Njj(t.isPopoverVagaOpen=!1)}),a.DNE(10,j,7,0,"ng-template"),a.k0s(),a.DNE(11,y,3,1,"ion-grid",6)(12,O,3,0,"div",6),a.k0s()()}2&e&&(a.Y8G("fullscreen",!0),a.R7$(3),a.Y8G("debounce",500),a.R7$(5),a.Y8G("isOpen",t.isPopoverVagaOpen),a.R7$(3),a.Y8G("ngIf",t.listaVagas.length>0),a.R7$(),a.Y8G("ngIf",0===t.listaVagas.length))},dependencies:[p.Sq,p.bT,l.Jm,l.hU,l.W9,l.lO,l.ln,l.S1,l.CF,l.Gw,b.Z,F.P],styles:[".web-padding[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 15%;display:flex;justify-content:start;align-items:center;flex-direction:column}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}ion-searchbar.custom[_ngcontent-%COMP%]{--background: var(--ion-card-background);--border-radius: 10px;--padding-inline-start: 0px;margin-top:40px}ion-img[_ngcontent-%COMP%]{max-width:150px}ion-list[_ngcontent-%COMP%]{background-color:var(--ion-background-color)}ion-item[_ngcontent-%COMP%]{--background: var(--ion-background-color)}ion-label[_ngcontent-%COMP%]:hover{background-color:var(--ion-card-background)}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.popover[_ngcontent-%COMP%]{--background: var(--ion-card-background)}ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-pep);--box-shadow: none}ion-header[_ngcontent-%COMP%]{box-shadow:none}@media screen and (max-width: 600px){.web-padding[_ngcontent-%COMP%]{padding:0}.subtitle[_ngcontent-%COMP%]{font-size:18px}}"]}),r})()}];let E=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.$C({type:n}),n.\u0275inj=a.G2t({imports:[v.iI.forChild(x),v.iI]}),r})();var T=o(5553);let I=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.$C({type:n}),n.\u0275inj=a.G2t({imports:[p.MD,m.YN,l.bv,E,T.h]}),r})()}}]);