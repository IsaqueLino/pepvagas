"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9960],{9960:(R,g,s)=>{s.r(g),s.d(g,{EmpresaPerfilPageModule:()=>F});var _=s(177),p=s(4341),l=s(1075),u=s(8986),c=s(467),e=s(4438),P=s(3656),M=s(4796),E=s(5619),b=s(858),j=s(833),h=s(1208);const v=["modal3"],C=["modal4"];function k(r,m){if(1&r){const o=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",22)(2,"ion-button",23),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.cancel())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",24)(7,"ion-button",25),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.alterarEmpresa())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",26),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Informa\xe7\xf5es Gerais"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",27),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.nomeEmpresa,a)||(t.empresaAlterada.nomeEmpresa=a),e.Njj(a)}),e.k0s()(),e.j41(15,"ion-item")(16,"ion-input",28),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.cnpj,a)||(t.empresaAlterada.cnpj=a),e.Njj(a)}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-input",29),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.email,a)||(t.empresaAlterada.email=a),e.Njj(a)}),e.k0s()(),e.nrm(19,"br"),e.j41(20,"h2",5),e.EFF(21,"Informa\xe7\xf5es Complementares"),e.k0s(),e.nrm(22,"br"),e.j41(23,"ion-item")(24,"ion-input",30),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.telefone,a)||(t.empresaAlterada.telefone=a),e.Njj(a)}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-input",31),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.empresaAlterada.site,a)||(t.empresaAlterada.site=a),e.Njj(a)}),e.k0s()()()}if(2&r){const o=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",o.empresaAlterada.nomeEmpresa),e.R7$(2),e.Y8G("maskito",o.cnpjMask)("maskitoElement",o.maskPredicate),e.R50("ngModel",o.empresaAlterada.cnpj),e.R7$(2),e.R50("ngModel",o.empresaAlterada.email),e.R7$(6),e.Y8G("maskito",o.currentMask)("maskitoElement",o.maskPredicate),e.R50("ngModel",o.empresaAlterada.telefone),e.R7$(2),e.R50("ngModel",o.empresaAlterada.site)}}function x(r,m){if(1&r){const o=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",22)(2,"ion-button",23),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.cancelPassword())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",24)(7,"ion-button",25),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.confirmPassword())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",26),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Alterar Senha"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",32),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.novaSenha.senhaAtual,a)||(t.novaSenha.senhaAtual=a),e.Njj(a)}),e.nrm(15,"ion-input-password-toggle",33),e.k0s()(),e.j41(16,"ion-item")(17,"ion-input",34),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.novaSenha.novaSenha,a)||(t.novaSenha.novaSenha=a),e.Njj(a)}),e.nrm(18,"ion-input-password-toggle",33),e.k0s()(),e.j41(19,"ion-item")(20,"ion-input",35),e.mxI("ngModelChange",function(a){e.eBV(o);const t=e.XpG();return e.DH7(t.novaSenha.confirmarSenha,a)||(t.novaSenha.confirmarSenha=a),e.Njj(a)}),e.nrm(21,"ion-input-password-toggle",33),e.k0s()()()}if(2&r){const o=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",o.novaSenha.senhaAtual),e.R7$(3),e.R50("ngModel",o.novaSenha.novaSenha),e.R7$(3),e.R50("ngModel",o.novaSenha.confirmarSenha)}}const S=[{path:"",component:(()=>{var r;class m{constructor(n,a,t,d,i){this.toastController=n,this.authService=a,this.navController=t,this.adminService=d,this.empresaService=i,this.user={},this.userType="",this.isLogged=!1,this.empresa={},this.empresaAlterada={},this.conta={},this.novaSenha={senhaAtual:"",novaSenha:"",confirmarSenha:""},this.maskPredicate=function(){var I=(0,c.A)(function*(f){return f.getInputElement()});return function(f){return I.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.cnpjMask={mask:[/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/]},this.fixPhoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.actionSheetButtons=[{text:"Prosseguir",role:"destructive",handler:()=>{this.deactivateAccount(this.conta.idConta)}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}],null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var n=this;return(0,c.A)(function*(){n.getUser(),n.conta=yield n.authService.getContaDetails(),console.log("Conta: ",n.conta),n.empresa=yield n.empresaService.getEmpresa(n.userId),console.log("Empresa: ",n.empresa),n.empresaAlterada=Object.assign({},n.empresa),n.empresaAlterada.cnpj=n.formatCnpj(n.empresaAlterada.cnpj),n.empresaAlterada.telefone=n.formatTelefone(n.empresaAlterada.telefone)})()}get currentMask(){return 14===this.empresaAlterada.telefone.length?this.phoneMask:this.fixPhoneMask}cancel(){this.empresaAlterada=Object.assign({},this.empresa),this.empresaAlterada.cnpj=this.formatCnpj(this.empresaAlterada.cnpj),this.empresaAlterada.telefone=this.formatTelefone(this.empresaAlterada.telefone),this.modal3.dismiss(null,"cancel")}onWillDismissPassword(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}cancelPassword(){this.modal4.dismiss(null,"cancel"),this.novaSenha.senhaAtual="",this.novaSenha.novaSenha="",this.novaSenha.confirmarSenha=""}confirmPassword(){this.updatePassword()}onWillDismiss(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}exibirMensagem(n){var a=this;return(0,c.A)(function*(){(yield a.toastController.create({message:n,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var n=this;return(0,c.A)(function*(){n.userId=n.authService.getUser();const a=n.authService.getType();if(null==n.userId)n.isLogged=!1;else{switch(n.userType=null!=a?a:"",a){case"A":n.user=yield n.adminService.getAdministrador(n.userId),console.log(n.user);break;case"C":case"M":case"R":case"L":break;case"E":n.user=yield n.empresaService.getEmpresa(n.userId)}n.isLogged=!0}})()}updatePassword(){var n=this;return(0,c.A)(function*(){try{n.novaSenha.novaSenha.length<4?n.exibirMensagem("Nova senha deve ter no m\xednimo 4 caracteres"):n.novaSenha.novaSenha!=n.novaSenha.confirmarSenha?n.exibirMensagem("A nova senha e sua confirma\xe7\xe3o n\xe3o coincidem"):200===(yield n.authService.updatePassword(n.conta.idConta,n.novaSenha.senhaAtual,n.novaSenha.novaSenha,n.novaSenha.confirmarSenha)).status?(n.exibirMensagem("Senha atualizada com sucesso!"),n.modal4.dismiss(null,"confirm"),n.novaSenha.senhaAtual="",n.novaSenha.novaSenha="",n.novaSenha.confirmarSenha=""):n.exibirMensagem("Senha Atual incorreta")}catch(a){console.error("Erro ao atualizar a senha:",a),n.exibirMensagem("Senha Atual incorreta")}})()}deactivateAccount(n){var a=this;return(0,c.A)(function*(){try{yield a.authService.deleteAccount(n),console.log("Conta exclu\xedda com sucesso!"),a.logout()}catch(t){console.error("Erro ao excluir conta:",t)}})()}alterarEmpresa(){var n=this;return(0,c.A)(function*(){if(0==n.empresaAlterada.nomeEmpresa.length)n.exibirMensagem("Informe o nome da Empresa");else if(0==n.empresaAlterada.email.length)n.exibirMensagem("Informe o e-mail da Empresa");else if(0!=n.empresaAlterada.telefone.length&&n.empresaAlterada.telefone.length<14)n.exibirMensagem("Por favor, complete o n\xfamero de telefone digitado");else try{200==(yield n.empresaService.alterarEmpresa(n.userId,n.empresaAlterada.nomeEmpresa,n.empresaAlterada.cnpj,n.empresaAlterada.email,n.empresaAlterada.telefone,n.empresaAlterada.site)).status?(n.modal3.dismiss(n.empresaAlterada.nomeEmpresa,"confirm"),n.ngOnInit(),n.exibirMensagem("Empresa alterada com sucesso!")):n.exibirMensagem("Erro interno no servidor")}catch(a){console.error(a)}})()}formatCnpj(n){return n&&14===n.length?n.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):n}formatTelefone(n){return n?11===(n=n.replace(/\D/g,"")).length?n.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):10===n.length?n.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):n:""}gerenciarRepresentantes(){this.navController.navigateForward("empresa-representantes")}}return(r=m).\u0275fac=function(n){return new(n||r)(e.rXU(l.K_),e.rXU(M.u),e.rXU(P.q9),e.rXU(E.r),e.rXU(b.z))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-empresa-perfil"]],viewQuery:function(n,a){if(1&n&&(e.GBs(v,7),e.GBs(C,7)),2&n){let t;e.mGM(t=e.lsd())&&(a.modal3=t.first),e.mGM(t=e.lsd())&&(a.modal4=t.first)}},decls:66,vars:7,consts:[["modal3",""],["modal4",""],["id","main-content"],[1,"content"],[1,"container"],[2,"text-align","center"],["size","6"],["label","Email","labelPlacement","floating","readonly","",3,"ngModelChange","ngModel"],["type","password","label","Senha","labelPlacement","floating","value","...................","readonly",""],["id","open-modal4","expand","block",1,"butao"],["size","12"],["readonly","","label","Nome da Empresa","labelPlacement","floating","placeholder","Informe o nome da empresa","maxlength","60",3,"ngModelChange","ngModel"],["readonly","","label","CNPJ","labelPlacement","floating","placeholder","Informe o CNPJ da empresa","maxlength","60",3,"value"],["readonly","","label","E-mail de contato","labelPlacement","floating","placeholder","Nome da Empresa","maxlength","60",3,"ngModelChange","ngModel"],["expand","block",1,"butao",3,"click"],["readonly","","label","Telefone para contato","labelPlacement","floating","placeholder","Telefone de contato n\xe3o informado","maxlength","60",3,"value"],["readonly","","label","Website","labelPlacement","floating","placeholder","Website da Empresa n\xe3o informado","maxlength","60",3,"ngModelChange","ngModel"],["id","open-modal3","expand","block",1,"butao"],["id","open-action-sheet","color","danger","fill","outline","expand","block",1,"botao-cancelar"],["trigger","open-action-sheet","header","Tem certeza que deseja desativar sua conta?",3,"buttons"],["trigger","open-modal3",3,"willDismiss"],["trigger","open-modal4",3,"willDismiss"],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome",3,"ngModelChange","ngModel"],["readonly","","label","CNPJ","labelPlacement","floating","placeholder","Informe o CNPJ da empresa","maxlength","60",3,"ngModelChange","maskito","maskitoElement","ngModel"],["label","E-mail de contato","labelPlacement","floating","placeholder","Nome da Empresa","maxlength","60",3,"ngModelChange","ngModel"],["label","Telefone para contato","labelPlacement","floating","placeholder","Telefone de contato n\xe3o informado","maxlength","60",3,"ngModelChange","maskito","maskitoElement","ngModel"],["label","Website","labelPlacement","floating","placeholder","Website da Empresa n\xe3o informado","maxlength","60",3,"ngModelChange","ngModel"],["type","password","label","Senha atual","labelPlacement","floating",3,"ngModelChange","ngModel"],["slot","end","color","success"],["type","password","label","Senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Confirmar senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"]],template:function(n,a){if(1&n){const t=e.RV6();e.j41(0,"ion-content",2),e.nrm(1,"app-nav"),e.j41(2,"div",3)(3,"div",4)(4,"ion-card")(5,"ion-card-content")(6,"h1",5),e.EFF(7,"Perfil da Empresa"),e.k0s(),e.nrm(8,"br"),e.j41(9,"h1",5),e.EFF(10,"Informa\xe7\xf5es da Conta"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-row")(13,"ion-col",6)(14,"ion-item")(15,"ion-input",7),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(a.conta.email,i)||(a.conta.email=i),e.Njj(i)}),e.k0s()()(),e.j41(16,"ion-col",6)(17,"ion-item"),e.nrm(18,"ion-input",8),e.k0s()()(),e.j41(19,"ion-row")(20,"ion-col")(21,"ion-button",9),e.EFF(22,"Alterar Senha"),e.k0s()()(),e.nrm(23,"br"),e.j41(24,"h1",5),e.EFF(25,"Informa\xe7\xf5es Gerais"),e.k0s(),e.nrm(26,"br"),e.j41(27,"ion-row")(28,"ion-col")(29,"ion-item",10)(30,"ion-input",11),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(a.empresa.nomeEmpresa,i)||(a.empresa.nomeEmpresa=i),e.Njj(i)}),e.k0s()()()(),e.j41(31,"ion-row")(32,"ion-col",6)(33,"ion-item"),e.nrm(34,"ion-input",12),e.k0s()(),e.j41(35,"ion-col",6)(36,"ion-item")(37,"ion-input",13),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(a.empresa.email,i)||(a.empresa.email=i),e.Njj(i)}),e.k0s()()()(),e.j41(38,"ion-button",14),e.bIt("click",function(){return e.eBV(t),e.Njj(a.gerenciarRepresentantes())}),e.EFF(39," Gerenciar Representantes "),e.k0s(),e.nrm(40,"br"),e.j41(41,"h1",5),e.EFF(42,"Informa\xe7\xf5es Complementares"),e.k0s(),e.nrm(43,"br"),e.j41(44,"ion-row")(45,"ion-col",6)(46,"ion-item"),e.nrm(47,"ion-input",15),e.k0s()(),e.j41(48,"ion-col",6)(49,"ion-item")(50,"ion-input",16),e.mxI("ngModelChange",function(i){return e.eBV(t),e.DH7(a.empresa.site,i)||(a.empresa.site=i),e.Njj(i)}),e.k0s()()()(),e.nrm(51,"br"),e.j41(52,"ion-row")(53,"ion-col",6)(54,"ion-button",17),e.EFF(55," Alterar Informa\xe7\xf5es "),e.k0s()(),e.j41(56,"ion-col",6)(57,"ion-button",18),e.EFF(58," Desativar Conta "),e.k0s(),e.nrm(59,"ion-action-sheet",19),e.k0s()(),e.j41(60,"ion-modal",20,0),e.bIt("willDismiss",function(i){return e.eBV(t),e.Njj(a.onWillDismiss(i))}),e.DNE(62,k,27,10,"ng-template"),e.k0s(),e.j41(63,"ion-modal",21,1),e.bIt("willDismiss",function(i){return e.eBV(t),e.Njj(a.onWillDismissPassword(i))}),e.DNE(65,x,22,4,"ng-template"),e.k0s()()()()()()}2&n&&(e.R7$(15),e.R50("ngModel",a.conta.email),e.R7$(15),e.R50("ngModel",a.empresa.nomeEmpresa),e.R7$(4),e.Y8G("value",a.formatCnpj(a.empresa.cnpj)),e.R7$(3),e.R50("ngModel",a.empresa.email),e.R7$(10),e.Y8G("value",a.formatTelefone(a.empresa.telefone)),e.R7$(3),e.R50("ngModel",a.empresa.site),e.R7$(9),e.Y8G("buttons",a.actionSheetButtons))},dependencies:[p.BC,p.tU,p.vS,l.wC,l.Jm,l.QW,l.b_,l.I9,l.hU,l.W9,l.$w,l.Wv,l.uz,l.ln,l.BC,l.ai,l.Sb,l.Gw,j.P,h.uj],styles:[".profile-picture-container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:200%;height:200%}.profile-img[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;height:100px;align-items:center;margin-bottom:20px}.butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}.profile-img[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px;height:100px;width:100px;margin-left:-10px;padding:-10px}.user-img[_ngcontent-%COMP%]{width:25px;margin-left:15px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.logo-img[_ngcontent-%COMP%]{max-width:150px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),m})()}];let A=(()=>{var r;class m{}return(r=m).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.iI.forChild(S),u.iI]}),m})();var y=s(5553);let F=(()=>{var r;class m{}return(r=m).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[_.MD,p.YN,l.bv,A,y.h,h.rt]}),m})()}}]);