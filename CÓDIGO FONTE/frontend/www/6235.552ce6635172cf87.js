"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6235],{6235:(x,h,s)=>{s.r(h),s.d(h,{ProfissionalLiberalCadastroPageModule:()=>O});var v=s(177),l=s(4341),a=s(1075),b=s(1208),p=s(8986),g=s(467),o=s(4438),P=s(4796),k=s(3656),S=s(3045),y=s(7700),F=s(833);const j=()=>["/login"];function M(i,c){if(1&i&&(o.j41(0,"ion-select-option",20),o.EFF(1),o.k0s()),2&i){const u=c.$implicit;o.Y8G("value",u.id),o.R7$(),o.JRh(u.nome)}}const T=[{path:"",component:(()=>{var i;class c{constructor(e,t,n,m,r,d,f){this.formBuilder=e,this.authService=t,this.navController=n,this.toastController=m,this.profissionalService=r,this.tipoService=d,this.alertController=f,this.selectedFile=null,this.opcoes=[],this.isDarkTheme=!1,this.isLogged=!1,this.email="",this.senha="",this.maskPredicate=function(){var L=(0,g.A)(function*(C){return C.getInputElement()});return function(C){return L.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.obrigatorio=this.formBuilder.group({nome:[null,l.k0.required],nomeSocial:[null],descricao:[null,l.k0.required],telefone:[null,l.k0.required],email:[null,l.k0.required],tipo:[null,l.k0.required],imagem:[null]})}ngOnInit(){var e,t;this.obterOpcoes(),this.checkTheme(),this.authService.getJwt()&&(this.isLogged=!0),this.email=null!==(e=sessionStorage.getItem("email"))&&void 0!==e?e:"",this.senha=null!==(t=sessionStorage.getItem("pass"))&&void 0!==t?t:""}onFileSelected(e){const n=e.target.files[0];null!=e.target.files[0]&&(null!=n&&n.size>8388608?this.presentToast("O tamanho do banner deve ter no maximo 8 MB "):this.selectedFile=n)}logout(){this.authService.logout(),sessionStorage.clear(),this.navController.navigateForward("login")}presentToast(e){var t=this;return(0,g.A)(function*(){(yield t.toastController.create({message:e,duration:2e3,position:"bottom"})).present()})()}obterOpcoes(){var e=this;return(0,g.A)(function*(){try{e.opcoes=yield e.tipoService.buscarTodosServicos(),e.opcoes.sort((t,n)=>t.nome.localeCompare(n.nome))}catch(t){console.error("Erro ao buscar as op\xe7\xf5es:",t),e.presentToast("Erro ao carregar as op\xe7\xf5es de servi\xe7os.")}})()}checkTheme(){"dark"===localStorage.getItem("theme")?document.body.setAttribute("color-scheme","dark"):document.body.setAttribute("color-scheme","light")}onTipoChange(e){var t=this;return(0,g.A)(function*(){const n=e.detail.value;n.includes("outro")&&(yield(yield t.alertController.create({header:"Outro Tipo de Servi\xe7o",inputs:[{name:"outroTipo",type:"text",placeholder:"Informe o outro tipo de servi\xe7o"}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{t.obrigatorio.patchValue({tipo:n.filter(r=>"outro"!==r)})}},{text:"OK",handler:r=>{r.outroTipo&&(t.tipoService.cadastrarTipo(r.outroTipo),t.opcoes.push({id:r.outroTipo,nome:r.outroTipo}),t.obrigatorio.patchValue({tipo:[...n.filter(f=>"outro"!==f),r.outroTipo]}))}}]})).present())})()}onSubmit(){var e=this;return(0,g.A)(function*(){if(e.obrigatorio.invalid)return void Object.keys(e.obrigatorio.controls).forEach(r=>{const d=e.obrigatorio.get(r);d&&d.invalid&&d.errors&&d.errors.required&&e.presentToast(`O campo ${r} \xe9 obrigat\xf3rio. Por favor, preencha-o.`)});let n=(yield e.authService.createAccount(e.email,e.senha,"L")).data.idConta.toString();if(!n)return void console.log("Erro ao pegar o id");const m=yield e.profissionalService.profissionalCadastro(n,e.obrigatorio.value.nome,e.obrigatorio.value.nomeSocial,e.obrigatorio.value.descricao,e.obrigatorio.value.telefone,e.obrigatorio.value.email);if((201===m.status||200===m.status)&&(localStorage.removeItem("c-user"),e.navController.navigateRoot("login")),e.obrigatorio.value.tipo){const r=yield e.profissionalService.cadastrarTipo(n,e.obrigatorio.value.tipo);console.log(r)}if(e.obrigatorio.value.imagem&&e.selectedFile){const r=yield e.profissionalService.enviarImagem(n,e.selectedFile);console.log(r)}sessionStorage.clear()})()}}return(i=c).\u0275fac=function(e){return new(e||i)(o.rXU(l.ok),o.rXU(P.u),o.rXU(k.q9),o.rXU(a.K_),o.rXU(S.M),o.rXU(y.d),o.rXU(a.hG))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-profissional-liberal-cadastro"]],decls:50,vars:8,consts:[["fileInput",""],[3,"fullscreen"],[1,"content"],[1,"container"],[1,"title"],[3,"formGroup"],["size","6"],[1,"form-item"],["formControlName","nome","label","Nome","labelPlacement","floating","placeholder","Informe o nome"],["formControlName","nomeSocial","label","Nome Social (opcional)","labelPlacement","floating","placeholder","Informe o nome social"],["formControlName","telefone","label","Telefone","labelPlacement","floating","placeholder","Informe o telefone para contato","maxlength","15","type","tel",3,"maskito","maskitoElement"],["formControlName","email","label","Email","labelPlacement","floating","placeholder","Informe o email de contato","type","email"],["formControlName","tipo","multiple","true","label","Tipo de servi\xe7o prestado","labelPlacement","floating",1,"custom-select",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["value","outro"],["formControlName","descricao","label","Descri\xe7\xe3o","labelPlacement","floating","placeholder","Descri\xe7\xe3o da atua\xe7\xe3o"],["size","12"],["expand","block",1,"teste",3,"click"],["type","file","formControlName","imagem","accept",".jpg, .png, .jpeg",2,"display","none",3,"change"],["color","light","expand","block",1,"teste",3,"routerLink"],[3,"value"]],template:function(e,t){if(1&e){const n=o.RV6();o.j41(0,"ion-content",1),o.nrm(1,"app-nav"),o.j41(2,"div",2)(3,"div",3)(4,"ion-card")(5,"ion-card-header")(6,"h1",4),o.EFF(7," Cadastro profissional Liberal/ Aut\xf4nomo "),o.k0s()(),o.j41(8,"ion-card-content")(9,"h2",4),o.EFF(10,"Informa\xe7\xf5es Obrigat\xf3rias"),o.k0s(),o.nrm(11,"br"),o.j41(12,"form",5)(13,"ion-row")(14,"ion-col",6)(15,"ion-item",7),o.nrm(16,"ion-input",8),o.k0s()(),o.j41(17,"ion-col",6)(18,"ion-item",7),o.nrm(19,"ion-input",9),o.k0s()()(),o.j41(20,"ion-row")(21,"ion-col",6)(22,"ion-item",7),o.nrm(23,"ion-input",10),o.k0s()(),o.j41(24,"ion-col",6)(25,"ion-item",7),o.nrm(26,"ion-input",11),o.k0s()()(),o.j41(27,"ion-row")(28,"ion-col",6)(29,"ion-item",7)(30,"ion-select",12),o.bIt("ionChange",function(r){return o.eBV(n),o.Njj(t.onTipoChange(r))}),o.DNE(31,M,2,2,"ion-select-option",13),o.j41(32,"ion-select-option",14),o.EFF(33,"Cadastar novo tipo de servi\xe7o"),o.k0s()()()(),o.j41(34,"ion-col",6)(35,"ion-item",7),o.nrm(36,"ion-input",15),o.k0s()()(),o.j41(37,"ion-row")(38,"ion-col",16)(39,"ion-button",17),o.bIt("click",function(){o.eBV(n);const r=o.sdS(42);return o.Njj(r.click())}),o.EFF(40),o.k0s(),o.j41(41,"input",18,0),o.bIt("change",function(r){return o.eBV(n),o.Njj(t.onFileSelected(r))}),o.k0s()()()()()(),o.j41(43,"ion-row")(44,"ion-col",6)(45,"ion-button",17),o.bIt("click",function(){return o.eBV(n),o.Njj(t.onSubmit())}),o.EFF(46," Cadastrar "),o.k0s()(),o.j41(47,"ion-col",6)(48,"ion-button",19),o.EFF(49," Cancelar "),o.k0s()()()()()()}2&e&&(o.Y8G("fullscreen",!0),o.R7$(12),o.Y8G("formGroup",t.obrigatorio),o.R7$(11),o.Y8G("maskito",t.phoneMask)("maskitoElement",t.maskPredicate),o.R7$(8),o.Y8G("ngForOf",t.opcoes),o.R7$(9),o.SpI(" ",t.selectedFile?"Imagem de divulga\xe7\xe3o Selecionado: "+t.selectedFile.name:"Selecionar imagem de divulga\xe7\xe3o"," "),o.R7$(8),o.Y8G("routerLink",o.lJ4(7,j)))},dependencies:[l.qT,l.me,l.BC,l.cb,l.tU,b.uj,a.Jm,a.b_,a.I9,a.ME,a.hU,a.W9,a.$w,a.uz,a.ln,a.Nm,a.Ip,a.Je,a.Gw,a.N7,v.Sq,F.P,l.j4,l.JD,p.Wk],styles:['@charset "UTF-8";ion-title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}ion-select[_ngcontent-%COMP%]{max-height:200px}ion-select[_ngcontent-%COMP%]   .select-interface-option[_ngcontent-%COMP%]{overflow-y:overlay;max-height:200px}.teste[_ngcontent-%COMP%]{--padding-top: 18px;--background: var(--ion-color-pep);--padding-bottom: 18px}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:500;margin:0}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.form-item[_ngcontent-%COMP%]{width:100%;max-width:100%}']}),c})()}];let E=(()=>{var i;class c{}return(i=c).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[p.iI.forChild(T),p.iI]}),c})();var I=s(5553);let O=(()=>{var i;class c{}return(i=c).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[[l.YN,b.rt,a.bv.forRoot({})],v.MD,I.h,l.YN,a.bv,l.X1,E]}),c})()}}]);