"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[92],{92:(k,u,l)=>{l.r(u),l.d(u,{RepresentantePerfilPageModule:()=>E});var h=l(177),p=l(4341),i=l(1075),g=l(8986),m=l(467),e=l(4438),f=l(3656),_=l(4796),v=l(2078),P=l(5619),b=l(833);const R=["modal7"],M=["modal8"];function S(o,c){if(1&o){const r=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",18),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.cancel())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title"),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",19)(7,"ion-button",20),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.alterarRepresentante())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",21),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Informa\xe7\xf5es Gerais"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",22),e.mxI("ngModelChange",function(t){e.eBV(r);const a=e.XpG();return e.DH7(a.representanteAlterado.nome,t)||(a.representanteAlterado.nome=t),e.Njj(t)}),e.k0s()()()}if(2&o){const r=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",r.representanteAlterado.nome)}}function j(o,c){if(1&o){const r=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",18),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.cancelPassword())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title"),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",19)(7,"ion-button",20),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.confirmPassword())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",21),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Alterar Senha"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",23),e.mxI("ngModelChange",function(t){e.eBV(r);const a=e.XpG();return e.DH7(a.novaSenha.senhaAtual,t)||(a.novaSenha.senhaAtual=t),e.Njj(t)}),e.nrm(15,"ion-input-password-toggle",24),e.k0s()(),e.j41(16,"ion-item")(17,"ion-input",25),e.mxI("ngModelChange",function(t){e.eBV(r);const a=e.XpG();return e.DH7(a.novaSenha.novaSenha,t)||(a.novaSenha.novaSenha=t),e.Njj(t)}),e.nrm(18,"ion-input-password-toggle",24),e.k0s()(),e.j41(19,"ion-item")(20,"ion-input",26),e.mxI("ngModelChange",function(t){e.eBV(r);const a=e.XpG();return e.DH7(a.novaSenha.confirmarSenha,t)||(a.novaSenha.confirmarSenha=t),e.Njj(t)}),e.nrm(21,"ion-input-password-toggle",24),e.k0s()()()}if(2&o){const r=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",r.novaSenha.senhaAtual),e.R7$(3),e.R50("ngModel",r.novaSenha.novaSenha),e.R7$(3),e.R50("ngModel",r.novaSenha.confirmarSenha)}}const C=[{path:"",component:(()=>{var o;class c{constructor(n,t,a,d,s){this.toastController=n,this.authService=t,this.navController=a,this.representanteService=d,this.adminService=s,this.user={},this.userType="",this.isLogged=!1,this.representante={},this.representanteAlterado={},this.conta={},this.novaSenha={senhaAtual:"",novaSenha:"",confirmarSenha:""},this.nomeEmpresa="",this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.actionSheetButtons=[{text:"Prosseguir",role:"destructive",handler:()=>{this.deactivateAccount(this.conta.idConta)}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}],null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var n=this;return(0,m.A)(function*(){n.getUser(),n.conta=yield n.authService.getContaDetails(),console.log("Conta: ",n.conta),n.representante=yield n.representanteService.getRepresentante(n.userId),console.log("Representante: ",n.representante.idEmpresa.nomeEmpresa),n.nomeEmpresa=n.representante.idEmpresa.nomeEmpresa,n.representanteAlterado=Object.assign({},n.representante)})()}cancel(){this.representanteAlterado=Object.assign({},this.representante),this.modal7.dismiss(null,"cancel")}onWillDismissPassword(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}cancelPassword(){this.modal8.dismiss(null,"cancel"),this.novaSenha.senhaAtual="",this.novaSenha.novaSenha="",this.novaSenha.confirmarSenha=""}confirmPassword(){this.updatePassword()}onWillDismiss(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}exibirMensagem(n){var t=this;return(0,m.A)(function*(){(yield t.toastController.create({message:n,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var n=this;return(0,m.A)(function*(){n.userId=n.authService.getUser();const t=n.authService.getType();if(null==n.userId)n.isLogged=!1;else{switch(n.userType=null!=t?t:"",t){case"A":n.user=yield n.adminService.getAdministrador(n.userId),console.log(n.user);break;case"C":case"E":case"M":case"L":break;case"R":n.user=yield n.representanteService.getRepresentante(n.userId)}n.isLogged=!0}})()}updatePassword(){var n=this;return(0,m.A)(function*(){try{n.novaSenha.novaSenha.length<4?n.exibirMensagem("Nova senha deve ter no m\xednimo 4 caracteres"):n.novaSenha.novaSenha!=n.novaSenha.confirmarSenha?n.exibirMensagem("A nova senha e sua confirma\xe7\xe3o n\xe3o coincidem"):200===(yield n.authService.updatePassword(n.conta.idConta,n.novaSenha.senhaAtual,n.novaSenha.novaSenha,n.novaSenha.confirmarSenha)).status?(n.exibirMensagem("Senha atualizada com sucesso!"),n.modal8.dismiss(null,"confirm"),n.novaSenha.senhaAtual="",n.novaSenha.novaSenha="",n.novaSenha.confirmarSenha=""):n.exibirMensagem("Senha Atual incorreta")}catch(t){console.error("Erro ao atualizar a senha:",t),n.exibirMensagem("Senha Atual incorreta")}})()}deactivateAccount(n){var t=this;return(0,m.A)(function*(){try{yield t.authService.deleteAccount(n),console.log("Conta exclu\xedda com sucesso!"),t.logout()}catch(a){console.error("Erro ao excluir conta:",a)}})()}alterarRepresentante(){var n=this;return(0,m.A)(function*(){if(0==n.representanteAlterado.nome.length)n.exibirMensagem("Informe o novo nome para o representante");else try{200==(yield n.representanteService.alterarRepresentante(n.userId,n.representanteAlterado.nome,n.representanteAlterado.idEmpresa.idconta)).status?(n.modal7.dismiss(n.representanteAlterado.nome,"confirm"),n.ngOnInit(),n.exibirMensagem("Representante alterado com sucesso!")):n.exibirMensagem("Erro interno no servidor")}catch(t){console.error(t)}})()}}return(o=c).\u0275fac=function(n){return new(n||o)(e.rXU(i.K_),e.rXU(_.u),e.rXU(f.q9),e.rXU(v.m),e.rXU(P.r))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-representante-perfil"]],viewQuery:function(n,t){if(1&n&&(e.GBs(R,7),e.GBs(M,7)),2&n){let a;e.mGM(a=e.lsd())&&(t.modal7=a.first),e.mGM(a=e.lsd())&&(t.modal8=a.first)}},decls:43,vars:4,consts:[["modal7",""],["modal8",""],["id","main-content"],[1,"content"],[1,"container"],[2,"text-align","center"],["label","Email","labelPlacement","floating","readonly","",3,"ngModelChange","ngModel"],["type","password","label","Senha","labelPlacement","floating","value","...................","readonly",""],["id","open-modal8","expand","block",1,"butao"],["readonly","","label","Nome","labelPlacement","floating","placeholder","Informe o nome do Representante","maxlength","60",3,"ngModelChange","ngModel"],["readonly","","label","Representante da Empresa:","labelPlacement","floating","placeholder","Nome da Empresa","maxlength","60",3,"ngModelChange","ngModel"],["size","6"],["id","open-modal7","expand","block",1,"butao"],["id","open-action-sheet","color","danger","fill","outline","expand","block",1,"botao-cancelar"],["trigger","open-action-sheet","header","Tem certeza que deseja desativar sua conta?",3,"buttons"],["trigger","open-modal7",3,"willDismiss"],["trigger","open-modal8",3,"willDismiss"],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome",3,"ngModelChange","ngModel"],["type","password","label","Senha atual","labelPlacement","floating",3,"ngModelChange","ngModel"],["slot","end","color","success"],["type","password","label","Senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Confirmar senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"]],template:function(n,t){if(1&n){const a=e.RV6();e.j41(0,"ion-content",2),e.nrm(1,"app-nav"),e.j41(2,"div",3)(3,"div",4)(4,"ion-card")(5,"ion-card-content")(6,"h1",5),e.EFF(7,"Perfil do Representante"),e.k0s(),e.nrm(8,"br"),e.j41(9,"h1",5),e.EFF(10,"Informa\xe7\xf5es da Conta"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-item")(13,"ion-input",6),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(t.conta.email,s)||(t.conta.email=s),e.Njj(s)}),e.k0s()(),e.j41(14,"ion-item"),e.nrm(15,"ion-input",7),e.k0s(),e.j41(16,"ion-row")(17,"ion-col")(18,"ion-button",8),e.EFF(19,"Alterar Senha"),e.k0s()()(),e.nrm(20,"br"),e.j41(21,"h1",5),e.EFF(22,"Informa\xe7\xf5es Gerais"),e.k0s(),e.nrm(23,"br"),e.j41(24,"ion-item")(25,"ion-input",9),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(t.representante.nome,s)||(t.representante.nome=s),e.Njj(s)}),e.k0s()(),e.j41(26,"ion-item")(27,"ion-input",10),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(t.nomeEmpresa,s)||(t.nomeEmpresa=s),e.Njj(s)}),e.k0s()(),e.nrm(28,"br"),e.j41(29,"ion-row")(30,"ion-col",11)(31,"ion-button",12),e.EFF(32," Alterar Informa\xe7\xf5es "),e.k0s()(),e.j41(33,"ion-col",11)(34,"ion-button",13),e.EFF(35," Desativar Conta "),e.k0s(),e.nrm(36,"ion-action-sheet",14),e.k0s()(),e.j41(37,"ion-modal",15,0),e.bIt("willDismiss",function(s){return e.eBV(a),e.Njj(t.onWillDismiss(s))}),e.DNE(39,S,15,2,"ng-template"),e.k0s(),e.j41(40,"ion-modal",16,1),e.bIt("willDismiss",function(s){return e.eBV(a),e.Njj(t.onWillDismissPassword(s))}),e.DNE(42,j,22,4,"ng-template"),e.k0s()()()()()()}2&n&&(e.R7$(13),e.R50("ngModel",t.conta.email),e.R7$(12),e.R50("ngModel",t.representante.nome),e.R7$(2),e.R50("ngModel",t.nomeEmpresa),e.R7$(9),e.Y8G("buttons",t.actionSheetButtons))},dependencies:[p.BC,p.tU,p.vS,i.wC,i.Jm,i.QW,i.b_,i.I9,i.hU,i.W9,i.$w,i.Wv,i.uz,i.ln,i.BC,i.ai,i.Sb,i.Gw,b.P],styles:[".butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.logo-img[_ngcontent-%COMP%]{max-width:150px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),c})()}];let x=(()=>{var o;class c{}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(C),g.iI]}),c})();var y=l(5553);let E=(()=>{var o;class c{}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,p.YN,i.bv,x,y.h]}),c})()}}]);