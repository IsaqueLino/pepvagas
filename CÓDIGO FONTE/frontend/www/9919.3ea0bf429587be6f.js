"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9919],{9919:(F,f,s)=>{s.r(f),s.d(f,{CadastroEmpresaPageModule:()=>R});var M=s(177),h=s(4341),i=s(1075),v=s(8986),g=s(467),a=s(4438),b=s(3656),k=s(4796),P=s(8516),I=s(6857),y=s(5619),S=s(858),E=s(1208),T=s(833);const x=[{path:"",component:(()=>{var r;class c{get currentMask(){return 14===this.novaEmpresa.telefone.length?this.phoneMask:this.fixPhoneMask}constructor(e,n,o,t,l,m,u){this.toastController=e,this.authService=n,this.navController=o,this.equipeService=t,this.candidatoService=l,this.adminService=m,this.empresaService=u,this.user={},this.userType="",this.isLogged=!1,this.isDarkTheme=!1,this.novaEmpresa={nome:"",cnpj:"",email:"",site:"",telefone:""},this.email="",this.senha="",this.maskPredicate=function(){var d=(0,g.A)(function*(C){return C.getInputElement()});return function(C){return d.apply(this,arguments)}}(),this.phoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.fixPhoneMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.cnpjMask={mask:[/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/]}}ngOnInit(){var e,n;this.getUser(),this.checkTheme(),this.email=null!==(e=sessionStorage.getItem("email"))&&void 0!==e?e:"",this.senha=null!==(n=sessionStorage.getItem("pass"))&&void 0!==n?n:""}onSubmit(){var e=this;return(0,g.A)(function*(){if(0==e.novaEmpresa.nome.length)e.exibirMensagem("Informe o nome da Empresa");else if(e.novaEmpresa.cnpj.length<18)e.exibirMensagem("Informe o CNPJ completo da Empresa");else if(0==e.novaEmpresa.email.length)e.exibirMensagem("Informe o e-mail da Empresa");else if(0!=e.novaEmpresa.telefone.length&&e.novaEmpresa.telefone.length<14)e.exibirMensagem("Por favor, complete o n\xfamero de telefone digitado");else try{const n=yield e.authService.createAccount(e.email,e.senha,"E");if(e.id=n.data.idConta.toString(),!e.id)return void console.log("erro ao pegar o id");if(0==(yield e.isValidCNPJ(e.novaEmpresa.cnpj)))return void e.exibirMensagem("CNPJ Inv\xe1lido");{const o=yield e.empresaService.cadastrarEmpresa(e.id,e.novaEmpresa.nome,e.novaEmpresa.cnpj,e.novaEmpresa.email,e.novaEmpresa.telefone,e.novaEmpresa.site);console.log("RESPONSE: ",o.status),201==o.status&&(e.exibirMensagem("Empresa "+e.novaEmpresa.nome+" cadastrada com sucesso!"),localStorage.removeItem("c-user"),sessionStorage.clear(),e.navController.navigateRoot("login"))}}catch(n){console.log(n),e.exibirMensagem("Erro interno no servidor")}})()}exibirMensagem(e){var n=this;return(0,g.A)(function*(){(yield n.toastController.create({message:e,duration:3e3,position:"top"})).present()})()}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.handleTheme()}handleTheme(){this.isDarkTheme?(document.body.setAttribute("color-scheme","dark"),localStorage.setItem("theme","dark")):(document.body.setAttribute("color-scheme","light"),localStorage.setItem("theme","light"))}checkTheme(){"dark"==localStorage.getItem("theme")?(document.body.setAttribute("color-scheme","dark"),this.isDarkTheme=!0):(document.body.setAttribute("color-scheme","light"),this.isDarkTheme=!1)}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var e=this;return(0,g.A)(function*(){const n=e.authService.getUser(),o=e.authService.getType();if(null==n)e.isLogged=!1;else{switch(e.userType=null!=o?o:"",o){case"A":e.user=yield e.adminService.getAdministrador(n),console.log(e.user);break;case"C":e.user=yield e.candidatoService.getCandidato(n);break;case"E":case"R":case"L":break;case"M":e.user=yield e.equipeService.getMembroEquipe(n)}e.isLogged=!0}})()}isValidCNPJ(e){return(0,g.A)(function*(){if("string"!=typeof e||14!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1{13}$/.test(e))return!1;let n=e.length-2,o=e.substring(0,n),t=e.substring(n),l=0,m=n-7;for(let d=n;d>=1;d--)l+=parseInt(o.charAt(n-d))*m--,m<2&&(m=9);let u=l%11<2?0:11-l%11;if(u!==parseInt(t.charAt(0)))return!1;n+=1,o=e.substring(0,n),l=0,m=n-7;for(let d=n;d>=1;d--)l+=parseInt(o.charAt(n-d))*m--,m<2&&(m=9);return u=l%11<2?0:11-l%11,u===parseInt(t.charAt(1))})()}deactivateAccount(){var e=this;return(0,g.A)(function*(){sessionStorage.clear(),e.navController.navigateRoot("login")})()}}return(r=c).\u0275fac=function(e){return new(e||r)(a.rXU(i.K_),a.rXU(k.u),a.rXU(b.q9),a.rXU(P.S),a.rXU(I.X),a.rXU(y.r),a.rXU(S.z))},r.\u0275cmp=a.VBU({type:r,selectors:[["app-cadastro-empresa"]],decls:42,vars:9,consts:[["id","main-content"],[1,"content"],[1,"container"],[1,"title"],["size","12"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome da Empresa","maxlength","60","expand","block",3,"ngModelChange","ngModel"],["size","6"],["label","CNPJ","labelPlacement","floating","placeholder","Informe o CNPJ da Empresa","expand","block",3,"ngModelChange","ngModel","maskito","maskitoElement"],["label","E-mail para contato","labelPlacement","floating","placeholder","Informe o E-mail de contato da empresa","maxlength","50","expand","block",3,"ngModelChange","ngModel"],["label","Site da empresa","labelPlacement","floating","placeholder","Informe o site da empresa","maxlength","45",3,"ngModelChange","ngModel"],["label","Telefone para contato","labelPlacement","floating","placeholder","Informe o site da empresa",3,"ngModelChange","ngModel","maskito","maskitoElement"],["expand","block",1,"botao-cadastrar",3,"click"],["color","danger","fill","outline","expand","block",1,"botao-cancelar",3,"click"]],template:function(e,n){1&e&&(a.j41(0,"ion-content",0),a.nrm(1,"app-nav"),a.j41(2,"div",1)(3,"div",2)(4,"ion-card")(5,"ion-card-header")(6,"h2",3),a.EFF(7,"Cadastro de Empresa"),a.k0s()(),a.j41(8,"ion-card-content")(9,"h1",3),a.EFF(10,"Informa\xe7\xf5es Obrigat\xf3rias"),a.k0s(),a.nrm(11,"br"),a.j41(12,"ion-row")(13,"ion-col",4)(14,"ion-item")(15,"ion-input",5),a.mxI("ngModelChange",function(t){return a.DH7(n.novaEmpresa.nome,t)||(n.novaEmpresa.nome=t),t}),a.k0s()()()(),a.j41(16,"ion-row")(17,"ion-col",6)(18,"ion-item")(19,"ion-input",7),a.mxI("ngModelChange",function(t){return a.DH7(n.novaEmpresa.cnpj,t)||(n.novaEmpresa.cnpj=t),t}),a.k0s()()(),a.j41(20,"ion-col",6)(21,"ion-item")(22,"ion-input",8),a.mxI("ngModelChange",function(t){return a.DH7(n.novaEmpresa.email,t)||(n.novaEmpresa.email=t),t}),a.k0s()()()(),a.nrm(23,"br"),a.j41(24,"h1",3),a.EFF(25,"Informa\xe7\xf5es Opcionais"),a.k0s(),a.nrm(26,"br"),a.j41(27,"ion-row")(28,"ion-col",6)(29,"ion-item")(30,"ion-input",9),a.mxI("ngModelChange",function(t){return a.DH7(n.novaEmpresa.site,t)||(n.novaEmpresa.site=t),t}),a.k0s()()(),a.j41(31,"ion-col",6)(32,"ion-item")(33,"ion-input",10),a.mxI("ngModelChange",function(t){return a.DH7(n.novaEmpresa.telefone,t)||(n.novaEmpresa.telefone=t),t}),a.k0s()()()(),a.nrm(34,"br"),a.j41(35,"ion-row")(36,"ion-col",6)(37,"ion-button",11),a.bIt("click",function(){return n.onSubmit()}),a.EFF(38," Cadastrar Empresa "),a.k0s()(),a.j41(39,"ion-col",6)(40,"ion-button",12),a.bIt("click",function(){return n.deactivateAccount()}),a.EFF(41," Cancelar "),a.k0s()()()()()()()()),2&e&&(a.R7$(15),a.R50("ngModel",n.novaEmpresa.nome),a.R7$(4),a.R50("ngModel",n.novaEmpresa.cnpj),a.Y8G("maskito",n.cnpjMask)("maskitoElement",n.maskPredicate),a.R7$(3),a.R50("ngModel",n.novaEmpresa.email),a.R7$(8),a.R50("ngModel",n.novaEmpresa.site),a.R7$(3),a.R50("ngModel",n.novaEmpresa.telefone),a.Y8G("maskito",n.currentMask)("maskitoElement",n.maskPredicate))},dependencies:[h.BC,h.tU,h.vS,i.Jm,i.b_,i.I9,i.ME,i.hU,i.W9,i.$w,i.uz,i.ln,i.Gw,E.uj,T.P],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:30px}ion-img[_ngcontent-%COMP%]{max-width:150px}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{scale:90%}.botao-cancelar[_ngcontent-%COMP%]{border-radius:4px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),c})()}];let A=(()=>{var r;class c{}return(r=c).\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.$C({type:r}),r.\u0275inj=a.G2t({imports:[v.iI.forChild(x),v.iI]}),c})();var j=s(5553);let R=(()=>{var r;class c{}return(r=c).\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.$C({type:r}),r.\u0275inj=a.G2t({imports:[M.MD,h.YN,i.bv,A,E.rt,j.h]}),c})()}}]);