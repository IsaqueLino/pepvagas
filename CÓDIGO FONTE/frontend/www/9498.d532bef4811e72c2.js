"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9498],{9498:(k,g,l)=>{l.r(g),l.d(g,{EquipePerfilPageModule:()=>y});var h=l(177),d=l(4341),r=l(1075),p=l(8986),u=l(467),e=l(4438),f=l(3656),v=l(4796),P=l(8516),_=l(5619),b=l(833);const E=["modal5"],M=["modal6"];function S(a,c){if(1&a){const i=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",18),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.cancel())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",19)(7,"ion-button",20),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.alterarEquipe())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",21),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Informa\xe7\xf5es Gerais"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",22),e.mxI("ngModelChange",function(o){e.eBV(i);const t=e.XpG();return e.DH7(t.equipeAlterado.nome,o)||(t.equipeAlterado.nome=o),e.Njj(o)}),e.k0s()()()}if(2&a){const i=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",i.equipeAlterado.nome)}}function j(a,c){if(1&a){const i=e.RV6();e.j41(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",18),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.cancelPassword())}),e.EFF(3,"Voltar"),e.k0s()(),e.j41(4,"ion-title",5),e.EFF(5,"Alterar Informa\xe7\xf5es"),e.k0s(),e.j41(6,"ion-buttons",19)(7,"ion-button",20),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.confirmPassword())}),e.EFF(8,"Enviar"),e.k0s()()(),e.j41(9,"ion-content",21),e.nrm(10,"br"),e.j41(11,"h2",5),e.EFF(12,"Alterar Senha"),e.k0s(),e.j41(13,"ion-item")(14,"ion-input",23),e.mxI("ngModelChange",function(o){e.eBV(i);const t=e.XpG();return e.DH7(t.novaSenha.senhaAtual,o)||(t.novaSenha.senhaAtual=o),e.Njj(o)}),e.nrm(15,"ion-input-password-toggle",24),e.k0s()(),e.j41(16,"ion-item")(17,"ion-input",25),e.mxI("ngModelChange",function(o){e.eBV(i);const t=e.XpG();return e.DH7(t.novaSenha.novaSenha,o)||(t.novaSenha.novaSenha=o),e.Njj(o)}),e.nrm(18,"ion-input-password-toggle",24),e.k0s()(),e.j41(19,"ion-item")(20,"ion-input",26),e.mxI("ngModelChange",function(o){e.eBV(i);const t=e.XpG();return e.DH7(t.novaSenha.confirmarSenha,o)||(t.novaSenha.confirmarSenha=o),e.Njj(o)}),e.nrm(21,"ion-input-password-toggle",24),e.k0s()()()}if(2&a){const i=e.XpG();e.R7$(7),e.Y8G("strong",!0),e.R7$(7),e.R50("ngModel",i.novaSenha.senhaAtual),e.R7$(3),e.R50("ngModel",i.novaSenha.novaSenha),e.R7$(3),e.R50("ngModel",i.novaSenha.confirmarSenha)}}const q=[{path:"",component:(()=>{var a;class c{constructor(n,o,t,m,s){this.toastController=n,this.authService=o,this.navController=t,this.equipeService=m,this.adminService=s,this.user={},this.userType="",this.isLogged=!1,this.equipe={},this.equipeAlterado={},this.conta={},this.novaSenha={senhaAtual:"",novaSenha:"",confirmarSenha:""},this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.actionSheetButtons=[{text:"Prosseguir",role:"destructive",handler:()=>{this.deactivateAccount(this.conta.idConta)}},{text:"Cancelar",role:"cancel",data:{action:"cancel"}}],null==this.authService.getJwt()&&this.navController.navigateRoot("login")}ngOnInit(){var n=this;return(0,u.A)(function*(){n.getUser(),n.conta=yield n.authService.getContaDetails(),console.log("Conta: ",n.conta),n.equipe=yield n.equipeService.getMembroEquipe(n.userId),console.log("Equipe: ",n.equipe),n.equipeAlterado=Object.assign({},n.equipe)})()}confirm(){}cancel(){this.equipeAlterado=Object.assign({},this.equipe),this.modal5.dismiss(null,"cancel")}onWillDismissPassword(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}cancelPassword(){this.modal6.dismiss(null,"cancel"),this.novaSenha.senhaAtual="",this.novaSenha.novaSenha="",this.novaSenha.confirmarSenha=""}confirmPassword(){this.updatePassword()}onWillDismiss(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}exibirMensagem(n){var o=this;return(0,u.A)(function*(){(yield o.toastController.create({message:n,duration:3e3,position:"top"})).present()})()}logout(){this.authService.logout(),this.navController.navigateForward("login")}getUser(){var n=this;return(0,u.A)(function*(){n.userId=n.authService.getUser();const o=n.authService.getType();if(null==n.userId)n.isLogged=!1;else{switch(n.userType=null!=o?o:"",o){case"A":n.user=yield n.adminService.getAdministrador(n.userId),console.log(n.user);break;case"C":case"M":case"R":case"L":break;case"E":n.user=yield n.equipeService.getMembroEquipe(n.userId)}n.isLogged=!0}})()}updatePassword(){var n=this;return(0,u.A)(function*(){try{n.novaSenha.novaSenha.length<4?n.exibirMensagem("Nova senha deve ter no m\xednimo 4 caracteres"):n.novaSenha.novaSenha!=n.novaSenha.confirmarSenha?n.exibirMensagem("A nova senha e sua confirma\xe7\xe3o n\xe3o coincidem"):200===(yield n.authService.updatePassword(n.conta.idConta,n.novaSenha.senhaAtual,n.novaSenha.novaSenha,n.novaSenha.confirmarSenha)).status?(n.exibirMensagem("Senha atualizada com sucesso!"),n.modal6.dismiss(null,"confirm"),n.novaSenha.senhaAtual="",n.novaSenha.novaSenha="",n.novaSenha.confirmarSenha=""):n.exibirMensagem("Senha Atual incorreta")}catch(o){console.error("Erro ao atualizar a senha:",o),n.exibirMensagem("Senha Atual incorreta")}})()}deactivateAccount(n){var o=this;return(0,u.A)(function*(){try{yield o.authService.deleteAccount(n),console.log("Conta exclu\xedda com sucesso!"),o.logout()}catch(t){console.error("Erro ao excluir conta:",t)}})()}alterarEquipe(){var n=this;return(0,u.A)(function*(){if(0==n.equipeAlterado.nome.length)n.exibirMensagem("Informe o novo nome para o representante");else try{200==(yield n.equipeService.alterarMembroEquipe(n.userId,n.equipeAlterado.nome)).status?(n.modal5.dismiss(n.equipeAlterado.nome,"confirm"),n.ngOnInit(),n.exibirMensagem("Membro da Equipe alterado com sucesso!")):n.exibirMensagem("Erro interno no servidor")}catch(o){console.error(o)}})()}}return(a=c).\u0275fac=function(n){return new(n||a)(e.rXU(r.K_),e.rXU(v.u),e.rXU(f.q9),e.rXU(P.S),e.rXU(_.r))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-equipe-perfil"]],viewQuery:function(n,o){if(1&n&&(e.GBs(E,7),e.GBs(M,7)),2&n){let t;e.mGM(t=e.lsd())&&(o.modal5=t.first),e.mGM(t=e.lsd())&&(o.modal6=t.first)}},decls:40,vars:3,consts:[["modal5",""],["modal6",""],["id","main-content"],[1,"content"],[1,"container"],[2,"text-align","center"],["label","Email","labelPlacement","floating","readonly","",3,"ngModelChange","ngModel"],["type","password","label","Senha","labelPlacement","floating","value","...................","readonly",""],["id","open-modal6","expand","block",1,"butao"],[1,"title"],["readonly","","label","Nome","labelPlacement","floating","placeholder","Informe o nome do Membro da Equipe","maxlength","60",3,"ngModelChange","ngModel"],["size","6"],["id","open-modal5","expand","block",1,"butao"],["id","open-action-sheet","color","danger","fill","outline","expand","block",1,"botao-cancelar"],["trigger","open-action-sheet","header","Tem certeza que deseja desativar sua conta?",3,"buttons"],["trigger","open-modal5",3,"willDismiss"],["trigger","open-modal6",3,"willDismiss"],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Nome","labelPlacement","floating","placeholder","Informe o nome",3,"ngModelChange","ngModel"],["type","password","label","Senha atual","labelPlacement","floating",3,"ngModelChange","ngModel"],["slot","end","color","success"],["type","password","label","Senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Confirmar senha nova","labelPlacement","floating",3,"ngModelChange","ngModel"]],template:function(n,o){if(1&n){const t=e.RV6();e.j41(0,"ion-content",2),e.nrm(1,"app-nav"),e.j41(2,"div",3)(3,"div",4)(4,"ion-card")(5,"ion-card-content")(6,"h1",5),e.EFF(7,"Perfil do Membro da Equipe"),e.k0s(),e.nrm(8,"br"),e.j41(9,"h1",5),e.EFF(10,"Informa\xe7\xf5es da Conta"),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-item")(13,"ion-input",6),e.mxI("ngModelChange",function(s){return e.eBV(t),e.DH7(o.conta.email,s)||(o.conta.email=s),e.Njj(s)}),e.k0s()(),e.j41(14,"ion-item"),e.nrm(15,"ion-input",7),e.k0s(),e.j41(16,"ion-row")(17,"ion-col")(18,"ion-button",8),e.EFF(19,"Alterar Senha"),e.k0s()()(),e.j41(20,"h1",9),e.EFF(21,"Informa\xe7\xf5es Gerais"),e.k0s(),e.nrm(22,"br"),e.j41(23,"ion-item")(24,"ion-input",10),e.mxI("ngModelChange",function(s){return e.eBV(t),e.DH7(o.equipe.nome,s)||(o.equipe.nome=s),e.Njj(s)}),e.k0s()(),e.nrm(25,"br"),e.j41(26,"ion-row")(27,"ion-col",11)(28,"ion-button",12),e.EFF(29," Alterar Informa\xe7\xf5es "),e.k0s()(),e.j41(30,"ion-col",11)(31,"ion-button",13),e.EFF(32," Desativar Conta "),e.k0s(),e.nrm(33,"ion-action-sheet",14),e.k0s()(),e.j41(34,"ion-modal",15,0),e.bIt("willDismiss",function(s){return e.eBV(t),e.Njj(o.onWillDismiss(s))}),e.DNE(36,S,15,2,"ng-template"),e.k0s(),e.j41(37,"ion-modal",16,1),e.bIt("willDismiss",function(s){return e.eBV(t),e.Njj(o.onWillDismissPassword(s))}),e.DNE(39,j,22,4,"ng-template"),e.k0s()()()()()()}2&n&&(e.R7$(13),e.R50("ngModel",o.conta.email),e.R7$(11),e.R50("ngModel",o.equipe.nome),e.R7$(9),e.Y8G("buttons",o.actionSheetButtons))},dependencies:[d.BC,d.tU,d.vS,r.wC,r.Jm,r.QW,r.b_,r.I9,r.hU,r.W9,r.$w,r.Wv,r.uz,r.ln,r.BC,r.ai,r.Sb,r.Gw,b.P],styles:[".butao[_ngcontent-%COMP%]{--background: var(--ion-color-pep)}.header[_ngcontent-%COMP%]{--background: var(--ion-color-pep);color:#fff}.logo-img[_ngcontent-%COMP%]{max-width:150px}.menu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]{overflow-y:auto}.container[_ngcontent-%COMP%]{padding:0 10px;display:flex;flex-direction:column;justify-content:center;width:80%;max-width:1000px}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}ion-item[_ngcontent-%COMP%]{--background: var(--ion-item-background);border-radius:5px;margin-bottom:10px;border:1px #BBB8B8 solid;padding:2px}ion-card[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px}"]}),c})()}];let C=(()=>{var a;class c{}return(a=c).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[p.iI.forChild(q),p.iI]}),c})();var x=l(5553);let y=(()=>{var a;class c{}return(a=c).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[h.MD,d.YN,r.bv,C,x.h]}),c})()}}]);